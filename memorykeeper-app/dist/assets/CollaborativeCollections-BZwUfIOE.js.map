{"version":3,"file":"CollaborativeCollections-BZwUfIOE.js","sources":["../../src/components/CollaborativeCollections.tsx"],"sourcesContent":["\nimport { useState, useEffect, type FC } from 'react';\nimport { useAuth } from '../lib/AuthContext';\nimport { useError } from '../lib/ErrorContext';\nimport { useAppState } from '../lib/AppStateContext';\nimport { collaborativeMemoryService, CollaborativeMemory, CollaborationInvite } from '../lib/collaborativeMemoryService';\nimport { ChevronLeft, Plus, UserPlus, Check, X, Users, Share2, Clock, Settings } from 'lucide-react';\n\nconst CollaborativeCollections: FC<{ onBack?: () => void }> = ({ onBack }) => {\n  const { user } = useAuth();\n  const { addToast } = useError();\n  const { dispatch } = useAppState();\n  const [collections, setCollections] = useState<CollaborativeMemory[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [showInviteForm, setShowInviteForm] = useState<string | null>(null);\n  const [invites, setInvites] = useState<CollaborationInvite[]>([]);\n\n  // Create collection form state\n  const [newCollection, setNewCollection] = useState({\n    title: '',\n    description: '',\n    isPublic: false\n  });\n\n  // Invite form state\n  const [inviteData, setInviteData] = useState({\n    email: '',\n    permission: 'view' as 'view' | 'edit',\n    message: ''\n  });\n\n  useEffect(() => {\n    loadCollections();\n    loadInvites();\n  }, [user?.id]);\n\n  const loadCollections = async () => {\n    if (!user?.id) return;\n\n    try {\n      const result = await collaborativeMemoryService.getUserCollaborativeCollections(user.id);\n      if (result.data) {\n        setCollections(result.data);\n      }\n    } catch (error: any) {\n      console.error('Error loading collections:', error);\n      addToast({\n        type: 'error',\n        title: 'Error',\n        message: 'Failed to load collaborative collections.',\n        duration: 4000\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadInvites = async () => {\n    // In a real implementation, we'd fetch pending invites from the database\n    // For now, we'll show an empty list\n    setInvites([]);\n  };\n\n  const handleCreateCollection = async () => {\n    if (!newCollection.title.trim()) {\n      addToast({\n        type: 'error',\n        title: 'Validation Error',\n        message: 'Collection title is required.',\n        duration: 4000\n      });\n      return;\n    }\n\n    try {\n      const result = await collaborativeMemoryService.createCollaborativeCollection(\n        newCollection.title,\n        newCollection.description,\n        newCollection.isPublic\n      );\n\n      if (result.success) {\n        addToast({\n          type: 'success',\n          title: 'Collection Created',\n          message: `\"${newCollection.title}\" has been created successfully.`,\n          duration: 4000\n        });\n\n        setNewCollection({ title: '', description: '', isPublic: false });\n        setShowCreateForm(false);\n        await loadCollections();\n      } else {\n        throw new Error(result.error);\n      }\n    } catch (error: any) {\n      addToast({\n        type: 'error',\n        title: 'Creation Failed',\n        message: error.message || 'Failed to create collection.',\n        duration: 5000\n      });\n    }\n  };\n\n  const handleSendInvite = async (collectionId: string) => {\n    if (!inviteData.email.trim()) {\n      addToast({\n        type: 'error',\n        title: 'Validation Error',\n        message: 'Email address is required.',\n        duration: 4000\n      });\n      return;\n    }\n\n    try {\n      const result = await collaborativeMemoryService.inviteUserToCollection(\n        collectionId,\n        inviteData.email,\n        inviteData.permission,\n        inviteData.message\n      );\n\n      if (result.success) {\n        addToast({\n          type: 'success',\n          title: 'Invite Sent',\n          message: `Invitation sent to ${inviteData.email}.`,\n          duration: 4000\n        });\n\n        setInviteData({ email: '', permission: 'view', message: '' });\n        setShowInviteForm(null);\n      } else {\n        throw new Error(result.error);\n      }\n    } catch (error: any) {\n      addToast({\n        type: 'error',\n        title: 'Invite Failed',\n        message: error.message || 'Failed to send invitation.',\n        duration: 5000\n      });\n    }\n  };\n\n  const handleAcceptInvite = async (inviteId: string) => {\n    try {\n      const result = await collaborativeMemoryService.acceptCollaborationInvite(inviteId);\n\n      if (result.success) {\n        addToast({\n          type: 'success',\n          title: 'Invite Accepted',\n          message: 'You have joined the collaborative collection.',\n          duration: 4000\n        });\n\n        await loadCollections();\n        await loadInvites();\n      } else {\n        throw new Error(result.error);\n      }\n    } catch (error: any) {\n      addToast({\n        type: 'error',\n        title: 'Accept Failed',\n        message: error.message || 'Failed to accept invitation.',\n        duration: 5000\n      });\n    }\n  };\n\n  const handleBack = () => {\n    if (onBack) {\n      onBack();\n    } else {\n      dispatch({ type: 'SET_DETAIL_VIEW', payload: null });\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"pt-6 space-y-8\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <button\n            onClick={handleBack}\n            className=\"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100 hover:bg-orange-50 transition-colors\"\n            aria-label=\"Go back\"\n          >\n            <ChevronLeft className=\"w-6 h-6 text-gray-700\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800\">Collaborative Collections</h1>\n            <p className=\"text-sm text-gray-600\">Loading...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pt-6 space-y-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={handleBack}\n            className=\"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100 hover:bg-orange-50 transition-colors\"\n            aria-label=\"Go back\"\n          >\n            <ChevronLeft className=\"w-6 h-6 text-gray-700\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800\">Collaborative Collections</h1>\n            <p className=\"text-sm text-gray-600\">Share memories with family and friends</p>\n          </div>\n        </div>\n\n        <button\n          onClick={() => setShowCreateForm(true)}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-orange-500 to-rose-500 text-white px-4 py-2 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Create Collection\n        </button>\n      </div>\n\n      {/* Pending Invites */}\n      {invites.length > 0 && (\n        <div className=\"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Pending Invites</h2>\n          <div className=\"space-y-3\">\n            {invites.map((invite) => (\n              <div key={invite.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-2xl\">\n                <div className=\"flex items-center gap-3\">\n                  <UserPlus className=\"w-8 h-8 text-blue-500\" />\n                  <div>\n                    <p className=\"font-medium text-gray-800\">Invited to collaborate</p>\n                    <p className=\"text-sm text-gray-600\">Expires: {new Date(invite.expires_at).toLocaleDateString()}</p>\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => handleAcceptInvite(invite.id)}\n                    className=\"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors\"\n                  >\n                    <Check className=\"w-4 h-4\" />\n                    Accept\n                  </button>\n                  <button className=\"flex items-center gap-2 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors\">\n                    <X className=\"w-4 h-4\" />\n                    Decline\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Collections Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {collections.map((collection) => (\n          <div key={collection.id} className=\"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h3 className=\"text-lg font-bold text-gray-800\">{collection.title}</h3>\n                {collection.description && (\n                  <p className=\"text-sm text-gray-600 mt-1\">{collection.description}</p>\n                )}\n              </div>\n              <button\n                onClick={() => setShowInviteForm(collection.id)}\n                className=\"w-8 h-8 flex items-center justify-center bg-orange-100 rounded-lg hover:bg-orange-200 transition-colors\"\n                aria-label=\"Invite collaborators\"\n              >\n                <UserPlus className=\"w-4 h-4 text-orange-600\" />\n              </button>\n            </div>\n\n            <div className=\"flex items-center justify-between text-sm text-gray-600 mb-4\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex items-center gap-1\">\n                  <Users className=\"w-4 h-4\" />\n                  <span>{collection.collaborators.length} members</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <Share2 className=\"w-4 h-4\" />\n                  <span>{collection.shared_memories.length} memories</span>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Clock className=\"w-4 h-4\" />\n                <span>{new Date(collection.updated_at).toLocaleDateString()}</span>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <button className=\"flex-1 bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-xl font-semibold hover:shadow-lg transition-all\">\n                Open Collection\n              </button>\n              <button className=\"px-3 py-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors\">\n                <Settings className=\"w-4 h-4 text-gray-600\" />\n              </button>\n            </div>\n          </div>\n        ))}\n\n        {/* Empty State */}\n        {collections.length === 0 && (\n          <div className=\"col-span-full bg-white/80 backdrop-blur-xl rounded-3xl p-12 shadow-xl border border-orange-100 text-center\">\n            <Users className=\"w-16 h-16 text-orange-300 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">No Collaborative Collections</h3>\n            <p className=\"text-gray-600 mb-6\">Create your first collection to start sharing memories with family and friends.</p>\n            <button\n              onClick={() => setShowCreateForm(true)}\n              className=\"bg-gradient-to-r from-orange-500 to-rose-500 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all\"\n            >\n              Create Your First Collection\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Create Collection Modal */}\n      {showCreateForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full\">\n            <h2 className=\"text-xl font-bold text-gray-800 mb-6\">Create Collaborative Collection</h2>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Collection Title *\n                </label>\n                <input\n                  type=\"text\"\n                  value={newCollection.title}\n                  onChange={(e) => setNewCollection(prev => ({ ...prev, title: e.target.value }))}\n                  placeholder=\"e.g., Family Memories 2024\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Description (Optional)\n                </label>\n                <textarea\n                  value={newCollection.description}\n                  onChange={(e) => setNewCollection(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Describe what this collection is about...\"\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"isPublic\"\n                  checked={newCollection.isPublic}\n                  onChange={(e) => setNewCollection(prev => ({ ...prev, isPublic: e.target.checked }))}\n                  className=\"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500\"\n                />\n                <label htmlFor=\"isPublic\" className=\"text-sm text-gray-700\">\n                  Make this collection public\n                </label>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={() => setShowCreateForm(false)}\n                className=\"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleCreateCollection}\n                className=\"flex-1 py-3 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all\"\n              >\n                Create Collection\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Invite User Modal */}\n      {showInviteForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full\">\n            <h2 className=\"text-xl font-bold text-gray-800 mb-6\">Invite Collaborator</h2>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Email Address *\n                </label>\n                <input\n                  type=\"email\"\n                  value={inviteData.email}\n                  onChange={(e) => setInviteData(prev => ({ ...prev, email: e.target.value }))}\n                  placeholder=\"friend@example.com\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Permission Level\n                </label>\n                <select\n                  value={inviteData.permission}\n                  onChange={(e) => setInviteData(prev => ({ ...prev, permission: e.target.value as 'view' | 'edit' }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                >\n                  <option value=\"view\">View Only - Can see memories</option>\n                  <option value=\"edit\">Edit - Can add and modify memories</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Personal Message (Optional)\n                </label>\n                <textarea\n                  value={inviteData.message}\n                  onChange={(e) => setInviteData(prev => ({ ...prev, message: e.target.value }))}\n                  placeholder=\"Share a personal message with your invitation...\"\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={() => setShowInviteForm(null)}\n                className=\"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => handleSendInvite(showInviteForm)}\n                className=\"flex-1 py-3 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all\"\n              >\n                Send Invite\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CollaborativeCollections;\n"],"names":["CollaborativeCollections","onBack","user","useAuth","addToast","useError","dispatch","useAppState","collections","setCollections","useState","loading","setLoading","showCreateForm","setShowCreateForm","showInviteForm","setShowInviteForm","invites","setInvites","newCollection","setNewCollection","inviteData","setInviteData","useEffect","loadCollections","loadInvites","result","collaborativeMemoryService","error","handleCreateCollection","handleSendInvite","collectionId","handleAcceptInvite","inviteId","handleBack","jsxs","jsx","ChevronLeft","Plus","invite","UserPlus","Check","X","collection","Users","Share2","Clock","Settings","e","prev"],"mappings":"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"}