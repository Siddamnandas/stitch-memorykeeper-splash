{"version":3,"file":"ProactiveMemoryPrompt-BnZr2j-8.js","sources":["../../src/components/ProactiveMemoryPrompt.tsx"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect, useContext, useCallback, useMemo, useRef } from 'react';\n\nimport { ChevronLeft, Sparkles, RotateCcw, Save, Loader2 } from 'lucide-react';\nimport { useAppState } from '../lib/AppStateContext';\nimport { generateMemoryPrompt } from '../lib/aiService';\nimport { addMemory } from '../lib/dataService';\nimport { useAuth } from '../lib/AuthContext';\nimport { useError } from '../lib/ErrorContext';\n\nconst ProactiveMemoryPrompt: React.FC<{ onBack: () => void }> = ({ onBack }) => {\n  const [prompt, setPrompt] = useState('');\n  const [response, setResponse] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const { state } = useAppState();\n  const { user } = useAuth();\n  const { addToast } = useError();\n\n  const handleGeneratePrompt = async () => {\n    setIsGenerating(true);\n    try {\n      const result = await generateMemoryPrompt(state.memories);\n      if (result.success) {\n        setPrompt(result.content);\n      } else {\n        // Fallback to sample prompts if AI fails\n        const samplePrompts = [\n          \"What did you have for breakfast this morning?\",\n          \"Describe a cherished childhood memory.\",\n          \"What's something you're grateful for today?\",\n          \"Tell me about a meaningful conversation you had recently.\"\n        ];\n        setPrompt(samplePrompts[Math.floor(Math.random() * samplePrompts.length)]);\n        addToast({\n          type: 'warning',\n          title: 'Using Sample Prompt',\n          message: 'AI prompt generation unavailable. Using a curated prompt instead.',\n          duration: 4000\n        });\n      }\n    } catch (error) {\n      // Fallback to sample prompts\n      const samplePrompts = [\n        \"What did you have for breakfast this morning?\",\n        \"Describe a cherished childhood memory.\",\n        \"What's something you're grateful for today?\",\n        \"Tell me about a meaningful conversation you had recently.\"\n      ];\n      setPrompt(samplePrompts[Math.floor(Math.random() * samplePrompts.length)]);\n      addToast({\n        type: 'error',\n        title: 'Generation Failed',\n        message: 'Could not generate AI prompt. Using a sample prompt instead.',\n        duration: 4000\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleSubmitResponse = async () => {\n    if (!prompt || !response.trim()) {\n      addToast({\n        type: 'warning',\n        title: 'Incomplete Response',\n        message: 'Please provide a response to the memory prompt.',\n        duration: 3000\n      });\n      return;\n    }\n\n    if (!user) {\n      addToast({\n        type: 'error',\n        title: 'Authentication Required',\n        message: 'Please sign in to save your memories.',\n        duration: 4000\n      });\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const result = await addMemory({\n        prompt,\n        response: response.trim(),\n        date: new Date().toISOString().split('T')[0],\n        type: 'text',\n        tags: ['ai-generated', 'proactive']\n      }, user.id);\n\n      if (result.error) {\n        throw new Error(result.error.message);\n      }\n\n      addToast({\n        type: 'success',\n        title: 'Memory Saved!',\n        message: 'Thank you for sharing your memory. It has been saved successfully.',\n        duration: 4000\n      });\n\n      setPrompt('');\n      setResponse('');\n    } catch (error: any) {\n      console.error('Error saving memory:', error);\n      addToast({\n        type: 'error',\n        title: 'Save Failed',\n        message: 'Could not save your memory. Please try again.',\n        duration: 5000\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"pt-6\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button \n          onClick={onBack}\n          className=\"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100\"\n        >\n          <ChevronLeft className=\"w-6 h-6 text-gray-700\" />\n        </button>\n        <h1 className=\"text-2xl font-bold text-gray-800\">Memory Prompt</h1>\n      </div>\n      \n      <div className=\"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-orange-100 p-6 mb-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-2xl flex items-center justify-center\">\n            <Sparkles className=\"w-6 h-6 text-white\" />\n          </div>\n          <div>\n            <h2 className=\"font-bold text-gray-800\">Daily Memory Prompt</h2>\n            <p className=\"text-sm text-gray-500\">Reflect on your experiences</p>\n          </div>\n        </div>\n        \n        {!prompt ? (\n          <div className=\"text-center py-8\">\n            <button \n              className=\"bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-3 px-6 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2 mx-auto\"\n              onClick={handleGeneratePrompt}\n            >\n              <Sparkles className=\"w-5 h-5\" />\n              <span>Generate Prompt</span>\n            </button>\n          </div>\n        ) : (\n          <div>\n            <div className=\"mb-6 p-4 bg-purple-50 rounded-2xl border border-purple-200\">\n              <p className=\"text-lg font-medium text-gray-800\">{prompt}</p>\n            </div>\n            \n            <div className=\"mb-6\">\n              <label className=\"block text-lg font-medium mb-2 text-gray-800\">Your Response:</label>\n              <textarea\n                className=\"w-full h-32 bg-orange-50 border border-orange-200 rounded-2xl p-4 text-gray-700 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none resize-none\"\n                placeholder=\"Write your memory here...\"\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n              ></textarea>\n            </div>\n            \n            <div className=\"flex gap-3\">\n              <button \n                className=\"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-3 px-4 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2\"\n                onClick={handleSubmitResponse}\n              >\n                <Save className=\"w-5 h-5\" />\n                <span>Save Memory</span>\n              </button>\n              <button \n                className=\"flex-1 bg-orange-100 text-orange-700 font-bold py-3 px-4 rounded-2xl hover:bg-orange-200 transition-all flex items-center justify-center gap-2\"\n                onClick={handleGeneratePrompt}\n              >\n                <RotateCcw className=\"w-5 h-5\" />\n                <span>New Prompt</span>\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProactiveMemoryPrompt;"],"names":["ProactiveMemoryPrompt","onBack","prompt","setPrompt","useState","response","setResponse","isGenerating","setIsGenerating","isSaving","setIsSaving","state","useAppState","user","useAuth","addToast","useError","handleGeneratePrompt","result","generateMemoryPrompt","samplePrompts","handleSubmitResponse","addMemory","error","jsxs","jsx","ChevronLeft","Sparkles","e","Save","RotateCcw"],"mappings":"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"}