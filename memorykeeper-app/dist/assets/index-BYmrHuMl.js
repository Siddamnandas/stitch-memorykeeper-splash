const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/game-components-DlDolkYV.js","assets/ai-studio-D1VHpCnl.js","assets/CollaborativeMemory-wWapY4fK.js","assets/collaborativeMemoryService-C774JkFX.js","assets/GameSelection-DNehH-Uf.js","assets/HomeDashboard-B0NKGx_Z.js","assets/InviteCollaborate-CVCL4oyi.js","assets/LegacyLink-BITB8_KX.js","assets/MemoryStrengthFlower-C0Mp4FnN.js","assets/KnowledgeGraphView-B-tA1X-3.js","assets/PremiumFeaturesDetails-Y17pEb3A.js","assets/ProactiveMemoryPrompt-BnZr2j-8.js","assets/ProfileSetup-76vflrbB.js","assets/QuickTutorial-TLGdWSk-.js","assets/ScrapbookTimeline-BKaEGhYV.js","assets/ViewProgressAndSettings-BF8ckTGe.js","assets/VisualContentGenerator-B5ceHzam.js","assets/UserProfileManager-LwE7TgIX.js","assets/SyncStatusIndicator-CTV-JR_R.js","assets/DataExportImport-2xe7LyWL.js","assets/MemoryImport-LAgzw7O-.js","assets/MemoryStrengthBreakdown-vdyNqMpM.js","assets/CollaborativeCollections-BZwUfIOE.js","assets/EnhancedVoiceInput-BycE0N4i.js","assets/OnboardingWizard-BgAupc_W.js"])))=>i.map(i=>d[i]);
var Xu=Object.defineProperty;var Qu=(t,e,n)=>e in t?Xu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var at=(t,e,n)=>Qu(t,typeof e!="symbol"?e+"":e,n);import{r as S,w as oc,j as u,c as an,x as to,y as Zu,I as ed,F as td,E as nd,X as ac,u as rd,s as sd,f as id,z as od,Z as ad,D as cd,C as is,n as no,J as ld,H as ud,G as dd,U as fd,K as pd,N as hd,O as md}from"./ai-studio-D1VHpCnl.js";import{r as gd,u as ht,a as ot,b as cc,_ as Y,c as yd,s as Yn,m as ro,g as _d,d as Sd,N as Is,R as bd,e as Me,A as xd,B as Ed,f as Ut}from"./game-components-DlDolkYV.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Cs={},so=gd;Cs.createRoot=so.createRoot,Cs.hydrateRoot=so.hydrateRoot;const V=t=>typeof t=="string",_n=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},io=t=>t==null?"":""+t,vd=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},wd=/###/g,oo=t=>t&&t.indexOf("###")>-1?t.replace(wd,"."):t,ao=t=>!t||V(t),bn=(t,e,n)=>{const r=V(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(ao(t))return{};const i=oo(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return ao(t)?{}:{obj:t,k:oo(r[s])}},co=(t,e,n)=>{const{obj:r,k:s}=bn(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=bn(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=bn(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},Td=(t,e,n,r)=>{const{obj:s,k:i}=bn(t,e,Object);s[i]=s[i]||[],s[i].push(n)},Sr=(t,e)=>{const{obj:n,k:r}=bn(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},kd=(t,e,n)=>{const r=Sr(t,n);return r!==void 0?r:Sr(e,n)},lc=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?V(t[r])||t[r]instanceof String||V(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):lc(t[r],e[r],n):t[r]=e[r]);return t},Ht=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Id={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Cd=t=>V(t)?t.replace(/[&<>"'\/]/g,e=>Id[e]):t;class Nd{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Rd=[" ",",","?","!",";"],Md=new Nd(20),Ad=(t,e,n)=>{e=e||"",n=n||"";const r=Rd.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=Md.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Ns=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let c=i;c<r.length;++c)if(c!==i&&(a+=n),a+=r[c],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}s=o}return s},kn=t=>t==null?void 0:t.replace("_","-"),Ld={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class br{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||Ld,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(V(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new br(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new br(this.logger,e)}}var ze=new br;class Br{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[e,...n])})}}class lo extends Br{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var l,f;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):V(r)&&i?a.push(...r.split(i)):a.push(r)));const c=Sr(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!V(r)?c:Ns((f=(l=this.data)==null?void 0:l[e])==null?void 0:f[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),co(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(V(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let c=Sr(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?lc(c,r,i):c={...c,...r},co(this.data,a,c),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var uc={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,n,r,s))??e}),e}};const dc=Symbol("i18next/PATH_KEY");function Od(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===dc?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Rs(t,e){const{[dc]:n}=t(Od());return n.join((e==null?void 0:e.keySeparator)??".")}const uo={},os=t=>!V(t)&&typeof t!="boolean"&&typeof t!="number";class xr extends Br{constructor(e,n={}){super(),vd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ze.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);if((s==null?void 0:s.res)===void 0)return!1;const i=os(s.res);return!(r.returnObjects===!1&&i)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Ad(e,r,s);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:V(i)?[i]:i};const l=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(l[0])>-1)&&(i=l.shift()),e=l.join(s)}return{key:e,namespaces:V(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Rs(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],s),l=c[c.length-1];let f=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const d=s.lng||this.language,p=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return p?i?{res:`${l}${f}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:`${l}${f}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:a;const h=this.resolve(e,s);let m=h==null?void 0:h.res;const y=(h==null?void 0:h.usedKey)||a,_=(h==null?void 0:h.exactUsedKey)||a,T=["[object Number]","[object Function]","[object RegExp]"],w=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,D=!this.i18nFormat||this.i18nFormat.handleAsObject,P=s.count!==void 0&&!V(s.count),M=xr.hasDefaultValue(s),A=P?this.pluralResolver.getSuffix(d,s.count,s):"",k=s.ordinal&&P?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",b=P&&!s.ordinal&&s.count===0,x=b&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${A}`]||s[`defaultValue${k}`]||s.defaultValue;let g=m;D&&!m&&M&&(g=x);const E=os(g),v=Object.prototype.toString.apply(g);if(D&&g&&E&&T.indexOf(v)<0&&!(V(w)&&Array.isArray(g))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,g,{...s,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=I,h.usedParams=this.getUsedParamsDetails(s),h):I}if(o){const I=Array.isArray(g),N=I?[]:{},U=I?_:y;for(const R in g)if(Object.prototype.hasOwnProperty.call(g,R)){const L=`${U}${o}${R}`;M&&!m?N[R]=this.translate(L,{...s,defaultValue:os(x)?x[R]:void 0,joinArrays:!1,ns:c}):N[R]=this.translate(L,{...s,joinArrays:!1,ns:c}),N[R]===L&&(N[R]=g[R])}m=N}}else if(D&&V(w)&&Array.isArray(m))m=m.join(w),m&&(m=this.extendTranslation(m,e,s,r));else{let I=!1,N=!1;!this.isValidLookup(m)&&M&&(I=!0,m=x),this.isValidLookup(m)||(N=!0,m=a);const R=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:m,L=M&&x!==m&&this.options.updateMissing;if(N||I||L){if(this.logger.log(L?"updateKey":"missingKey",d,l,a,L?x:m),o){const B=this.resolve(a,{...s,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const j=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&j&&j[0])for(let B=0;B<j.length;B++)O.push(j[B]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(s.lng||this.language):O.push(s.lng||this.language);const $=(B,G,ae)=>{var fe;const me=M&&ae!==m?ae:R;this.options.missingKeyHandler?this.options.missingKeyHandler(B,l,G,me,L,s):(fe=this.backendConnector)!=null&&fe.saveMissing&&this.backendConnector.saveMissing(B,l,G,me,L,s),this.emit("missingKey",B,l,G,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?O.forEach(B=>{const G=this.pluralResolver.getSuffixes(B,s);b&&s[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(ae=>{$([B],a+ae,s[`defaultValue${ae}`]||x)})}):$(O,a,x))}m=this.extendTranslation(m,e,s,h,r),N&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${l}${f}${a}`),(N||I)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${f}${a}`:a,I?m:void 0,s))}return i?(h.res=m,h.usedParams=this.getUsedParamsDetails(s),h):m}extendTranslation(e,n,r,s,i){var c,l;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=V(e)&&(((l=r==null?void 0:r.interpolation)==null?void 0:l.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(f){const h=e.match(this.interpolator.nestingRegexp);d=h&&h.length}let p=r.replace&&!V(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||s.usedLng,r),f){const h=e.match(this.interpolator.nestingRegexp),m=h&&h.length;d<m&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>(i==null?void 0:i[0])===h[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):this.translate(...h,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=V(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=uc.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,o,a;return V(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(c,n),f=l.key;s=f;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&!V(n.count),h=p&&!n.ordinal&&n.count===0,m=n.context!==void 0&&(V(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(_=>{var T,w;this.isValidLookup(r)||(a=_,!uo[`${y[0]}-${_}`]&&((T=this.utils)!=null&&T.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(a))&&(uo[`${y[0]}-${_}`]=!0,this.logger.warn(`key "${s}" for languages "${y.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(D=>{var A;if(this.isValidLookup(r))return;o=D;const P=[f];if((A=this.i18nFormat)!=null&&A.addLookupKeys)this.i18nFormat.addLookupKeys(P,f,D,_,n);else{let k;p&&(k=this.pluralResolver.getSuffix(D,n.count,n));const b=`${this.options.pluralSeparator}zero`,x=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(n.ordinal&&k.indexOf(x)===0&&P.push(f+k.replace(x,this.options.pluralSeparator)),P.push(f+k),h&&P.push(f+b)),m){const g=`${f}${this.options.contextSeparator||"_"}${n.context}`;P.push(g),p&&(n.ordinal&&k.indexOf(x)===0&&P.push(g+k.replace(x,this.options.pluralSeparator)),P.push(g+k),h&&P.push(g+b))}}let M;for(;M=P.pop();)this.isValidLookup(r)||(i=M,r=this.getResource(D,_,M,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!V(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class fo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ze.create("languageUtils")}getScriptPartFromCode(e){if(e=kn(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=kn(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(V(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),V(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return V(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):V(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const po={zero:0,one:1,two:2,few:3,many:4,other:5},ho={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Pd{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ze.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=kn(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ho;if(!e.match(/-|_/))return ho;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,n)}return this.pluralRulesCache[i]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>po[s]-po[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const mo=(t,e,n,r=".",s=!0)=>{let i=kd(t,e,n);return!i&&s&&V(n)&&(i=Ns(t,n,r),i===void 0&&(i=Ns(e,n,r))),i},as=t=>t.replace(/\$/g,"$$$$");class jd{constructor(e={}){var n;this.logger=ze.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:l,unescapeSuffix:f,unescapePrefix:d,nestingPrefix:p,nestingPrefixEscaped:h,nestingSuffix:m,nestingSuffixEscaped:y,nestingOptionsSeparator:_,maxReplaces:T,alwaysFormat:w}=e.interpolation;this.escape=n!==void 0?n:Cd,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Ht(i):o||"{{",this.suffix=a?Ht(a):c||"}}",this.formatSeparator=l||",",this.unescapePrefix=f?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=p?Ht(p):h||Ht("$t("),this.nestingSuffix=m?Ht(m):y||Ht(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=T||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var h;let i,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=m=>{if(m.indexOf(this.formatSeparator)<0){const w=mo(n,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...s,...n,interpolationkey:m}):w}const y=m.split(this.formatSeparator),_=y.shift().trim(),T=y.join(this.formatSeparator).trim();return this.format(mo(n,c,_,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:_})};this.resetRegExp();const f=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((h=s==null?void 0:s.interpolation)==null?void 0:h.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>as(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?as(this.escape(m)):as(m)}].forEach(m=>{for(a=0;i=m.regex.exec(e);){const y=i[1].trim();if(o=l(y),o===void 0)if(typeof f=="function"){const T=f(e,i,s);o=V(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,y))o="";else if(d){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),o="";else!V(o)&&!this.useRawValueToEscape&&(o=io(o));const _=m.safeValue(o);if(e=e.replace(i[0],_),d?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,o;const a=(c,l)=>{const f=this.nestingOptionsSeparator;if(c.indexOf(f)<0)return c;const d=c.split(new RegExp(`${f}[ ]*{`));let p=`{${d[1]}`;c=d[0],p=this.interpolate(p,o);const h=p.match(/'/g),m=p.match(/"/g);(((h==null?void 0:h.length)??0)%2===0&&!m||m.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),l&&(o={...l,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${f}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!V(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const l=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(l!==-1&&(c=s[1].slice(l).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),s[1]=s[1].slice(0,l)),i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!V(i))return i;V(i)||(i=io(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),c.length&&(i=c.reduce((f,d)=>this.format(f,d,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const Dd=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),l=c.join(":").trim().replace(/^'+|'+$/g,""),f=a.trim();n[f]||(n[f]=l),l==="false"&&(n[f]=!1),l==="true"&&(n[f]=!0),isNaN(l)||(n[f]=parseInt(l,10))}})}return{formatName:e,formatOptions:n}},go=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(kn(r),s),e[o]=a),a(n)}},Fd=t=>(e,n,r)=>t(kn(n),r)(e);class $d{constructor(e={}){this.logger=ze.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?go:Fd;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return a=>o.format(a)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>o.format(a)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return a=>o.format(a)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return a=>o.format(a,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=go(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,c)=>{var d;const{formatName:l,formatOptions:f}=Dd(c);if(this.formats[l]){let p=a;try{const h=((d=s==null?void 0:s.formatParams)==null?void 0:d[s.interpolationkey])||{},m=h.locale||h.lng||s.locale||s.lng||r;p=this.formats[l](a,m,{...f,...s,...h})}catch(h){this.logger.warn(h)}return p}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const Bd=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Ud extends Br{constructor(e,n,r,s={}){var i,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=ze.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},c={};return e.forEach(l=>{let f=!0;n.forEach(d=>{const p=`${l}|${d}`;!r.reload&&this.store.hasResourceBundle(l,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,f=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),c[d]===void 0&&(c[d]=!0)))}),f||(a[l]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{Td(c.loaded,[i],o),Bd(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(l=>{a[l]||(a[l]={});const f=c.loaded[l];f.length&&f.forEach(d=>{a[l][d]===void 0&&(a[l][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,s=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(l,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(l&&f&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(l,f)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const l=c(e,n);l&&typeof l.then=="function"?l.then(f=>a(null,f)).catch(a):a(null,l)}catch(l){a(l)}return}return c(e,n,a)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();V(e)&&(e=this.languageUtils.toResolveHierarchy(e)),V(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i,o={},a=()=>{}){var c,l,f,d,p;if((l=(c=this.services)==null?void 0:c.utils)!=null&&l.hasLoadedNamespace&&!((d=(f=this.services)==null?void 0:f.utils)!=null&&d.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((p=this.backend)!=null&&p.create){const h={...o,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(e,n,r,s,h):y=m(e,n,r,s),y&&typeof y.then=="function"?y.then(_=>a(null,_)).catch(a):a(null,y)}catch(y){a(y)}else m(e,n,r,s,a,h)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const yo=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),V(t[1])&&(e.defaultValue=t[1]),V(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),_o=t=>{var e,n;return V(t.ns)&&(t.ns=[t.ns]),V(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),V(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Jn=()=>{},Hd=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class In extends Br{constructor(e={},n){if(super(),this.options=_o(e),this.services={},this.logger=ze,this.modules={external:[]},Hd(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(V(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=yo();this.options={...r,...this.options,..._o(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?ze.init(s(this.modules.logger),this.options):ze.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:l=$d;const f=new fo(this.options);this.store=new lo(this.options.resources,this.options);const d=this.services;d.logger=ze,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Pd(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),l&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=s(l),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new jd(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Ud(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(h,...m)=>{this.emit(h,...m)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new xr(this.services,this.options),this.translator.on("*",(h,...m)=>{this.emit(h,...m)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Jn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=(...f)=>this.store[l](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=(...f)=>(this.store[l](...f),this)});const a=_n(),c=()=>{const l=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(f,d)};if(this.languages&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,n=Jn){var i,o;let r=n;const s=V(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],c=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>c(f)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,l=>c(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){const s=_n();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Jn),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&uc.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=_n();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,c)=>{c?this.isLanguageChangingTo===e&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...l)=>this.t(...l)),n&&n(a,(...l)=>this.t(...l))},o=a=>{var f,d;!e&&!a&&this.services.languageDetector&&(a=[]);const c=V(a)?a:a&&a[0],l=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(V(a)?[a]:a);l&&(this.language||s(l),this.translator.language||this.translator.changeLanguage(l),(d=(f=this.services.languageDetector)==null?void 0:f.cacheUserLanguage)==null||d.call(f,l)),this.loadResources(l,p=>{i(p,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const s=(i,o,...a)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([i,o].concat(a)):c={...o},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const l=this.options.keySeparator||".";let f;return c.keyPrefix&&Array.isArray(i)?f=i.map(d=>(typeof d=="function"&&(d=Rs(d,{...this.options,...o})),`${c.keyPrefix}${l}${d}`)):(typeof i=="function"&&(i=Rs(i,{...this.options,...o})),f=c.keyPrefix?`${c.keyPrefix}${l}${i}`:i),this.t(f,c)};return V(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const l=this.services.backendConnector.state[`${a}|${c}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=_n();return this.options.ns?(V(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=_n();V(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new fo(yo());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new In(e,n)}cloneInstance(e={},n=Jn){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new In(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const a=Object.keys(this.store.data).reduce((c,l)=>(c[l]={...this.store.data[l]},c[l]=Object.keys(c[l]).reduce((f,d)=>(f[d]={...c[l][d]},f),c[l]),c),{});i.store=new lo(a,s),i.services.resourceStore=i.store}return i.translator=new xr(i.services,s),i.translator.on("*",(a,...c)=>{i.emit(a,...c)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=In.createInstance();ye.createInstance=In.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;const zd=(t,e,n,r)=>{var i,o,a,c;const s=[n,{code:e,...r||{}}];if((o=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&o.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Ct(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&c.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},So={},Ms=(t,e,n,r)=>{Ct(n)&&So[n]||(Ct(n)&&(So[n]=new Date),zd(t,e,n,r))},fc=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},As=(t,e,n)=>{t.loadNamespaces(e,fc(t,n))},bo=(t,e,n,r)=>{if(Ct(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return As(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,fc(t,r))},Vd=(t,e,n={})=>!e.languages||!e.languages.length?(Ms(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),Ct=t=>typeof t=="string",Wd=t=>typeof t=="object"&&t!==null,qd=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Gd={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Kd=t=>Gd[t],Yd=t=>t.replace(qd,Kd);let Ls={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Yd};const Jd=(t={})=>{Ls={...Ls,...t}},Xd=()=>Ls;let pc;const Qd=t=>{pc=t},Zd=()=>pc,ef={type:"3rdParty",init(t){Jd(t.options.react),Qd(t)}},tf=S.createContext();class nf{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const rf=(t,e)=>{const n=S.useRef();return S.useEffect(()=>{n.current=t},[t,e]),n.current},hc=(t,e,n,r)=>t.getFixedT(e,n,r),sf=(t,e,n,r)=>S.useCallback(hc(t,e,n,r),[t,e,n,r]),of=(t,e={})=>{var P,M,A,k;const{i18n:n}=e,{i18n:r,defaultNS:s}=S.useContext(tf)||{},i=n||r||Zd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new nf),!i){Ms(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const b=(g,E)=>Ct(E)?E:Wd(E)&&Ct(E.defaultValue)?E.defaultValue:Array.isArray(g)?g[g.length-1]:g,x=[b,{},!1];return x.t=b,x.i18n={},x.ready=!1,x}(P=i.options.react)!=null&&P.wait&&Ms(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Xd(),...i.options.react,...e},{useSuspense:a,keyPrefix:c}=o;let l=s||((M=i.options)==null?void 0:M.defaultNS);l=Ct(l)?[l]:l||["translation"],(k=(A=i.reportNamespaces).addUsedNamespaces)==null||k.call(A,l);const f=(i.isInitialized||i.initializedStoreOnce)&&l.every(b=>Vd(b,i,o)),d=sf(i,e.lng||null,o.nsMode==="fallback"?l:l[0],c),p=()=>d,h=()=>hc(i,e.lng||null,o.nsMode==="fallback"?l:l[0],c),[m,y]=S.useState(p);let _=l.join();e.lng&&(_=`${e.lng}${_}`);const T=rf(_),w=S.useRef(!0);S.useEffect(()=>{const{bindI18n:b,bindI18nStore:x}=o;w.current=!0,!f&&!a&&(e.lng?bo(i,e.lng,l,()=>{w.current&&y(h)}):As(i,l,()=>{w.current&&y(h)})),f&&T&&T!==_&&w.current&&y(h);const g=()=>{w.current&&y(h)};return b&&(i==null||i.on(b,g)),x&&(i==null||i.store.on(x,g)),()=>{w.current=!1,i&&b&&(b==null||b.split(" ").forEach(E=>i.off(E,g))),x&&i&&x.split(" ").forEach(E=>i.store.off(E,g))}},[i,_]),S.useEffect(()=>{w.current&&f&&y(p)},[i,c,f]);const D=[m,i,f];if(D.t=m,D.i18n=i,D.ready=f,f||!f&&!a)return D;throw new Promise(b=>{e.lng?bo(i,e.lng,l,()=>b()):As(i,l,()=>b())})},af={title:"MemoryKeeper",tagline:"Strengthen Your Mind, One Memory at a Time"},cf={home:"Home",dashboard:"Dashboard",journal:"Journal",games:"Games",settings:"Settings",profile:"Profile"},lf={welcome:"Welcome to MemoryKeeper",dailyPrompt:"Daily Prompt",startJournaling:"Start Journaling",voiceInput:"Voice Input",recentMemories:"Recent Memories"},uf={title:"Memory Journal",placeholder:"What would you like to remember today?",save:"Save Memory",cancel:"Cancel"},df={startRecording:"Start Recording",stopRecording:"Stop Recording",processing:"Processing...",detectedLanguage:"Detected Language",transcriptionHistory:"Transcription History",history:{empty:"No transcription history yet. Start recording to build your history."},error:{browserNotSupported:"Voice input is not supported in your browser. Please try Chrome or Edge.",recognitionError:"Error with voice input. Please try again.",startRecordingError:"Error starting voice recording. Please try again."}},ff={strength:"Memory Strength",strengthLevel:"Level {{level}}",lastReviewed:"Last reviewed {{date}}"},pf={title:"Memory Games",memoryMatch:"Memory Match",storyQuest:"Story Quest",timelineTango:"Timeline Tango"},hf={title:"Settings",language:"Language",notifications:"Notifications",privacy:"Privacy",dataExport:"Data Export",darkMode:"Dark Mode"},mf={loading:"Loading...",error:"An error occurred",success:"Success!",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",view:"View",upload:"Upload",clear:"Clear"},gf={app:af,navigation:cf,home:lf,journal:uf,voice:df,memory:ff,games:pf,settings:hf,common:mf},yf={title:"MemoryKeeper",tagline:"Fortalece Tu Mente, Un Recuerdo a la Vez"},_f={home:"Inicio",dashboard:"Tablero",journal:"Diario",games:"Juegos",settings:"Configuración",profile:"Perfil"},Sf={welcome:"Bienvenido a MemoryKeeper",dailyPrompt:"Sugerencia Diaria",startJournaling:"Comenzar a Escribir",voiceInput:"Entrada de Voz",recentMemories:"Recuerdos Recientes"},bf={title:"Diario de Memorias",placeholder:"¿Qué te gustaría recordar hoy?",save:"Guardar Recuerdo",cancel:"Cancelar"},xf={startRecording:"Iniciar Grabación",stopRecording:"Detener Grabación",processing:"Procesando...",detectedLanguage:"Idioma Detectado",transcriptionHistory:"Historial de Transcripción",history:{empty:"Aún no hay historial de transcripción. Comience a grabar para construir su historial."},error:{browserNotSupported:"La entrada de voz no es compatible con su navegador. Por favor, intente con Chrome o Edge.",recognitionError:"Error con la entrada de voz. Por favor, inténtelo de nuevo.",startRecordingError:"Error al iniciar la grabación de voz. Por favor, inténtelo de nuevo."}},Ef={strength:"Fuerza de la Memoria",strengthLevel:"Nivel {{level}}",lastReviewed:"Revisado por última vez {{date}}"},vf={title:"Juegos de Memoria",memoryMatch:"Memoria Emparejada",storyQuest:"Búsqueda de Historias",timelineTango:"Tango de Línea de Tiempo"},wf={title:"Configuración",language:"Idioma",notifications:"Notificaciones",privacy:"Privacidad",dataExport:"Exportar Datos",darkMode:"Modo Oscuro"},Tf={loading:"Cargando...",error:"Ocurrió un error",success:"¡Éxito!",save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",close:"Cerrar",view:"Ver",upload:"Subir",clear:"Limpiar"},kf={app:yf,navigation:_f,home:Sf,journal:bf,voice:xf,memory:Ef,games:vf,settings:wf,common:Tf},If={title:"MemoryKeeper",tagline:"Renforcez Votre Esprit, Un Souvenir à la Fois"},Cf={home:"Accueil",dashboard:"Tableau de bord",journal:"Journal",games:"Jeux",settings:"Paramètres",profile:"Profil"},Nf={welcome:"Bienvenue sur MemoryKeeper",dailyPrompt:"Question Quotidienne",startJournaling:"Commencer à Écrire",voiceInput:"Entrée Vocale",recentMemories:"Souvenirs Récents"},Rf={title:"Journal de Mémoire",placeholder:"Que voudriez-vous vous rappeler aujourd'hui ?",save:"Sauvegarder le Souvenir",cancel:"Annuler"},Mf={startRecording:"Démarrer l'Enregistrement",stopRecording:"Arrêter l'Enregistrement",processing:"Traitement en Cours...",detectedLanguage:"Langue Détectée",transcriptionHistory:"Historique de Transcription",history:{empty:"Aucun historique de transcription pour le moment. Commencez à enregistrer pour créer votre historique."},error:{browserNotSupported:"L'entrée vocale n'est pas prise en charge dans votre navigateur. Veuillez essayer Chrome ou Edge.",recognitionError:"Erreur avec l'entrée vocale. Veuillez réessayer.",startRecordingError:"Erreur lors du démarrage de l'enregistrement vocal. Veuillez réessayer."}},Af={strength:"Force de la Mémoire",strengthLevel:"Niveau {{level}}",lastReviewed:"Dernière révision {{date}}"},Lf={title:"Jeux de Mémoire",memoryMatch:"Mémory",storyQuest:"Quête d'Histoires",timelineTango:"Tango Chronologique"},Of={title:"Paramètres",language:"Langue",notifications:"Notifications",privacy:"Confidentialité",dataExport:"Exporter les Données",darkMode:"Mode Sombre"},Pf={loading:"Chargement...",error:"Une erreur s'est produite",success:"Succès !",save:"Sauvegarder",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",close:"Fermer",view:"Voir",upload:"Télécharger",clear:"Effacer"},jf={app:If,navigation:Cf,home:Nf,journal:Rf,voice:Mf,memory:Af,games:Lf,settings:Of,common:Pf},Df={title:"MemoryKeeper",tagline:"Stärken Sie Ihren Geist, Eine Erinnerung nach der Anderen"},Ff={home:"Startseite",dashboard:"Dashboard",journal:"Tagebuch",games:"Spiele",settings:"Einstellungen",profile:"Profil"},$f={welcome:"Willkommen bei MemoryKeeper",dailyPrompt:"Tägliche Eingabeaufforderung",startJournaling:"Mit dem Schreiben beginnen",voiceInput:"Spracheingabe",recentMemories:"Aktuelle Erinnerungen"},Bf={title:"Gedächtnis-Tagebuch",placeholder:"Was möchten Sie sich heute merken?",save:"Erinnerung speichern",cancel:"Abbrechen"},Uf={startRecording:"Aufnahme starten",stopRecording:"Aufnahme stoppen",processing:"Verarbeitung...",detectedLanguage:"Erkannte Sprache",transcriptionHistory:"Transkriptionsverlauf",history:{empty:"Noch kein Transkriptionsverlauf. Beginnen Sie mit der Aufnahme, um Ihren Verlauf aufzubauen."},error:{browserNotSupported:"Die Spracheingabe wird in Ihrem Browser nicht unterstützt. Bitte versuchen Sie es mit Chrome oder Edge.",recognitionError:"Fehler bei der Spracheingabe. Bitte versuchen Sie es erneut.",startRecordingError:"Fehler beim Starten der Sprachaufnahme. Bitte versuchen Sie es erneut."}},Hf={strength:"Gedächtnisstärke",strengthLevel:"Stufe {{level}}",lastReviewed:"Zuletzt überprüft {{date}}"},zf={title:"Gedächtnisspiele",memoryMatch:"Memory-Match",storyQuest:"Geschichten-Quest",timelineTango:"Zeitleisten-Tango"},Vf={title:"Einstellungen",language:"Sprache",notifications:"Benachrichtigungen",privacy:"Datenschutz",dataExport:"Daten exportieren",darkMode:"Dunkelmodus"},Wf={loading:"Wird geladen...",error:"Ein Fehler ist aufgetreten",success:"Erfolg!",save:"Speichern",cancel:"Abbrechen",delete:"Löschen",edit:"Bearbeiten",close:"Schließen",view:"Ansehen",upload:"Hochladen",clear:"Löschen"},qf={app:Df,navigation:Ff,home:$f,journal:Bf,voice:Uf,memory:Hf,games:zf,settings:Vf,common:Wf};ye.use(ef).init({resources:{en:{translation:gf},es:{translation:kf},fr:{translation:jf},de:{translation:qf}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1});const mc=oc.createContext(null),Gf=({children:t})=>{const e=[{code:"en",name:"English"},{code:"es",name:"Español"},{code:"fr",name:"Français"},{code:"de",name:"Deutsch"}],n=()=>{const o=localStorage.getItem("language");if(o&&e.some(c=>c.code===o))return o;const a=navigator.language.split("-")[0];return e.some(c=>c.code===a)?a:"en"},[r,s]=S.useState(n());S.useEffect(()=>{ye.changeLanguage(r),localStorage.setItem("language",r)},[r]);const i=o=>{s(o)};return u.jsx(mc.Provider,{value:{language:r,setLanguage:i,availableLanguages:e},children:t})},x0=()=>{const t=S.useContext(mc);if(t===null)throw new Error("useLanguage must be used within a LanguageProvider");return t},lr="memorykeeper-theme",gc=S.createContext(void 0),Kf=()=>{if(typeof window>"u")return"light";const t=window.localStorage.getItem(lr);if(t==="light"||t==="dark")return t;const e=typeof window.matchMedia=="function"?window.matchMedia("(prefers-color-scheme: dark)"):null;return e!=null&&e.matches?"dark":"light"},Yf=({children:t})=>{const[e,n]=S.useState(Kf);S.useEffect(()=>{if(typeof document>"u")return;const o=document.documentElement;o.classList.toggle("dark",e==="dark"),o.style.setProperty("color-scheme",e);try{window.localStorage.setItem(lr,e)}catch{}},[e]),S.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const o=window.matchMedia("(prefers-color-scheme: dark)"),a=c=>{const l=window.localStorage.getItem(lr);l==="light"||l==="dark"||n(c.matches?"dark":"light")};return typeof o.addEventListener=="function"?(o.addEventListener("change",a),()=>o.removeEventListener("change",a)):(o.addListener(a),()=>o.removeListener(a))},[]),S.useEffect(()=>{if(typeof window>"u")return;const o=a=>{a.key===lr&&(a.newValue==="light"||a.newValue==="dark")&&n(a.newValue)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[]);const r=o=>{n(o?"dark":"light")},s=()=>{n(o=>o==="dark"?"light":"dark")},i=S.useMemo(()=>({theme:e,isDarkMode:e==="dark",setDarkMode:r,toggleDarkMode:s}),[e]);return u.jsx(gc.Provider,{value:i,children:t})},E0=()=>{const t=S.useContext(gc);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Jf=({visible:t,isIOS:e,onInstall:n,onDismiss:r})=>{if(!t)return null;const o=e?["Tap the Share icon in Safari","Scroll and choose “Add to Home Screen”","Confirm the MemoryKeeper icon"]:["Tap “Install app” when prompted","Confirm from the Chrome banner","Launch MemoryKeeper from your home screen"];return u.jsx("section",{"aria-live":"polite",className:"fixed inset-x-0 bottom-6 z-40 px-4 sm:px-6",children:u.jsx("div",{className:"mx-auto max-w-xl rounded-2xl border border-orange-200 bg-white/95 p-4 shadow-2xl shadow-orange-200/40 backdrop-blur-md dark:border-orange-500/30 dark:bg-[#1b1208]/95",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"rounded-full bg-orange-100 p-2 text-orange-700 dark:bg-orange-500/20 dark:text-orange-300",children:u.jsx("span",{"aria-hidden":!0,children:"⬆️"})}),u.jsxs("div",{className:"flex-1 space-y-2 text-left",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-50",children:"Install MemoryKeeper for offline journaling"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e?"Follow these steps to pin MemoryKeeper to your Home Screen on iOS.":"Install the PWA for quicker launches, offline capture, and gentle reminders."}),u.jsx("ol",{className:"list-inside list-decimal text-sm text-gray-700 dark:text-gray-200",children:o.map(a=>u.jsx("li",{className:"py-0.5",children:a},a))}),!e&&u.jsx("button",{type:"button",className:"w-full rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 py-2 text-sm font-semibold text-white shadow-md transition hover:brightness-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300",onClick:n,children:"Install MemoryKeeper"}),u.jsx("button",{type:"button",className:"text-xs font-medium text-gray-500 underline decoration-dotted underline-offset-2 hover:text-gray-700 dark:text-gray-300",onClick:r,children:"Not now"})]})]})})})},yc="memorykeeper_a2hs_dismissed",Xf=()=>typeof window>"u"?!1:window.localStorage.getItem(yc)==="1",Qf=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(!1),[s,i]=S.useState(Xf),o=S.useMemo(()=>{var d;return typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||((d=window.navigator)==null?void 0:d.standalone)},[]),a=S.useMemo(()=>typeof window>"u"?!1:/iphone|ipad|ipod/i.test(window.navigator.userAgent),[]);S.useEffect(()=>{const d=p=>{p.preventDefault(),!(s||o)&&(e(p),r(!0))};return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[s,o]),S.useEffect(()=>{const d=()=>{r(!1),e(null)};return window.addEventListener("appinstalled",d),()=>window.removeEventListener("appinstalled",d)},[]);const c=S.useCallback(async()=>{t&&(r(!0),await t.prompt(),await t.userChoice,e(null),r(!1))},[t]),l=S.useCallback(()=>{r(!1),i(!0),typeof window<"u"&&window.localStorage.setItem(yc,"1")},[]);return{showPrompt:!s&&!o&&(n||a),isIOS:a,promptInstall:c,dismissPrompt:l}},vt=(...t)=>t.filter(Boolean).join(" "),wt={shell:"mk-shell font-display text-ink dark:text-ink",shellInner:"mk-shell__inner",card:"mk-card",cardMuted:"mk-card-muted",sectionHeader:"mk-section__header",sectionTitle:"mk-section__title",chip:"mk-chip",primaryButton:"mk-button-primary",secondaryButton:"mk-button-secondary",ghostButton:"mk-button-ghost",iconButton:"mk-icon-button"},xo={sunrise:"bg-gradient-to-br from-primary to-primary-strong"},Zf="text-ink-muted",ep=()=>{const t=ht(),{t:e}=of(),{user:n}=ot(),{showPrompt:r,isIOS:s,promptInstall:i,dismissPrompt:o}=Qf();S.useEffect(()=>{const l=setTimeout(()=>{t(n?"/memory-keeper-main":"/auth")},3e3);return()=>clearTimeout(l)},[t,n]);const a=S.useCallback(()=>{console.log("Primary action clicked"),t(n?"/memory-keeper-main":"/auth")},[t,n]),c=S.useCallback(()=>{console.log("Secondary action clicked"),t("/supabase-test")},[t]);return u.jsxs("div",{className:vt(wt.shell,xo.sunrise,"relative flex h-screen flex-col justify-between overflow-hidden"),children:[u.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center space-y-6 px-gutter text-center",children:[u.jsxs("div",{className:"relative inline-flex h-24 w-24 items-center justify-center rounded-2xl bg-white/30 text-primary shadow-soft backdrop-blur-soft",children:[u.jsx("svg",{className:"h-16 w-16 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:u.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),u.jsx("div",{className:"absolute inset-0 animate-shimmer rounded-2xl opacity-40"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h1",{className:"text-display-1 font-extrabold text-white drop-shadow-lg",children:"MemoryKeeper"}),u.jsx("p",{className:"text-lg font-medium text-white/80",children:e("splash.tagline","Warm Nostalgia Begins Here!")})]})]}),u.jsxs("div",{className:"safe-px space-y-4 pb-10",children:[u.jsx("button",{tabIndex:0,role:"button",className:vt(wt.primaryButton,xo.sunrise,"h-14 w-full text-lg text-white shadow-ring"),onClick:a,onKeyPress:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),a())},children:n?"Continue to MemoryKeeper":"Get Started"}),u.jsx("button",{tabIndex:0,role:"button",className:vt(wt.ghostButton,"w-full justify-center border border-white/40 text-white"),onClick:c,onKeyPress:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),c())},children:n?"Switch accounts":"Already have an account? Sign In"})]}),u.jsx("div",{className:"pointer-events-none absolute inset-0 z-0",children:[...Array(15)].map((l,f)=>u.jsx("div",{className:"absolute h-2 w-2 rounded-full bg-white/25",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animation:`float 12s infinite ${f*.4}s`,transform:"translateY(0)"}},f))}),u.jsx(Jf,{visible:r,isIOS:s,onInstall:i,onDismiss:o})]})},Eo=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),{signIn:o,signUp:a,authError:c,clearAuthError:l}=ot(),f=ht(),d=async p=>{p.preventDefault(),console.log("handleAuth called"),l();try{s?(console.log("Signing up with:",t,n),await a(t,n)):(console.log("Signing in with:",t,n),await o(t,n)),console.log("Navigation to /memory-keeper-main"),f("/memory-keeper-main")}catch(h){console.error("Authentication error:",h)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s?"Create Account":"Welcome Back"}),u.jsx("p",{className:"text-gray-600",children:s?"Sign up to start preserving your memories":"Sign in to your MemoryKeeper account"})]}),c&&u.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:c}),u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",value:t,onChange:p=>e(p.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",id:"password",value:n,onChange:p=>r(p.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0,minLength:6})]}),u.jsx("button",{type:"submit",tabIndex:0,role:"button",className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50",onClick:p=>{p.preventDefault(),console.log("Submit button clicked"),d(p)},onKeyPress:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),console.log("Submit button key pressed:",p.key),d(p))},children:s?"Create Account":"Sign In"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{tabIndex:0,role:"button",onClick:()=>{console.log("Toggle sign up clicked"),i(!s),l()},className:"text-orange-600 hover:text-orange-700 font-medium focus:outline-none focus:ring-1 focus:ring-orange-500 focus:ring-opacity-50",onKeyPress:p=>{(p.key==="Enter"||p.key===" ")&&(console.log("Toggle sign up key pressed:",p.key),i(!s),l())},children:s?"Already have an account? Sign In":"Don't have an account? Sign Up"})}),u.jsxs("div",{className:"mt-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),u.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[u.jsx("button",{tabIndex:0,role:"button",onClick:()=>{console.log("Navigate to supabase-signup"),f("/supabase-signup")},className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:ring-opacity-50",onKeyPress:p=>{(p.key==="Enter"||p.key===" ")&&(console.log("Supabase signup key pressed:",p.key),f("/supabase-signup"))},children:"Sign up"}),u.jsx("button",{tabIndex:0,role:"button",onClick:()=>{console.log("Navigate to supabase-test"),f("/supabase-test")},className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-orange-500 focus:ring-opacity-50",onKeyPress:p=>{(p.key==="Enter"||p.key===" ")&&(console.log("Supabase test key pressed:",p.key),f("/supabase-test"))},children:"Sign in"})]})]})]})})},tp=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),{signIn:o,signInWithGoogle:a,authError:c,clearAuthError:l}=ot(),f=ht(),d=async h=>{h.preventDefault(),l();try{await o(t,n),f("/memory-keeper-main")}catch(m){console.error("Sign in error:",m)}},p=async()=>{i(!0),l();try{await a()}catch(h){console.error("Google sign in error:",h),i(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Sign In"}),u.jsx("p",{className:"text-gray-600",children:"Access your MemoryKeeper account"})]}),c&&u.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:c}),u.jsx("div",{className:"space-y-3",children:u.jsxs("button",{type:"button",onClick:p,disabled:s,className:"w-full flex justify-center items-center py-3 px-4 border border-gray-300 rounded-2xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.56c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23.04c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23.04 12 23.04z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.51 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in with Google...":"Continue with Google"]})}),u.jsx("div",{className:"mt-6",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or sign in with email"})})]})}),u.jsxs("form",{onSubmit:d,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0})]}),u.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Sign In"})]}),u.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",u.jsx("button",{onClick:()=>f("/supabase-signup"),className:"text-orange-600 hover:text-orange-700 font-medium",children:"Sign Up"})]}),u.jsx("div",{className:"mt-4 text-center",children:u.jsx("button",{onClick:()=>f("/"),className:"text-gray-600 hover:text-gray-800 text-sm",children:"Back to Home"})})]})})},np=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(""),[o,a]=S.useState(!1),[c,l]=S.useState(!1),[f,d]=S.useState(""),{signUp:p,signInWithGoogle:h,authError:m,clearAuthError:y}=ot(),_=ht(),T=cc(),{addToast:w}=an(),D=async M=>{M.preventDefault(),a(!0),y(),d("");try{await p(t,n,s),d("Account created successfully! Please check your email for confirmation."),w({type:"success",title:"Account Created!",message:"Welcome to MemoryKeeper. Please check your email to confirm your account."});const A=T.state&&typeof T.state=="object"?T.state:{};_("/supabase-test",{state:{...A,email:t}})}catch(A){console.error("Error signing up:",A),w({type:"error",title:"Sign Up Failed",message:m||"Unable to create your account. Please try again.",duration:5e3})}finally{a(!1)}},P=async()=>{l(!0),y();try{await h()}catch(M){console.error("Error signing up with Google:",M),w({type:"error",title:"Google Sign Up Failed",message:"Unable to sign up with Google. Please try again.",duration:5e3})}finally{l(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Account"}),u.jsx("p",{className:"text-gray-600",children:"Sign up to start preserving your memories"})]}),f&&u.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:f}),m&&u.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:m}),u.jsx("div",{className:"space-y-3",children:u.jsxs("button",{type:"button",onClick:P,disabled:c,className:"w-full flex justify-center items-center py-3 px-4 border border-gray-300 rounded-2xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.56c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23.04c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23.04 12 23.04z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.51 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c?"Signing up with Google...":"Continue with Google"]})}),u.jsx("div",{className:"mt-6",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or sign up with email"})})]})}),u.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),u.jsx("input",{type:"text",id:"fullName",value:s,onChange:M=>i(M.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",value:t,onChange:M=>e(M.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",id:"password",value:n,onChange:M=>r(M.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0,minLength:6})]}),u.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o?"Creating Account...":"Create Account"})]}),u.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",u.jsx("a",{href:"/supabase-test",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Sign In"})]})]})})},rp=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(!1),{resetPassword:s,loading:i}=ot(),o=ht(),{addToast:a}=an(),c=async f=>{f.preventDefault();try{await s(t),r(!0),a({type:"success",title:"Password Reset Sent",message:"If an account with this email exists, you will receive a password reset link.",duration:6e3})}catch{a({type:"error",title:"Reset Failed",message:"Please check your email address and try again.",duration:5e3})}},l=async()=>{try{await s(t),a({type:"info",title:"Reset Link Resent",message:"Password reset link has been sent again.",duration:4e3})}catch{}};return n?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Check Your Email"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",u.jsx("strong",{children:t})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("button",{onClick:l,disabled:i,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 transition-all",children:i?"Sending...":"Resend Reset Link"}),u.jsx("button",{onClick:()=>o("/auth"),className:"w-full py-3 px-4 bg-gray-200 text-gray-700 rounded-2xl font-semibold hover:bg-gray-300 transition-all",children:"Back to Sign In"})]})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reset Password"}),u.jsx("p",{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),u.jsxs("form",{onSubmit:c,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",value:t,onChange:f=>e(f.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0,placeholder:"Enter your email"})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 transition-all",children:i?"Sending Reset Link...":"Send Reset Link"})]}),u.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Remember your password?"," ",u.jsx("a",{href:"/auth",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign In"})]})]})})},sp=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),{updatePassword:o,loading:a}=ot(),c=ht(),{addToast:l}=an(),f=async d=>{if(d.preventDefault(),t!==n){l({type:"error",title:"Passwords Don't Match",message:"Please make sure both password fields match.",duration:4e3});return}try{await o(t),i(!0),l({type:"success",title:"Password Updated!",message:"Your password has been successfully updated.",duration:4e3}),setTimeout(()=>{c("/memory-keeper-main")},2e3)}catch{l({type:"error",title:"Update Failed",message:"Please try again or contact support if the problem persists.",duration:5e3})}};return s?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Password Updated!"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully updated. You're being redirected to the main application."}),u.jsx("button",{onClick:()=>c("/memory-keeper-main"),className:"w-full py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",children:"Continue to MemoryKeeper"})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Update Password"}),u.jsx("p",{className:"text-gray-600",children:"Enter your new password below."})]}),u.jsxs("form",{onSubmit:f,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),u.jsx("input",{type:"password",id:"newPassword",value:t,onChange:d=>e(d.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0,minLength:6,placeholder:"Enter new password"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),u.jsx("input",{type:"password",id:"confirmPassword",value:n,onChange:d=>r(d.target.value),className:"w-full p-3 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none transition-all",required:!0,minLength:6,placeholder:"Confirm new password"})]}),u.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 transition-all",children:a?"Updating Password...":"Update Password"})]}),u.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:u.jsx("button",{onClick:()=>c("/auth"),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Back to Sign In"})})]})})},ci=()=>!!(window.SpeechRecognition||window.webkitSpeechRecognition),Ur=()=>!!window.speechSynthesis,ip=(t,e,n,r={})=>{if(!ci())throw new Error("Speech recognition is not supported in this browser");const s=window.SpeechRecognition||window.webkitSpeechRecognition,i=new s;return i.lang=r.lang||"en-US",i.continuous=r.continuous||!1,i.interimResults=r.interimResults||!1,i.onresult=o=>{const a=o.results[o.resultIndex];a&&a[0]&&t({transcript:a[0].transcript,confidence:a[0].confidence})},i.onerror=o=>{e&&e(o)},i.onend=()=>{n&&n()},i.start(),()=>{i.stop()}},op=(t,e={})=>{if(!Ur())return console.warn("Speech synthesis is not supported in this browser"),!1;const n=new SpeechSynthesisUtterance(t);return n.lang=e.lang||"en-US",n.volume=e.volume!==void 0?e.volume:1,n.rate=e.rate!==void 0?e.rate:1,n.pitch=e.pitch!==void 0?e.pitch:1,e.onEnd&&(n.onend=()=>e.onEnd&&e.onEnd()),e.onError&&(n.onerror=r=>e.onError&&e.onError(r)),window.speechSynthesis.speak(n),!0},_c=()=>new Promise(t=>{if(!Ur()){t([]);return}let e=window.speechSynthesis.getVoices();if(e.length>0){t(e);return}window.speechSynthesis.onvoiceschanged=()=>{e=window.speechSynthesis.getVoices(),t(e)},setTimeout(()=>{e=window.speechSynthesis.getVoices(),t(e)},1e3)}),ap=async(t,e,n={})=>{if(!Ur())return console.warn("Speech synthesis is not supported in this browser"),!1;const s=(await _c()).find(o=>o.name===e),i=new SpeechSynthesisUtterance(t);return i.voice=s||null,i.volume=n.volume!==void 0?n.volume:1,i.rate=n.rate!==void 0?n.rate:1,i.pitch=n.pitch!==void 0?n.pitch:1,n.onEnd&&(i.onend=()=>n.onEnd&&n.onEnd()),n.onError&&(i.onerror=o=>n.onError&&n.onError(o)),window.speechSynthesis.speak(i),!0};class cp{constructor(){at(this,"transcriptionHistory",[]);at(this,"isRecording",!1);at(this,"startTime",null);at(this,"stopFunction",null);at(this,"audioChunks",[]);at(this,"mediaRecorder",null)}async startEnhancedSpeechRecognition(e,n,r,s={}){if(!ci())throw new Error("Speech recognition is not supported in this browser");if(s.useWhisper)return this.startWhisperSpeechRecognition(e,n,r,s);const i={lang:s.lang||"en-US",continuous:s.continuous!==void 0?s.continuous:!0,interimResults:s.interimResults!==void 0?s.interimResults:!0,maxAlternatives:s.maxAlternatives||1};return this.startTime=new Date,this.isRecording=!0,this.stopFunction=ip(o=>{const a=this.applyEnhancements(o.transcript,s);e({transcript:a,confidence:o.confidence,isFinal:!0,timestamp:new Date}),this.addToTranscriptionHistory(a,o.confidence)},o=>{this.isRecording=!1,n&&n(o)},()=>{this.isRecording=!1,r&&r()},i),()=>{this.stopEnhancedSpeechRecognition()}}stopEnhancedSpeechRecognition(){this.stopFunction&&(this.stopFunction(),this.stopFunction=null),this.mediaRecorder&&this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop(),this.isRecording=!1}async startWhisperSpeechRecognition(e,n,r,s={}){try{const i=await navigator.mediaDevices.getUserMedia({audio:!0});return this.mediaRecorder=new MediaRecorder(i),this.audioChunks=[],this.mediaRecorder.ondataavailable=o=>{o.data.size>0&&this.audioChunks.push(o.data)},this.mediaRecorder.onstop=async()=>{try{const o=new Blob(this.audioChunks,{type:"audio/wav"}),c=(await to(o,{language:s.lang||"en"})).text,l=this.applyEnhancements(c,s);e({transcript:l,confidence:.95,isFinal:!0,timestamp:new Date}),this.addToTranscriptionHistory(l,.95),i.getTracks().forEach(f=>f.stop()),r&&r()}catch(o){console.error("Whisper transcription error:",o),n&&n(o)}},this.startTime=new Date,this.isRecording=!0,this.mediaRecorder.start(),()=>{this.stopEnhancedSpeechRecognition()}}catch(i){throw console.error("Error starting Whisper recording:",i),n&&n(i),i}}applyEnhancements(e,n){let r=e;return n.punctuationCorrection&&(r=this.correctPunctuation(r)),n.keywordSpotting&&n.keywordSpotting.length>0&&(r=this.highlightKeywords(r,n.keywordSpotting)),r}correctPunctuation(e){return e.replace(/([^.!?])\s*$/,"$1.")}highlightKeywords(e,n){let r=e;return n.forEach(s=>{const i=new RegExp(`(${s})`,"gi");r=r.replace(i,"**$1**")}),r}addToTranscriptionHistory(e,n){if(!this.startTime)return;const r=new Date,s=(r.getTime()-this.startTime.getTime())/1e3,i={id:`transcript_${Date.now()}`,text:e,timestamp:r,duration:s,confidence:n};this.transcriptionHistory.push(i),this.transcriptionHistory.length>50&&this.transcriptionHistory.shift()}getTranscriptionHistory(){return[...this.transcriptionHistory]}clearTranscriptionHistory(){this.transcriptionHistory=[]}isCurrentlyRecording(){return this.isRecording}getRecordingDuration(){return!this.startTime||!this.isRecording?0:(new Date().getTime()-this.startTime.getTime())/1e3}async transcribeAudioFile(e,n="en"){try{return(await to(e,{language:n})).text}catch(r){throw console.error("Error transcribing audio file:",r),r}}async enhancedSpeakText(e,n={}){return Ur()?n.voiceName?await ap(e,n.voiceName,{volume:n.volume,rate:n.rate,pitch:n.pitch,onEnd:n.onEnd,onError:n.onError}):op(e,{lang:n.lang,volume:n.volume,rate:n.rate,pitch:n.pitch,onEnd:n.onEnd,onError:n.onError}):(console.warn("Speech synthesis is not supported in this browser"),!1)}async getEnhancedVoices(){return(await _c()).map(n=>({name:n.name,lang:n.lang,isDefault:n.default,isLocal:!n.voiceURI.includes("remote"),gender:n.name.toLowerCase().includes("female")||n.name.toLowerCase().includes("woman")?"female":n.name.toLowerCase().includes("male")||n.name.toLowerCase().includes("man")?"male":void 0}))}detectLanguage(e){const n=e.toLowerCase().split(/\s+/),r={"en-US":0,"es-ES":0,"fr-FR":0,"de-DE":0},s={"en-US":["the","and","or","but","in","on","at","to","for","of"],"es-ES":["el","la","y","o","pero","en","a","para","de"],"fr-FR":["le","la","et","ou","mais","dans","à","pour","de"],"de-DE":["der","die","und","oder","aber","in","zu","für","von"]};n.forEach(a=>{Object.keys(s).forEach(c=>{s[c].includes(a)&&r[c]++})});let i="en-US",o=0;return Object.entries(r).forEach(([a,c])=>{c>o&&(o=c,i=a)}),i}formatTranscript(e){let n=e.charAt(0).toUpperCase()+e.slice(1);return n=n.replace(/([.!?])\s*/g,"$1 "),n=n.trim(),n}}const Xn=new cp,Tt=t=>typeof t!="string"?"":t.trim().replace(/<[^>]*>/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/data:\s*text\/html/gi,"").substring(0,1e4),lp=t=>Tt(t).replace(/system\s+prompt/gi,"").replace(/ignore\s+previous\s+instructions/gi,"").trim(),vo=t=>({prompt:lp(t.prompt||""),response:Tt(t.response||""),type:["text","audio","visual"].includes(t.type||"")?t.type:"text",tags:(t.tags||[]).filter(e=>typeof e=="string"&&e.length>0&&e.length<=50).map(e=>Tt(e)).slice(0,10)}),up=t=>t.replace(/[^a-zA-Z0-9_.-]/g,"_").replace(/_{2,}/g,"_").substring(0,255);class dp{constructor(){at(this,"attempts",new Map)}isAllowed(e,n=5,r=6e4){const s=Date.now(),o=(this.attempts.get(e)||[]).filter(a=>s-a<r);return o.length>=n?!1:(o.push(s),this.attempts.set(e,o),!0)}getRemainingAttempts(e,n=5,r=6e4){const s=Date.now(),o=(this.attempts.get(e)||[]).filter(a=>s-a<r);return Math.max(0,n-o.length)}}const fp=new dp,v0=(t,e=5,n=6e4)=>!fp.isAllowed(t,e,n),pp=({onFileProcessed:t,acceptedTypes:e=["image/*",".pdf",".txt"],maxFileSize:n=10,multiple:r=!1})=>{const{user:s}=ot(),{addToast:i}=an(),[o,a]=S.useState(!1),[c,l]=S.useState(!1),[f,d]=S.useState([]),p=S.useRef(null),h=n*1024*1024,m=b=>b.size>h?`File size exceeds ${n}MB limit`:e.some(g=>{if(g.startsWith("."))return b.name.toLowerCase().endsWith(g.toLowerCase());if(g.includes("*")){const E=g.split("/")[0];return b.type.startsWith(E)}return b.type===g})?null:`File type not supported. Accepted types: ${e.join(", ")}`,y=async b=>{const x=m(b);if(x)return i({type:"error",title:"Invalid File",message:x,duration:4e3}),null;const g=b.type.startsWith("image/")?"image":b.type.startsWith("video/")?"video":"document",E={file:b,type:g,metadata:{name:up(b.name),size:b.size,lastModified:b.lastModified,type:b.type}};if(E.type==="image")try{const v=await _(b);E.preview=v}catch(v){console.error("Error creating image preview:",v)}if(E.type==="video")try{const v=await _(b);E.preview=v}catch(v){console.error("Error creating video preview:",v)}if(b.type==="text/plain"||b.name.toLowerCase().endsWith(".txt"))try{const v=await T(b);E.textContent=v}catch(v){console.error("Error reading text file:",v)}return E},_=b=>new Promise((x,g)=>{const E=new FileReader;E.onload=v=>{var N;const I=(N=v.target)==null?void 0:N.result;I?x(I):g(new Error("Failed to create image preview"))},E.onerror=()=>g(new Error("Failed to read image file")),E.readAsDataURL(b)}),T=b=>new Promise((x,g)=>{const E=new FileReader;E.onload=v=>{var N;const I=(N=v.target)==null?void 0:N.result;I?x(I):g(new Error("Failed to read text file"))},E.onerror=()=>g(new Error("Failed to read text file")),E.readAsText(b)}),w=S.useCallback(async b=>{if(!(s!=null&&s.id)){i({type:"error",title:"Authentication Required",message:"Please sign in to upload files.",duration:4e3});return}const x=Array.from(b);l(!0);const g=[];for(const E of x)try{const v=await y(E);v&&g.push(v)}catch(v){console.error("Error processing file:",v),i({type:"error",title:"Processing Error",message:`Failed to process ${E.name}`,duration:4e3})}l(!1),g.length>0&&(d(r?E=>[...E,...g]:[g[0]]),g.forEach(E=>{t(E)}),i({type:"success",title:"Files Processed",message:`Successfully processed ${g.length} file(s).`,duration:3e3}))},[s==null?void 0:s.id,r,t,i]),D=S.useCallback(b=>{b.preventDefault(),a(!1);const x=b.dataTransfer.files;x.length>0&&w(x)},[w]),P=S.useCallback(b=>{b.preventDefault(),a(!0)},[]),M=S.useCallback(b=>{b.preventDefault(),a(!1)},[]),A=S.useCallback(b=>{const x=b.target.files;x&&x.length>0&&w(x)},[w]),k=b=>{d(x=>x.filter((g,E)=>E!==b))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all ${o?"border-orange-400 bg-orange-50":"border-gray-300 bg-white/80 backdrop-blur-xl"}`,onDrop:D,onDragOver:P,onDragLeave:M,children:[u.jsx("input",{type:"file",ref:p,className:"hidden",accept:e.join(","),multiple:r,onChange:A}),u.jsx(Zu,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Drag & drop files here"}),u.jsxs("p",{className:"text-gray-500 mb-4",children:["or"," ",u.jsx("button",{type:"button",className:"text-orange-600 hover:text-orange-700 font-medium",onClick:()=>{var b;return(b=p.current)==null?void 0:b.click()},children:"browse files"})]}),u.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted types: ",e.join(", ")," | Max size: ",n,"MB"]})]}),c&&u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 flex items-center gap-3",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"text-blue-700",children:"Processing files..."})]}),f.length>0&&u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-4 border border-orange-100",children:[u.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Uploaded Files"}),u.jsx("div",{className:"space-y-3",children:f.map((b,x)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-xl",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-white",children:b.type==="image"?u.jsx(ed,{className:"w-5 h-5 text-orange-600"}):u.jsx(td,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-800 truncate",children:b.metadata.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[(b.metadata.size/1024/1024).toFixed(2)," MB"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[b.preview&&u.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700",children:u.jsx(nd,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>k(x),className:"p-2 text-gray-500 hover:text-red-500",children:u.jsx(ac,{className:"w-4 h-4"})})]})]},x))})]})]})};S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.M),__vite__mapDeps([0,1])));const hp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.z),__vite__mapDeps([0,1]))),mp=S.lazy(()=>Y(()=>import("./ai-studio-D1VHpCnl.js").then(t=>t.aF),[])),gp=S.lazy(()=>Y(()=>import("./CollaborativeMemory-wWapY4fK.js"),__vite__mapDeps([2,1,0,3]))),yp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.E),__vite__mapDeps([0,1]))),_p=S.lazy(()=>Y(()=>import("./GameSelection-DNehH-Uf.js"),__vite__mapDeps([4,1,0])));S.lazy(()=>Y(()=>import("./HomeDashboard-B0NKGx_Z.js"),__vite__mapDeps([5,1,0])));const Sp=S.lazy(()=>Y(()=>import("./InviteCollaborate-CVCL4oyi.js"),__vite__mapDeps([6,1,0,3]))),bp=S.lazy(()=>Y(()=>import("./LegacyLink-BITB8_KX.js"),__vite__mapDeps([7,1,0]))),xp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.C),__vite__mapDeps([0,1]))),Ep=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.D),__vite__mapDeps([0,1]))),vp=S.lazy(()=>Y(()=>import("./MemoryStrengthFlower-C0Mp4FnN.js"),__vite__mapDeps([8,1]))),wp=S.lazy(()=>Y(()=>import("./KnowledgeGraphView-B-tA1X-3.js"),__vite__mapDeps([9,1]))),Tp=S.lazy(()=>Y(()=>import("./PremiumFeaturesDetails-Y17pEb3A.js"),__vite__mapDeps([10,1]))),kp=S.lazy(()=>Y(()=>import("./ProactiveMemoryPrompt-BnZr2j-8.js"),__vite__mapDeps([11,1,0]))),Ip=S.lazy(()=>Y(()=>import("./ProfileSetup-76vflrbB.js"),__vite__mapDeps([12,1,0]))),Cp=S.lazy(()=>Y(()=>import("./QuickTutorial-TLGdWSk-.js"),__vite__mapDeps([13,1]))),wo=S.lazy(()=>Y(()=>import("./ScrapbookTimeline-BKaEGhYV.js"),__vite__mapDeps([14,0,1]))),Np=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.S),__vite__mapDeps([0,1]))),Rp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.F),__vite__mapDeps([0,1]))),Mp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.G),__vite__mapDeps([0,1]))),Ap=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.H),__vite__mapDeps([0,1]))),Lp=S.lazy(()=>Y(()=>import("./game-components-DlDolkYV.js").then(t=>t.T),__vite__mapDeps([0,1]))),Op=S.lazy(()=>Y(()=>import("./ViewProgressAndSettings-BF8ckTGe.js"),__vite__mapDeps([15,1,0]))),Pp=S.lazy(()=>Y(()=>import("./VisualContentGenerator-B5ceHzam.js"),__vite__mapDeps([16,1]))),jp=S.lazy(()=>Y(()=>import("./UserProfileManager-LwE7TgIX.js"),__vite__mapDeps([17,1,0]))),Dp=S.lazy(()=>Y(()=>import("./SyncStatusIndicator-CTV-JR_R.js"),__vite__mapDeps([18,1,0]))),Fp=S.lazy(()=>Y(()=>import("./DataExportImport-2xe7LyWL.js"),__vite__mapDeps([19,1,0]))),$p=S.lazy(()=>Y(()=>import("./MemoryImport-LAgzw7O-.js"),__vite__mapDeps([20,1,0]))),Bp=S.lazy(()=>Y(()=>import("./MemoryStrengthBreakdown-vdyNqMpM.js"),__vite__mapDeps([21,1,0]))),Up=S.lazy(()=>Y(()=>import("./CollaborativeCollections-BZwUfIOE.js"),__vite__mapDeps([22,1,0,3])));S.lazy(()=>Y(()=>import("./EnhancedVoiceInput-BycE0N4i.js"),__vite__mapDeps([23,1,0])));const Hp=S.lazy(()=>Y(()=>import("./OnboardingWizard-BgAupc_W.js"),__vite__mapDeps([24,1,0]))),To=({strength:t,size:e})=>u.jsx(S.Suspense,{fallback:u.jsx("div",{className:"animate-pulse rounded-full bg-primary/15",style:{width:e,height:e},"aria-hidden":"true"}),children:u.jsx(vp,{strength:t,size:e})});class zp extends S.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?this.props.fallback:this.props.children}}const Vp=()=>{const{state:t,dispatch:e}=rd(),{handleError:n,addToast:r}=an(),{user:s,profile:i,signOut:o}=ot();ht();const[a,c]=S.useState(!1),[l,f]=S.useState(""),d=S.useCallback(g=>{S.startTransition(g)},[]);S.useEffect(()=>{console.log("AppState updated:",t)},[t]);const p=S.useCallback(g=>e({type:"SET_JOURNAL_INPUT",payload:g}),[e]);S.useEffect(()=>{const g=["What did your childhood kitchen smell like?","Describe your first bicycle ride","Who was your favorite teacher and why?","What was your wedding day like?","Tell me about your first job","What games did you play as a child?"],E=g[Math.floor(Math.random()*g.length)];e({type:"SET_DAILY_PROMPT",payload:E})},[e]),S.useEffect(()=>{if(t.memories.length>0)return;let g=!1;return(async()=>{try{const v=await _d();if(g||v.length===0)return;const I=v.sort((N,U)=>new Date(U.date).getTime()-new Date(N.date).getTime()).map(N=>({id:N.id,prompt:N.prompt,response:N.response,date:N.date,type:N.type,tags:N.tags??[]}));e({type:"SET_MEMORIES",payload:I})}catch(v){console.error("Error loading offline memories:",v)}})(),()=>{g=!0}},[e,t.memories.length]);const h=S.useCallback(g=>{const E=g??t.memories;if(E.length===0)return{title:"Story Quiz Quest",description:"Get started with your first memory",time:"1-2 min",icon:"📖",gameView:"quiz-1",reason:"Perfect for beginners"};const v=E[0],I=(v.prompt+" "+v.response).toLowerCase();if(I.includes("beach")||I.includes("ocean")||I.includes("sea"))return{title:"Story Quiz Quest",description:"Based on your beach memory",time:"1-2 min",icon:"📖",gameView:"quiz-1",reason:"Perfect for your beach memories"};if(I.includes("family")||I.includes("friend")||I.includes("people"))return{title:"Memory Match-Up",description:"Based on your social memories",time:"2-3 min",icon:"🎴",gameView:"match",reason:"Great for relationship memories"};if(I.includes("recipe")||I.includes("food")||I.includes("cook"))return{title:"Timeline Tango",description:"Based on your culinary memories",time:"3-4 min",icon:"📅",gameView:"timeline",reason:"Ideal for sequential memories"};if(I.includes("travel")||I.includes("trip")||I.includes("journey"))return{title:"Snapshot Solve",description:"Based on your travel memories",time:"2-3 min",icon:"📸",gameView:"snapshot-1",reason:"Perfect for visual memories"};if(E.length<5)return{title:"Story Quiz Quest",description:"Strengthen your memory recall",time:"1-2 min",icon:"📖",gameView:"quiz-1",reason:"Great for building memory strength"};const N=[{title:"Story Quiz Quest",icon:"📖",gameView:"quiz-1",description:"Test your story recall"},{title:"Memory Match-Up",icon:"🎴",gameView:"match",description:"Match related memories"},{title:"Timeline Tango",icon:"📅",gameView:"timeline",description:"Sort events chronologically"},{title:"Echo Echo",icon:"🔁",gameView:"echo",description:"Repeat memory sequences"}];return{...N[Math.floor(Math.random()*N.length)],time:"2-3 min",reason:"Try something new today"}},[t.memories]),m=S.useCallback(async(g,E)=>{try{await yd({id:g.id??`offline-${Date.now()}`,userId:s==null?void 0:s.id,prompt:g.prompt,response:g.response,date:g.date,type:g.type,tags:g.tags??[],synced:E})}catch(v){console.error("Error caching memory locally:",v)}},[s==null?void 0:s.id]),y=S.useCallback(g=>{const E=g.toISOString().split("T")[0],v=t.lastEntryDate;let I=t.streakCount||0;if(v)if(v===E)I=Math.max(1,t.streakCount||1);else{const N=new Date(`${v}T00:00:00`),U=new Date(`${E}T00:00:00`),R=Math.round((U.getTime()-N.getTime())/(1e3*60*60*24));R===1?I=(t.streakCount||0)+1:R<=0?I=Math.max(t.streakCount||1,1):I=1}else I=1;e({type:"SET_STREAK_COUNT",payload:I}),e({type:"SET_LAST_ENTRY_DATE",payload:E})},[e,t.lastEntryDate,t.streakCount]),_=S.useMemo(()=>h(),[h]),T=S.useMemo(()=>new Date().toDateString(),[]),w=S.useMemo(()=>{const g=new Date;return g.setDate(g.getDate()-1),g.toDateString()},[]),D=S.useMemo(()=>{const g=t.memories.find(v=>new Date(v.date).toDateString()===w);return g||(t.memories.find(v=>new Date(v.date).toDateString()!==T)??null)},[t.memories,T,w]),P=async g=>{const E=g!==void 0?g:t.journalInput,v=Tt(E);if(!v.trim())return;const N=v.toLowerCase().split(" ").filter(O=>O.length>4).slice(0,3),U=vo({prompt:t.dailyPrompt,response:v,type:"text",tags:N}),R={id:Date.now().toString(),prompt:U.prompt,response:U.response,date:new Date().toISOString(),type:U.type,tags:U.tags};e({type:"ADD_MEMORY",payload:R}),y(new Date(R.date)),m(R,!1);try{if(s&&Yn){const{error:O}=await Yn.from("memories").insert({id:R.id,user_id:s.id,prompt:R.prompt,response:R.response,date:R.date,type:R.type,tags:R.tags});if(O)throw O;R.id&&await ro([R.id])}}catch(O){console.error("Error saving memory to Supabase:",O)}try{const{getActivityPoints:O}=await Y(async()=>{const{getActivityPoints:$}=await import("./game-components-DlDolkYV.js").then(B=>B.y);return{getActivityPoints:$}},__vite__mapDeps([0,1])),j=await Sd((s==null?void 0:s.id)||"user123",{type:"memory_added",timestamp:new Date,value:O("memory_added"),metadata:{memoryId:R.id}});e({type:"UPDATE_MEMORY_STRENGTH",payload:j})}catch(O){console.error("Error updating memory strength:",O),e({type:"UPDATE_MEMORY_STRENGTH",payload:Math.min(100,t.memoryStrength+2)})}const L=h([R,...t.memories]);r({type:"success",title:"Memory Saved",message:L?`Your memory has been saved! Ready for a quick game? Try ${L.title}.`:"Your memory has been successfully saved!",duration:4e3})},M=S.useCallback(async g=>{const E=new Date,v=g.type==="image"||g.type==="video",I=l.trim()?Tt(l):Tt(t.journalInput||`Shared ${g.type==="image"?"photo":g.type==="video"?"video":"document"}`),N=v?{caption:I,mediaType:g.type,fileName:g.metadata.name,size:g.metadata.size,preview:g.preview,uploadedAt:E.toISOString()}:null,U=vo({prompt:t.dailyPrompt,response:N?JSON.stringify(N):g.textContent?Tt(g.textContent).slice(0,1e3):`Document upload: ${g.metadata.name}`,type:v?"visual":"text",tags:v?["upload",g.type]:["upload","document"]}),R={id:Date.now().toString(),prompt:U.prompt,response:U.response,date:E.toISOString(),type:U.type,tags:U.tags};e({type:"ADD_MEMORY",payload:R}),y(E),m(R,!1);try{if(s&&Yn){const{error:j}=await Yn.from("memories").insert({id:R.id,user_id:s.id,prompt:R.prompt,response:R.response,date:R.date,type:R.type,tags:R.tags});if(j)throw j;R.id&&await ro([R.id])}}catch(j){console.error("Error saving uploaded memory to Supabase:",j)}const L=h([R,...t.memories]),O=v?g.type==="image"?"photo":"video":"memory";r({type:"success",title:`${O.charAt(0).toUpperCase()}${O.slice(1)} Saved`,message:L?`Saved your ${O}! Try ${L.title} next.`:`Saved your ${O}!`,duration:4e3}),f(""),c(!1)},[r,h,t.dailyPrompt,t.journalInput,t.memories,y,s,e,c,l]),A=()=>t.memoryStrength>=80?"hard":t.memoryStrength>=60?"medium":"easy",k=async()=>{if(!ci()){n(null,"Voice input is not supported in your browser. Please try Chrome or Edge.");return}try{const g=t.memories.slice(0,3).map(N=>N.response).join(" "),E=Xn.detectLanguage(g),v=t.memories.slice(0,5).flatMap(N=>N.tags.concat(N.response.split(" ").filter(U=>U.length>4))).slice(0,10),I=await Xn.startEnhancedSpeechRecognition(N=>{const U=Xn.formatTranscript(N.transcript);e({type:"SET_SPEECH_TRANSCRIPT",payload:U}),e({type:"SET_JOURNAL_INPUT",payload:U})},N=>{console.error("Speech recognition error:",N),e({type:"SET_IS_RECORDING",payload:!1}),n(N,"Error with voice input. Please try again.")},()=>{e({type:"SET_IS_RECORDING",payload:!1})},{lang:E,continuous:!0,interimResults:!0,punctuationCorrection:!0,keywordSpotting:v});e({type:"SET_IS_RECORDING",payload:!0}),setTimeout(()=>{Xn.isCurrentlyRecording()&&(I(),e({type:"SET_IS_RECORDING",payload:!1}),r({type:"info",title:"Voice Recording Complete",message:"Your voice memo has been recorded. Check your transcription history for previous recordings.",duration:5e3}))},3e4)}catch(g){console.error("Error starting speech recognition:",g),e({type:"SET_IS_RECORDING",payload:!1}),n(g,"Error starting voice recording. Please try again.")}},b=({icon:g,label:E,active:v,onClick:I})=>u.jsxs("button",{onClick:I,"aria-label":E,"aria-current":v?"page":void 0,tabIndex:0,role:"button",className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 ${v?"text-primary bg-primary/10":"text-ink-muted hover:text-ink"}`,onKeyPress:N=>{(N.key==="Enter"||N.key===" ")&&I()},children:[u.jsx(g,{className:"w-6 h-6","aria-hidden":"true"}),u.jsx("span",{className:"text-xs font-medium",children:E})]}),x=S.memo(({dailyPrompt:g,journalInput:E,setJournalInput:v,handleAddMemory:I,handleVoiceInput:N,isRecording:U,setGameView:R,memories:L,onUpload:O,streakCount:j,memoryStrength:$,yesterdayMemory:B,gameSuggestion:G})=>{const ae=S.useMemo(()=>new Date().toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),[]),me=S.useMemo(()=>Math.min(100,Math.max(0,$)),[$]),fe=S.useCallback(ue=>{switch(ue){case"record":N();break;case"write":break;case"upload":O();break;case"start-ritual":d(()=>{e({type:"SET_VIEW",payload:"games"}),e({type:"SET_GAME_VIEW",payload:null})});break;case"story-quiz":R("quiz-1");break}},[e,N,O,R]),Ge=S.useCallback(ue=>ue.type==="photo"?`📷 ${ue.response}`:ue.type==="document"?`📄 ${ue.response}`:ue.response,[]),Ne=S.useMemo(()=>B?new Date(B.date).toLocaleDateString():null,[B]);return u.jsxs("div",{className:"space-y-8 pt-6",children:[u.jsxs("div",{className:"bg-surface/90 backdrop-blur-soft rounded-3xl p-6 shadow-soft border border-border/60",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-2xl flex items-center justify-center","aria-hidden":"true",children:u.jsx(sd,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-ink",children:"Daily Prompt"}),u.jsx("p",{className:"text-sm text-ink-muted",children:"Today's memory challenge"})]})]}),u.jsx("p",{className:"text-xl font-semibold text-ink mb-6",children:g}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{htmlFor:"journal-input",className:"sr-only",children:"Write your memory here"}),u.jsx("textarea",{id:"journal-input",value:E,onChange:ue=>v(ue.target.value),placeholder:"Write your memory here...",className:"w-full h-32 rounded-2xl border border-border/60 bg-primary/10 p-4 outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20","aria-label":"Write your memory here"}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("button",{onClick:()=>fe("record"),"aria-label":U?"Stop recording":"Record voice memo",className:`flex-1 flex items-center justify-center gap-2 rounded-2xl py-3 px-4 transition-all ${U?"bg-danger text-white":"bg-primary/15 text-primary hover:bg-primary/20"}`,children:[u.jsx(id,{className:"w-5 h-5","aria-hidden":"true"}),u.jsx("span",{children:U?"Listening...":"Voice"})]}),u.jsxs("button",{onClick:()=>{I(E),v("")},disabled:!E.trim(),"aria-label":"Add memory",className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-primary to-accent text-white rounded-2xl hover:shadow-subtle disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsx(od,{className:"w-5 h-5","aria-hidden":"true"}),u.jsx("span",{children:"Add Memory"})]}),u.jsxs("button",{onClick:()=>fe("upload"),"aria-label":"Upload a photo",className:"flex-1 flex items-center justify-center gap-2 rounded-2xl border border-border/60 bg-surface-raised py-3 px-4 text-primary transition-all hover:bg-primary/10",children:[u.jsx("span",{className:"text-lg","aria-hidden":"true",children:"📷"}),u.jsx("span",{children:"Upload"})]})]})]})]}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-base text-ink-muted",children:ae}),u.jsxs("p",{className:"text-base text-ink-muted",children:["🔥 ",j," day streak"]})]}),u.jsxs("div",{className:"relative w-16 h-16",children:[u.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[u.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#FEF3C7",strokeWidth:"10"}),u.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#F59E0B",strokeWidth:"10",strokeDasharray:`${283*(me/100)} 283`,transform:"rotate(-90 50 50)"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(ad,{className:"w-6 h-6 text-primary"})})]})]})}),B&&u.jsxs("div",{className:"bg-surface/90 backdrop-blur-soft rounded-3xl p-6 shadow-subtle border border-border/60",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h2",{className:"text-lg font-bold text-ink",children:"Yesterday's Joy"}),Ne&&u.jsx("span",{className:"text-xs text-ink-muted",children:Ne})]}),u.jsx("p",{className:"text-sm text-ink-muted mb-2",children:B.prompt}),u.jsx("p",{className:"text-ink line-clamp-3",children:Ge(B)})]}),G&&u.jsxs("div",{className:"rounded-3xl border border-border/60 bg-gradient-to-r from-surface to-accent/10 p-6 shadow-soft",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-bold text-ink",children:"Today's Suggestion"}),u.jsx("span",{className:"text-xs font-semibold text-accent bg-accent/15 px-2 py-1 rounded-full",children:"Recommended"})]}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-accent/15 rounded-2xl flex items-center justify-center",children:u.jsx("span",{className:"text-xl","aria-hidden":"true",children:G.icon})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-ink",children:`${G.icon} ${G.title}`}),u.jsx("p",{className:"text-sm text-ink-muted",children:G.description})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-muted",children:G.time}),u.jsx("button",{className:"bg-gradient-to-r from-primary to-accent text-white font-bold py-2 px-4 rounded-xl shadow-subtle hover:shadow-soft transition-all",onClick:()=>R(G.gameView),children:"Play Now"})]}),u.jsx("div",{className:"mt-3 text-xs text-accent italic",children:G.reason})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-surface to-primary/10 rounded-3xl p-5 border border-border/60 flex flex-col items-center justify-center",children:[u.jsx("div",{className:"mb-3",children:u.jsx(To,{strength:$,size:80})}),u.jsx("p",{className:"text-xs text-primary text-center",children:"Memory Strength"})]}),u.jsx("div",{className:"rounded-3xl border border-border/60 bg-gradient-to-br from-surface to-accent/10 p-5",children:u.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[u.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-accent text-white","aria-hidden":"true",children:u.jsx(cd,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold text-accent",children:L.length}),u.jsx("p",{className:"text-xs text-accent",children:"Memories"})]})]})})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-ink mb-4",children:"Quick Actions"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:"ai-studio"})),"aria-label":"Open AI Studio",className:"bg-gradient-to-br from-accent to-primary rounded-2xl p-4 text-white text-center shadow-subtle hover:shadow-soft transition-all",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"🤖"}),u.jsx("p",{className:"font-bold text-sm",children:"AI Studio"})]}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:"visual-content"})),"aria-label":"Create visual memories",className:"bg-gradient-to-br from-primary to-primary-strong rounded-2xl p-4 text-white text-center shadow-subtle hover:shadow-soft transition-all",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"🎨"}),u.jsx("p",{className:"font-bold text-sm",children:"Visualize"})]}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:"knowledge-graph"})),"aria-label":"Explore memory connections",className:"bg-gradient-to-br from-accent to-primary rounded-2xl p-4 text-white text-center shadow-subtle transition-all hover:shadow-soft",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"🔗"}),u.jsx("p",{className:"font-bold text-sm",children:"Connections"})]}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:"collaborative-memory"})),"aria-label":"Collaborate with family",className:"bg-gradient-to-br from-primary to-accent rounded-2xl p-4 text-white text-center shadow-subtle transition-all hover:shadow-soft",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"👥"}),u.jsx("p",{className:"font-bold text-sm",children:"Collaborate"})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-ink",children:"Recent Memories"}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_VIEW",payload:"scrapbook"})),className:"text-primary hover:text-primary font-medium flex items-center gap-1","aria-label":"See all memories",children:["See All ",u.jsx(is,{className:"w-4 h-4","aria-hidden":"true"})]})]}),u.jsxs("div",{className:"space-y-4",children:[L.slice(0,2).map(ue=>u.jsxs("div",{className:"bg-surface/90 backdrop-blur-soft rounded-3xl p-5 shadow-subtle border border-border/60",children:[u.jsx("p",{className:"font-semibold text-ink mb-2 line-clamp-2",children:Ge(ue)}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-ink-muted",children:new Date(ue.date).toLocaleDateString()}),u.jsx("div",{className:"flex gap-2",children:ue.tags.map((Bt,St)=>u.jsx("span",{className:"text-xs bg-primary/15 text-primary px-2 py-1 rounded-full",children:Bt},St))})]})]},ue.id)),L.length===0&&u.jsxs("div",{className:"bg-surface/90 backdrop-blur-soft rounded-3xl p-8 text-center shadow-subtle border border-border/60",children:[u.jsx(no,{className:"w-12 h-12 text-primary mx-auto mb-3","aria-hidden":"true"}),u.jsx("p",{className:"text-ink-muted",children:"No memories yet. Start by adding your first memory!"})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-ink",children:"Brain Games"}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_VIEW",payload:"games"})),className:"text-primary hover:text-primary font-medium flex items-center gap-1","aria-label":"See all games",children:["See All ",u.jsx(is,{className:"w-4 h-4","aria-hidden":"true"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"match"})),"aria-label":"Play Memory Match game",className:"bg-gradient-to-br from-accent to-primary rounded-2xl p-4 text-white text-center shadow-subtle transition-all hover:shadow-soft",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"🎴"}),u.jsx("p",{className:"font-bold text-sm",children:"Match"})]}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"quiz-1"})),"aria-label":"Play Story Quiz game",className:"bg-gradient-to-br from-primary to-accent rounded-2xl p-4 text-white text-center shadow-subtle transition-all hover:shadow-soft",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"❓"}),u.jsx("p",{className:"font-bold text-sm",children:"Quiz"})]}),u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"timeline"})),"aria-label":"Play Timeline Tango game",className:"bg-gradient-to-br from-success to-primary rounded-2xl p-4 text-white text-center shadow-subtle transition-all hover:shadow-soft",children:[u.jsx("div",{className:"text-3xl mb-2","aria-hidden":"true",children:"📅"}),u.jsx("p",{className:"font-bold text-sm",children:"Timeline"})]})]})]})]})});return t.showOnboarding?u.jsx(S.Suspense,{fallback:u.jsx("div",{className:vt(wt.shell,"flex min-h-screen items-center justify-center bg-gradient-to-br from-surface to-surface-muted"),children:u.jsxs("div",{className:vt(wt.card,"bg-surface-raised/90 text-center"),children:[u.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-2xl border-4 border-primary/30 border-t-primary"}),u.jsx("p",{className:Zf,children:"Preparing your personalized setup…"})]})}),children:u.jsx(Hp,{})}):u.jsxs("div",{className:vt(wt.shell,"bg-gradient-to-br from-surface to-surface-muted"),children:[u.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-32 -right-32 h-72 w-72 rounded-full bg-primary/10 blur-3xl"}),u.jsx("div",{className:"absolute -bottom-32 -left-32 h-72 w-72 rounded-full bg-accent/10 blur-3xl"})]}),u.jsx("header",{className:"safe-px sticky top-0 z-50 border-b border-border/60 bg-surface/80 py-4 backdrop-blur-soft",children:u.jsxs("div",{className:"mx-auto flex max-w-md items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex size-12 items-center justify-center rounded-2xl bg-primary text-white shadow-soft","aria-hidden":"true",children:u.jsx(ld,{className:"h-6 w-6"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-lg font-extrabold text-ink",children:"MemoryKeeper"}),u.jsx("p",{className:"text-xs text-ink-muted",children:"Your Story, Your Legacy"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:"memory-strength-breakdown"})),className:vt(wt.ghostButton,"h-10 rounded-full border border-border/60 bg-surface-muted/80 px-3 py-2 text-sm font-semibold"),"aria-label":"View memory strength breakdown",children:u.jsx(To,{strength:t.memoryStrength,size:30})}),u.jsx(S.Suspense,{fallback:u.jsx("div",{className:"h-8 w-8 animate-pulse rounded-full bg-primary/20","aria-hidden":!0}),children:u.jsx(Dp,{})})]})]})}),u.jsxs("main",{className:"relative mx-auto max-w-md px-gutter pb-32",children:[u.jsxs(S.Suspense,{fallback:u.jsx("div",{className:"py-24 text-center text-ink-muted",children:"Loading view..."}),children:[t.view==="home"&&!t.gameView&&!t.detailView&&u.jsx(zp,{fallback:u.jsxs("div",{className:"mx-4 my-8 rounded-3xl bg-danger/15 py-12 text-center shadow-soft",children:[u.jsx("h2",{className:"text-2xl font-bold text-danger",children:"HomeView Failed to Load"}),u.jsx("p",{className:"text-ink-muted",children:"The main interface component encountered an error."})]}),children:u.jsx(x,{dailyPrompt:t.dailyPrompt,journalInput:t.journalInput,setJournalInput:p,handleAddMemory:P,handleVoiceInput:k,isRecording:t.isRecording,setGameView:g=>{const E=typeof g=="function"?g(t.gameView||null):g;d(()=>{e({type:"SET_GAME_VIEW",payload:E})})},memories:t.memories,onUpload:()=>c(!0),streakCount:t.streakCount,memoryStrength:t.memoryStrength,yesterdayMemory:D,gameSuggestion:_})}),t.view==="games"&&!t.gameView&&!t.detailView&&u.jsx(_p,{onBack:()=>d(()=>{e({type:"SET_VIEW",payload:"home"}),e({type:"SET_GAME_VIEW",payload:null})}),onGameSelect:g=>{d(()=>{switch(g){case"match-up":e({type:"SET_GAME_VIEW",payload:"match"});break;case"timeline-tango":e({type:"SET_GAME_VIEW",payload:"timeline"});break;case"echo-echo":e({type:"SET_GAME_VIEW",payload:"echo"});break;case"story-quiz-quest":e({type:"SET_GAME_VIEW",payload:"quiz-1"});break;default:console.warn("Unknown game ID:",g)}})}}),t.view==="scrapbook"&&!t.detailView&&u.jsx(wo,{onBack:()=>d(()=>e({type:"SET_VIEW",payload:"home"}))}),t.view==="profile"&&!t.detailView&&u.jsx(jp,{onBack:()=>d(()=>e({type:"SET_VIEW",payload:"home"}))})]}),u.jsxs(S.Suspense,{fallback:u.jsx("div",{className:"py-24 text-center text-ink-muted",children:"Loading game..."}),children:[t.gameView==="match"&&!t.detailView&&u.jsx(hp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null})),memories:t.memories,difficulty:A()}),t.gameView==="match-1"&&!t.detailView&&u.jsx(xp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null})),onNavigate:g=>d(()=>e({type:"SET_GAME_VIEW",payload:g}))}),t.gameView==="match-2"&&!t.detailView&&u.jsx(Ep,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"match-1"})),onNavigate:g=>d(()=>e({type:"SET_GAME_VIEW",payload:g}))}),t.gameView==="quiz-1"&&!t.detailView&&u.jsx(Mp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null})),onNavigate:g=>d(()=>e({type:"SET_GAME_VIEW",payload:g}))}),t.gameView==="quiz-2"&&!t.detailView&&u.jsx(Ap,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"quiz-1"})),onNavigate:g=>d(()=>e({type:"SET_GAME_VIEW",payload:g}))}),t.gameView==="snapshot-1"&&!t.detailView&&u.jsx(Np,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null})),onNavigate:g=>d(()=>e({type:"SET_GAME_VIEW",payload:g}))}),t.gameView==="snapshot-2"&&!t.detailView&&u.jsx(Rp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:"snapshot-1"}))}),t.gameView==="timeline"&&!t.detailView&&u.jsx(Lp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null}))}),t.gameView==="echo"&&!t.detailView&&u.jsx(yp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null}))}),t.gameView==="link"&&!t.detailView&&u.jsx(bp,{onBack:()=>d(()=>e({type:"SET_GAME_VIEW",payload:null}))})]}),u.jsxs(S.Suspense,{fallback:u.jsx("div",{className:"flex items-center justify-center min-h-96",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),u.jsx("p",{className:"text-ink-muted",children:"Loading..."})]})}),children:[t.detailView==="ai-studio"&&u.jsx(mp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="collaborative-memory"&&u.jsx(gp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="invite-collaborate"&&u.jsx(Sp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="collaborative-collections"&&u.jsx(Up,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="premium-features"&&u.jsx(Tp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="proactive-prompt"&&u.jsx(kp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="profile-setup"&&u.jsx(Ip,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="quick-tutorial"&&u.jsx(Cp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="view-progress-settings"&&u.jsx(Op,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="knowledge-graph"&&u.jsx(wp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="visual-content"&&u.jsx(Pp,{onBack:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null}))}),t.detailView==="data-export-import"&&u.jsx(Fp,{}),t.detailView==="memory-import"&&u.jsx($p,{}),t.detailView==="memory-strength-breakdown"&&u.jsx(Bp,{})]}),t.view==="scrapbook"&&!t.detailView&&u.jsx(wo,{onBack:()=>d(()=>e({type:"SET_VIEW",payload:"home"}))})]}),a&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:u.jsxs("div",{className:"relative w-full max-w-lg rounded-3xl bg-surface-raised p-6 shadow-ring",children:[u.jsx("button",{onClick:()=>{c(!1),f("")},className:"absolute right-4 top-4 rounded-full border border-border/60 p-2 text-ink-muted transition-colors hover:bg-surface-muted hover:text-ink","aria-label":"Close upload dialog",children:u.jsx(ac,{className:"w-4 h-4"})}),u.jsx("h2",{className:"text-xl font-bold text-ink mb-2",children:"Upload a memory"}),u.jsx("p",{className:"text-sm text-ink-muted mb-4",children:"Add a photo or document to capture a special moment. We'll save it alongside your journal."}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-ink mb-1",htmlFor:"upload-caption",children:"Caption (Optional)"}),u.jsx("textarea",{id:"upload-caption",value:l,onChange:g=>f(g.target.value),className:"w-full rounded-2xl border border-border/60 bg-surface-raised p-3 text-sm focus:border-primary focus:ring-2 focus:ring-primary/15",rows:2,placeholder:"Add a short caption to describe this memory..."})]}),u.jsx(pp,{onFileProcessed:M,acceptedTypes:["image/*",".pdf",".txt"],maxFileSize:20,multiple:!1})]})}),!t.detailView&&u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t border-border/60 bg-surface/90 backdrop-blur-soft shadow-ring","aria-label":"Main navigation",children:u.jsxs("div",{className:"max-w-md mx-auto flex justify-around py-3 px-2",children:[u.jsx(b,{icon:ud,label:"Home",active:t.view==="home",onClick:()=>d(()=>{e({type:"SET_VIEW",payload:"home"}),e({type:"SET_GAME_VIEW",payload:null})})}),u.jsx(b,{icon:dd,label:"Games",active:t.view==="games",onClick:()=>d(()=>{e({type:"SET_VIEW",payload:"games"}),e({type:"SET_GAME_VIEW",payload:null})})}),u.jsx(b,{icon:no,label:"Memories",active:t.view==="scrapbook",onClick:()=>d(()=>{e({type:"SET_VIEW",payload:"scrapbook"}),e({type:"SET_GAME_VIEW",payload:null})})}),u.jsx(b,{icon:fd,label:"Profile",active:t.view==="profile",onClick:()=>d(()=>{e({type:"SET_VIEW",payload:"profile"}),e({type:"SET_GAME_VIEW",payload:null})})})]})}),t.detailView&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-border/60 bg-surface/90 backdrop-blur-soft shadow-ring",children:u.jsx("div",{className:"max-w-md mx-auto py-3 px-4",children:u.jsxs("button",{onClick:()=>d(()=>e({type:"SET_DETAIL_VIEW",payload:null})),className:"w-full py-3 bg-gradient-to-r from-primary to-accent text-white rounded-2xl font-semibold shadow-subtle hover:shadow-soft transition-all flex items-center justify-center gap-2","aria-label":"Go back",children:[u.jsx(is,{className:"w-5 h-5 rotate-180","aria-hidden":"true"}),"Back"]})})})]})},ko=S.memo(Vp),Wp=({children:t})=>{const{user:e,loading:n}=ot(),r=cc(),{addToast:s}=an();return n?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex items-center justify-center",role:"status","aria-label":"Loading application",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4","aria-hidden":"true"}),u.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading your MemoryKeeper experience..."}),u.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please wait while we verify your authentication"})]})}):e?u.jsx(u.Fragment,{children:t}):(s({type:"warning",title:"Authentication Required",message:"Please sign in to access MemoryKeeper.",duration:4e3}),u.jsx(Is,{to:"/auth",state:{from:r},replace:!0}))},qp=()=>{const t=ht();return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 flex flex-col items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-orange-100 w-full max-w-2xl",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Developer Test Page"}),u.jsx("p",{className:"text-gray-600",children:"Testing environment for MemoryKeeper development"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-orange-50 rounded-2xl p-6 border border-orange-100",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Authentication"}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>t("/auth"),className:"w-full py-2 px-4 bg-orange-500 text-white rounded-xl font-medium hover:bg-orange-600 transition-colors",children:"Auth Flow"}),u.jsx("button",{onClick:()=>t("/supabase-test"),className:"w-full py-2 px-4 bg-rose-500 text-white rounded-xl font-medium hover:bg-rose-600 transition-colors",children:"Sign In"}),u.jsx("button",{onClick:()=>t("/supabase-signup"),className:"w-full py-2 px-4 bg-amber-500 text-white rounded-xl font-medium hover:bg-amber-600 transition-colors",children:"Sign Up"})]})]}),u.jsxs("div",{className:"bg-orange-50 rounded-2xl p-6 border border-orange-100",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Main App"}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>t("/memory-keeper-main"),className:"w-full py-2 px-4 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-xl font-medium hover:opacity-90 transition-opacity",children:"Main Application"}),u.jsx("button",{onClick:()=>t("/main"),className:"w-full py-2 px-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-medium hover:opacity-90 transition-opacity",children:"Direct Access (No Auth)"})]})]})]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx("button",{onClick:()=>t("/"),className:"py-2 px-6 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"Back to Home"})})]})})},Gp=()=>u.jsx("div",{className:"App flex min-h-screen flex-col",children:u.jsxs(bd,{children:[u.jsx(Me,{path:"/",element:u.jsx(ep,{})}),u.jsx(Me,{path:"/auth",element:u.jsx(Eo,{})}),u.jsx(Me,{path:"/MemoryKeeperMain",element:u.jsx(Is,{to:"/memory-keeper-main",replace:!0})}),u.jsx(Me,{path:"/memory-keeper-main",element:u.jsx(Wp,{children:u.jsx(ko,{})})}),u.jsx(Me,{path:"/main",element:u.jsx(ko,{})}),u.jsx(Me,{path:"/signin",element:u.jsx(Eo,{})}),u.jsx(Me,{path:"/supabase-test",element:u.jsx(tp,{})}),u.jsx(Me,{path:"/supabase-signup",element:u.jsx(np,{})}),u.jsx(Me,{path:"/reset-password",element:u.jsx(rp,{})}),u.jsx(Me,{path:"/update-password",element:u.jsx(sp,{})}),u.jsx(Me,{path:"/dev",element:u.jsx(qp,{})}),u.jsx(Me,{path:"*",element:u.jsx(Is,{to:"/",replace:!0})})]})});function Kp(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,c,l;const f=async(p=!0)=>{await c,await(l==null?void 0:l())};async function d(){if("serviceWorker"in navigator){if(a=await Y(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;l=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let p=!1;const h=()=>{p=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?h():!p&&(r==null||r()):m.isExternal?window.location.reload():!p&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",h),a.addEventListener("externalwaiting",h)}a.register({immediate:e}).then(p=>{i?i("/sw.js",p):s==null||s(p)}).catch(p=>{o==null||o(p)})}}return c=d(),f}function Yp(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t,[a,c]=S.useState(!1),[l,f]=S.useState(!1),[d]=S.useState(()=>Kp({immediate:e,onOfflineReady(){f(!0),r==null||r()},onNeedRefresh(){c(!0),n==null||n()},onRegistered:s,onRegisteredSW:i,onRegisterError:o}));return{needRefresh:[a,c],offlineReady:[l,f],updateServiceWorker:d}}const Jp=5*60*1e3;let Io;const Xp=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(null),{offlineReady:[s,i],needRefresh:[o,a],updateServiceWorker:c}=Yp({immediate:!0,onRegisteredSW(f,d){d&&typeof window<"u"&&Io===void 0&&(Io=window.setInterval(()=>{d.update()},Jp))}});S.useEffect(()=>{if(s){r("offline"),e(!0);const f=setTimeout(()=>{i(!1),e(!1)},4e3);return()=>clearTimeout(f)}},[s,i]),S.useEffect(()=>{if(o){const f=setTimeout(()=>{r("update"),e(!0)},500);return()=>clearTimeout(f)}},[o]);const l=S.useMemo(()=>n==="offline"?{title:"Offline ready",body:"We cached the latest memories so you can keep journaling without a connection."}:n==="update"?{title:"New version available",body:"Refresh to load the latest MemoryKeeper improvements."}:null,[n]);return!t||!l?null:u.jsxs("aside",{role:"status","aria-live":"polite",className:"fixed bottom-6 right-6 z-50 w-80 rounded-2xl border border-orange-200 bg-white/95 p-4 text-sm shadow-2xl shadow-orange-200/50 backdrop-blur dark:border-orange-500/30 dark:bg-[#1b1208]",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:l.title}),u.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:l.body})]}),u.jsx("button",{type:"button","aria-label":"Dismiss update message",className:"text-gray-400 transition hover:text-gray-600 dark:text-gray-200 dark:hover:text-gray-50",onClick:()=>{e(!1),n==="update"?a(!1):i(!1)},children:"✕"})]}),n==="update"&&u.jsx("button",{type:"button",className:"mt-3 w-full rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 py-2 text-sm font-semibold text-white shadow hover:brightness-110 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300",onClick:()=>c(!0),children:"Update now"})]})};function Qp(){return console.log("App component rendering"),u.jsx(Yf,{children:u.jsx("div",{className:"min-h-screen bg-background-light text-zinc-900 transition-colors duration-300 dark:bg-background-dark dark:text-zinc-100",children:u.jsx(pd,{children:u.jsx(hd,{children:u.jsx(Gf,{children:u.jsx(xd,{children:u.jsxs(Ed,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[u.jsx(Gp,{}),u.jsx(md,{}),u.jsx(Xp,{})]})})})})})})})}const F=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Z=globalThis,Nt="10.22.0";function Dt(){return Hr(Z),Z}function Hr(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Nt,e[Nt]=e[Nt]||{}}function cn(t,e,n=Z){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Nt]=r[Nt]||{};return s[t]||(s[t]=e())}const Zp=["debug","info","warn","error","log","assert","trace"],eh="Sentry Logger ",Er={};function Ft(t){if(!("console"in Z))return t();const e=Z.console,n={},r=Object.keys(Er);r.forEach(s=>{const i=Er[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function th(){ui().enabled=!0}function nh(){ui().enabled=!1}function Sc(){return ui().enabled}function rh(...t){li("log",...t)}function sh(...t){li("warn",...t)}function ih(...t){li("error",...t)}function li(t,...e){F&&Sc()&&Ft(()=>{Z.console[t](`${eh}[${t}]:`,...e)})}function ui(){return F?cn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const C={enable:th,disable:nh,isEnabled:Sc,log:rh,warn:sh,error:ih},bc=50,Lt="?",Co=/\(error: (.*)\)/,No=/captureMessage|captureException/;function xc(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const l=Co.test(c)?c.replace(Co,"$1"):c;if(!l.match(/\S*Error: /)){for(const f of e){const d=f(l);if(d){i.push(d);break}}if(i.length>=bc+s)break}}return ah(i.slice(s))}}function oh(t){return Array.isArray(t)?xc(...t):t}function ah(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Qn(e).function||"")&&e.pop(),e.reverse(),No.test(Qn(e).function||"")&&(e.pop(),No.test(Qn(e).function||"")&&e.pop()),e.slice(0,bc).map(n=>({...n,filename:n.filename||Qn(e).filename,function:n.function||Lt}))}function Qn(t){return t[t.length-1]||{}}const cs="<anonymous>";function et(t){try{return!t||typeof t!="function"?cs:t.name||cs}catch{return cs}}function Ro(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const ur={},Mo={};function mt(t,e){ur[t]=ur[t]||[],ur[t].push(e)}function gt(t,e){if(!Mo[t]){Mo[t]=!0;try{e()}catch(n){F&&C.error(`Error while instrumenting ${t}`,n)}}}function Oe(t,e){const n=t&&ur[t];if(n)for(const r of n)try{r(e)}catch(s){F&&C.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${et(r)}
Error:`,s)}}let ls=null;function Ec(t){const e="error";mt(e,t),gt(e,ch)}function ch(){ls=Z.onerror,Z.onerror=function(t,e,n,r,s){return Oe("error",{column:r,error:s,line:n,msg:t,url:e}),ls?ls.apply(this,arguments):!1},Z.onerror.__SENTRY_INSTRUMENTED__=!0}let us=null;function vc(t){const e="unhandledrejection";mt(e,t),gt(e,lh)}function lh(){us=Z.onunhandledrejection,Z.onunhandledrejection=function(t){return Oe("unhandledrejection",t),us?us.apply(this,arguments):!0},Z.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const wc=Object.prototype.toString;function di(t){switch(wc.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return tt(t,Error)}}function ln(t,e){return wc.call(t)===`[object ${e}]`}function Tc(t){return ln(t,"ErrorEvent")}function Ao(t){return ln(t,"DOMError")}function uh(t){return ln(t,"DOMException")}function Je(t){return ln(t,"String")}function fi(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Xt(t){return t===null||fi(t)||typeof t!="object"&&typeof t!="function"}function Cn(t){return ln(t,"Object")}function zr(t){return typeof Event<"u"&&tt(t,Event)}function dh(t){return typeof Element<"u"&&tt(t,Element)}function fh(t){return ln(t,"RegExp")}function un(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function ph(t){return Cn(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function tt(t,e){try{return t instanceof e}catch{return!1}}function kc(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Ic(t){return typeof Request<"u"&&tt(t,Request)}const pi=Z,hh=80;function Pe(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let l;const f=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||hh;for(;n&&i++<r&&(l=mh(n,f),!(l==="html"||i>1&&o+s.length*c+l.length>=d));)s.push(l),o+=l.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function mh(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(pi.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Je(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function dn(){try{return pi.document.location.href}catch{return""}}function Cc(t){if(!pi.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function vr(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Lo(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{kc(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function dr(t,e,n=!1){return Je(t)?fh(e)?e.test(t):Je(e)?n?t===e:t.includes(e):!1:!1}function Xe(t,e=[],n=!1){return e.some(r=>dr(t,r,n))}function we(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Nc(s,r);try{t[e]=s}catch{F&&C.log(`Failed to replace method "${e}" in object`,t)}}function Ce(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{F&&C.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Nc(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Ce(t,"__sentry_original__",e)}catch{}}function hi(t){return t.__sentry_original__}function Rc(t){if(di(t))return{message:t.message,name:t.name,stack:t.stack,...Po(t)};if(zr(t)){const e={type:t.type,target:Oo(t.target),currentTarget:Oo(t.currentTarget),...Po(t)};return typeof CustomEvent<"u"&&tt(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Oo(t){try{return dh(t)?Pe(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Po(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function gh(t,e=40){const n=Object.keys(Rc(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return vr(r,e);for(let s=n.length;s>0;s--){const i=n.slice(0,s).join(", ");if(!(i.length>e))return s===n.length?i:vr(i,e)}return""}function yh(){const t=Z;return t.crypto||t.msCrypto}let ds;function _h(){return Math.random()*16}function Ie(t=yh()){try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return ds||(ds="10000000100040008000"+1e11),ds.replace(/[018]/g,e=>(e^(_h()&15)>>e/4).toString(16))}function Mc(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function Et(t){const{message:e,event_id:n}=t;if(e)return e;const r=Mc(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Os(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function Qt(t,e){const n=Mc(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};n.mechanism.data=i}}function jo(t){if(Sh(t))return!0;try{Ce(t,"__sentry_captured__",!0)}catch{}return!1}function Sh(t){try{return t.__sentry_captured__}catch{}}const Ac=1e3;function $t(){return Date.now()/Ac}function bh(){const{performance:t}=Z;if(!(t!=null&&t.now)||!t.timeOrigin)return $t;const e=t.timeOrigin;return()=>(e+t.now())/Ac}let Do;function ge(){return(Do??(Do=bh()))()}let fs;function xh(){var f;const{performance:t}=Z;if(!(t!=null&&t.now))return[void 0,"none"];const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,o=(f=t.timing)==null?void 0:f.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,l=c<e;return i||l?s<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function Te(){return fs||(fs=xh()),fs[0]}function Eh(t){const e=ge(),n={sid:Ie(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>wh(n)};return t&&Zt(n,t),n}function Zt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||ge(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ie()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function vh(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Zt(t,n)}function wh(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Dn(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Dn(r[s],e[s],n-1));return r}function nt(){return Ie()}function Qe(){return Ie().substring(16)}const Ps="_sentrySpan";function en(t,e){e?Ce(t,Ps,e):delete t[Ps]}function wr(t){return t[Ps]}const Th=100;class We{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:nt(),sampleRand:Math.random()}}clone(){const e=new We;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,en(e,wr(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Zt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof We?n.getScopeData():Cn(n)?e:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:l=[],propagationContext:f}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),l.length&&(this._fingerprint=l),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,en(this,void 0),this._attachments=[],this.setPropagationContext({traceId:nt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var i;const r=typeof n=="number"?n:Th;if(r<=0)return this;const s={timestamp:$t(),...e,message:e.message?vr(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:wr(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Dn(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||Ie();if(!this._client)return F&&C.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=(r==null?void 0:r.event_id)||Ie();if(!this._client)return F&&C.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||Ie();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(F&&C.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function kh(){return cn("defaultCurrentScope",()=>new We)}function Ih(){return cn("defaultIsolationScope",()=>new We)}class Ch{constructor(e,n){let r;e?r=e:r=new We;let s;n?s=n:s=new We,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return un(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function tn(){const t=Dt(),e=Hr(t);return e.stack=e.stack||new Ch(kh(),Ih())}function Nh(t){return tn().withScope(t)}function Rh(t,e){const n=tn();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Fo(t){return tn().withScope(()=>t(tn().getIsolationScope()))}function Mh(){return{withIsolationScope:Fo,withScope:Nh,withSetScope:Rh,withSetIsolationScope:(t,e)=>Fo(e),getCurrentScope:()=>tn().getScope(),getIsolationScope:()=>tn().getIsolationScope()}}function fn(t){const e=Hr(t);return e.acs?e.acs:Mh()}function se(){const t=Dt();return fn(t).getCurrentScope()}function qe(){const t=Dt();return fn(t).getIsolationScope()}function Ah(){return cn("globalScope",()=>new We)}function Vr(...t){const e=Dt(),n=fn(e);if(t.length===2){const[r,s]=t;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(t[0])}function X(){return se().getClient()}function Lh(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||Qe()};return r&&(i.parent_span_id=r),i}const Ue="sentry.source",mi="sentry.sample_rate",Lc="sentry.previous_trace_sample_rate",rt="sentry.op",he="sentry.origin",Nn="sentry.idle_span_finish_reason",Fn="sentry.measurement_unit",$n="sentry.measurement_value",$o="sentry.custom_span_name",gi="sentry.profile_id",pn="sentry.exclusive_time",Oh="sentry.link.type",Ph=0,Oc=1,pe=2;function jh(t){if(t<400&&t>=100)return{code:Oc};if(t>=400&&t<500)switch(t){case 401:return{code:pe,message:"unauthenticated"};case 403:return{code:pe,message:"permission_denied"};case 404:return{code:pe,message:"not_found"};case 409:return{code:pe,message:"already_exists"};case 413:return{code:pe,message:"failed_precondition"};case 429:return{code:pe,message:"resource_exhausted"};case 499:return{code:pe,message:"cancelled"};default:return{code:pe,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:pe,message:"unimplemented"};case 503:return{code:pe,message:"unavailable"};case 504:return{code:pe,message:"deadline_exceeded"};default:return{code:pe,message:"internal_error"}}return{code:pe,message:"unknown_error"}}function Pc(t,e){t.setAttribute("http.response.status_code",e);const n=jh(e);n.message!=="unknown_error"&&t.setStatus(n)}const jc="_sentryScope",Dc="_sentryIsolationScope";function Dh(t){try{const e=Z.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function Fh(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function $h(t,e,n){t&&(Ce(t,Dc,Dh(n)),Ce(t,jc,e))}function Tr(t){const e=t;return{scope:e[jc],isolationScope:Fh(e[Dc])}}const yi="sentry-",Bh=/^sentry-/,Uh=8192;function Fc(t){const e=zh(t);if(!e)return;const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(Bh)){const o=s.slice(yi.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Hh(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${yi}${r}`]=s),n),{});return Vh(e)}function zh(t){if(!(!t||!Je(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Bo(n);return Object.entries(r).forEach(([s,i])=>{e[s]=i}),e},{}):Bo(t)}function Bo(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const r=e.slice(0,n),s=e.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function Vh(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${e},${i}`;return o.length>Uh?(F&&C.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const Wh=/^o(\d+)\./,qh=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Gh(t){return t==="http"||t==="https"}function hn(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Kh(t){const e=qh.exec(t);if(!e){Ft(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i="",o="",a=""]=e.slice(1);let c="",l=a;const f=l.split("/");if(f.length>1&&(c=f.slice(0,-1).join("/"),l=f.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return $c({host:i,pass:s,path:c,projectId:l,port:o,protocol:n,publicKey:r})}function $c(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Yh(t){if(!F)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(C.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Gh(r)?e&&isNaN(parseInt(e,10))?(C.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(C.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(C.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Jh(t){const e=t.match(Wh);return e==null?void 0:e[1]}function Xh(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=Jh(n)),r}function Qh(t){const e=typeof t=="string"?Kh(t):$c(t);if(!(!e||!Yh(e)))return e}function Ot(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Bc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Zh(t){if(!t)return;const e=t.match(Bc);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function em(t,e){const n=Zh(t),r=Fc(e);if(!(n!=null&&n.traceId))return{traceId:nt(),sampleRand:Math.random()};const s=tm(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function Uc(t=nt(),e=Qe(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function Hc(t=nt(),e=Qe(),n){return`00-${t}-${e}-${n?"01":"00"}`}function tm(t,e){const n=Ot(e==null?void 0:e.sample_rand);if(n!==void 0)return n;const r=Ot(e==null?void 0:e.sample_rate);return r&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}const zc=0,_i=1;let Uo=!1;function nm(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=ee(t);return{parent_span_id:i,span_id:e,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function rm(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:ee(t).parent_span_id,i=Tr(t).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||Qe():e;return{parent_span_id:s,span_id:o,trace_id:n}}function sm(t){const{traceId:e,spanId:n}=t.spanContext(),r=yt(t);return Uc(e,n,r)}function im(t){const{traceId:e,spanId:n}=t.spanContext(),r=yt(t);return Hc(e,n,r)}function Vc(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:e,trace_id:n,sampled:r===_i,attributes:i,...s}))}function Rt(t){return typeof t=="number"?Ho(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Ho(t.getTime()):ge()}function Ho(t){return t>9999999999?t/1e3:t}function ee(t){var r;if(am(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(om(t)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:l}=t,f="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(r=t.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:e,trace_id:n,data:s,description:o,parent_span_id:f,start_timestamp:Rt(i),timestamp:Rt(a)||void 0,status:Wc(c),op:s[rt],origin:s[he],links:Vc(l)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function om(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function am(t){return typeof t.getSpanJSON=="function"}function yt(t){const{traceFlags:e}=t.spanContext();return e===_i}function Wc(t){if(!(!t||t.code===Ph))return t.code===Oc?"ok":t.message||"unknown_error"}const Mt="_sentryChildSpans",js="_sentryRootSpan";function qc(t,e){const n=t[js]||t;Ce(e,js,n),t[Mt]?t[Mt].add(e):Ce(t,Mt,new Set([e]))}function cm(t,e){t[Mt]&&t[Mt].delete(e)}function fr(t){const e=new Set;function n(r){if(!e.has(r)&&yt(r)){e.add(r);const s=r[Mt]?Array.from(r[Mt]):[];for(const i of s)n(i)}}return n(t),Array.from(e)}function _e(t){return t[js]||t}function xe(){const t=Dt(),e=fn(t);return e.getActiveSpan?e.getActiveSpan():wr(se())}function Ds(){Uo||(Ft(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Uo=!0)}let zo=!1;function lm(){if(zo)return;function t(){const e=xe(),n=e&&_e(e);if(n){const r="internal_error";F&&C.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:pe,message:r})}}t.tag="sentry_tracingErrorCallback",zo=!0,Ec(t),vc(t)}function He(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=X())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function Vo(t){C.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function kr(t,e){if(!(e!=null&&e.length)||!t.description)return!1;for(const n of e){if(dm(n)){if(dr(t.description,n))return F&&Vo(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?dr(t.description,n.name):!0,s=n.op?t.op&&dr(t.op,n.op):!0;if(r&&s)return F&&Vo(t),!0}return!1}function um(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}function dm(t){return typeof t=="string"||t instanceof RegExp}const Si="production",Gc="_frozenDsc";function pr(t,e){Ce(t,Gc,e)}function Kc(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||Si,release:n.release,public_key:r,trace_id:t,org_id:Xh(e)};return e.emit("createDsc",s),s}function Yc(t,e){const n=e.getPropagationContext();return n.dsc||Kc(n.traceId,t)}function st(t){var m;const e=X();if(!e)return{};const n=_e(t),r=ee(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[mi]??s[Lc];function a(y){return(typeof o=="number"||typeof o=="string")&&(y.sample_rate=`${o}`),y}const c=n[Gc];if(c)return a(c);const l=i==null?void 0:i.get("sentry.dsc"),f=l&&Fc(l);if(f)return a(f);const d=Kc(t.spanContext().traceId,e),p=s[Ue],h=r.description;return p!=="url"&&h&&(d.transaction=h),He()&&(d.sampled=String(yt(n)),d.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((m=Tr(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),e.emit("createDsc",d,n),d}class ft{constructor(e={}){this._traceId=e.traceId||nt(),this._spanId=e.spanId||Qe()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:zc}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function $e(t,e=100,n=1/0){try{return Fs("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Jc(t,e=3,n=100*1024){const r=$e(t,e);return mm(r)>n?Jc(t,e-1,n):r}function Fs(t,e,n=1/0,r=1/0,s=gm()){const[i,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=fm(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const l=e;if(l&&typeof l.toJSON=="function")try{const h=l.toJSON();return Fs("",h,c-1,r,s)}catch{}const f=Array.isArray(e)?[]:{};let d=0;const p=Rc(e);for(const h in p){if(!Object.prototype.hasOwnProperty.call(p,h))continue;if(d>=r){f[h]="[MaxProperties ~]";break}const m=p[h];f[h]=Fs(h,m,c-1,r,s),d++}return o(e),f}function fm(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(kc(e))return"[VueViewModel]";if(ph(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${et(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=pm(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function pm(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function hm(t){return~-encodeURI(t).split(/%..|./).length}function mm(t){return hm(JSON.stringify(t))}function gm(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function _t(t,e=[]){return[t,e]}function ym(t,e){const[n,r]=t;return[n,[...r,e]]}function Wo(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function $s(t){const e=Hr(Z);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function _m(t){const[e,n]=t;let r=JSON.stringify(e);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[$s(r),i]:r.push(typeof i=="string"?$s(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify($e(a))}s(c)}}return typeof r=="string"?r:Sm(r)}function Sm(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function bm(t){return[{type:"span"},t]}function xm(t){const e=typeof t.data=="string"?$s(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const Em={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function qo(t){return Em[t]}function bi(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Xc(t,e,n,r){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:hn(r)},...s&&{trace:s}}}function vm(t,e){var r,s,i,o;if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...((r=t.sdk)==null?void 0:r.integrations)||[],...e.integrations||[]],packages:[...((s=t.sdk)==null?void 0:s.packages)||[],...e.packages||[]],settings:(i=t.sdk)!=null&&i.settings||e.settings?{...(o=t.sdk)==null?void 0:o.settings,...e.settings}:void 0},t}function wm(t,e,n,r){const s=bi(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:hn(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return _t(i,[o])}function Tm(t,e,n,r){const s=bi(n),i=t.type&&t.type!=="replay_event"?t.type:"event";vm(t,n==null?void 0:n.sdk);const o=Xc(t,s,r,e);return delete t.sdkProcessingMetadata,_t(o,[[{type:i},t]])}function km(t,e){function n(h){return!!h.trace_id&&!!h.public_key}const r=st(t[0]),s=e==null?void 0:e.getDsn(),i=e==null?void 0:e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:hn(s)}},{beforeSendSpan:a,ignoreSpans:c}=(e==null?void 0:e.getOptions())||{},l=c!=null&&c.length?t.filter(h=>!kr(ee(h),c)):t,f=t.length-l.length;f&&(e==null||e.recordDroppedEvent("before_send","span",f));const d=a?h=>{const m=ee(h),y=a(m);return y||(Ds(),m)}:ee,p=[];for(const h of l){const m=d(h);m&&p.push(bm(m))}return _t(o,p)}function Im(t){if(!F)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=ee(t),{spanId:s}=t.spanContext(),i=yt(t),o=_e(t),a=o===t,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,l=[`op: ${n}`,`name: ${e}`,`ID: ${s}`];if(r&&l.push(`parent ID: ${r}`),!a){const{op:f,description:d}=ee(o);l.push(`root ID: ${o.spanContext().spanId}`),f&&l.push(`root op: ${f}`),d&&l.push(`root description: ${d}`)}C.log(`${c}
  ${l.join(`
  `)}`)}function Cm(t){if(!F)return;const{description:e="< unknown name >",op:n="< unknown op >"}=ee(t),{spanId:r}=t.spanContext(),i=_e(t)===t,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${e}" with ID ${r}`;C.log(o)}function Qc(t,e,n,r=xe()){const s=r&&_e(r);s&&(F&&C.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),s.addEvent(t,{[$n]:e,[Fn]:n}))}function Go(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},s=r[Fn],i=r[$n];typeof s=="string"&&typeof i=="number"&&(e[n.name]={value:i,unit:s})}),e}const Ko=1e3;class Wr{constructor(e={}){this._traceId=e.traceId||nt(),this._spanId=e.spanId||Qe(),this._startTime=e.startTimestamp||ge(),this._links=e.links,this._attributes={},this.setAttributes({[he]:"manual",[rt]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?_i:zc}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=Rt(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Ue,"custom"),this}end(e){this._endTime||(this._endTime=Rt(e),Cm(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[rt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Wc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[he],profile_id:this._attributes[gi],exclusive_time:this._attributes[pn],measurements:Go(this._events),is_segment:this._isStandaloneSpan&&_e(this)===this||void 0,segment_id:this._isStandaloneSpan?_e(this).spanContext().spanId:void 0,links:Vc(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){F&&C.log("[Tracing] Adding an event to span:",e);const s=Yo(n)?n:r||ge(),i=Yo(n)?{}:n||{},o={name:e,time:Rt(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=X();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===_e(this)))return;if(this._isStandaloneSpan){this._sampled?Rm(km([this],e)):(F&&C.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Tr(this).scope||se()).captureEvent(r)}_convertSpanToTransaction(){var f;if(!Jo(ee(this)))return;this._name||(F&&C.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=Tr(this),r=(f=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:f.normalizedRequest;if(this._sampled!==!0)return;const i=fr(this).filter(d=>d!==this&&!Nm(d)).map(d=>ee(d)).filter(Jo),o=this._attributes[Ue];delete this._attributes[$o],i.forEach(d=>{delete d.data[$o]});const a={contexts:{trace:nm(this)},spans:i.length>Ko?i.sort((d,p)=>d.start_timestamp-p.start_timestamp).slice(0,Ko):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:st(this)},request:r,...o&&{transaction_info:{source:o}}},c=Go(this._events);return c&&Object.keys(c).length&&(F&&C.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Yo(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Jo(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Nm(t){return t instanceof Wr&&t.isStandaloneSpan()}function Rm(t){const e=X();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function Mm(t,e,n=()=>{},r=()=>{}){let s;try{s=t()}catch(i){throw e(i),n(),i}return Am(s,e,n,r)}function Am(t,e,n,r){return un(t)?t.then(s=>(n(),r(s),s),s=>{throw e(s),n(),s}):(n(),r(t),t)}function Lm(t,e,n){if(!He(t))return[!1];let r,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),r=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,r=!0);const i=Ot(s);if(i===void 0)return F&&C.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return F&&C.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||F&&C.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const Zc="__SENTRY_SUPPRESS_TRACING__";function Om(t,e){const n=Ei();if(n.startSpan)return n.startSpan(t,e);const r=tl(t),{forceTransaction:s,parentSpan:i,scope:o}=t,a=o==null?void 0:o.clone();return Vr(a,()=>jm(i)(()=>{const l=se(),f=nl(l,i),p=t.onlyIfParent&&!f?new ft:el({parentSpan:f,spanArguments:r,forceTransaction:s,scope:l});return en(l,p),Mm(()=>e(p),()=>{const{status:h}=ee(p);p.isRecording()&&(!h||h==="ok")&&p.setStatus({code:pe,message:"internal_error"})},()=>{p.end()})}))}function mn(t){const e=Ei();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=tl(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?o=>Vr(t.scope,o):s!==void 0?o=>xi(s,o):o=>o())(()=>{const o=se(),a=nl(o,s);return t.onlyIfParent&&!a?new ft:el({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function xi(t,e){const n=Ei();return n.withActiveSpan?n.withActiveSpan(t,e):Vr(r=>(en(r,t||void 0),e(r)))}function el({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!He()){const o=new ft;if(n||!t){const a={sampled:"false",sample_rate:"0",transaction:e.name,...st(o)};pr(o,a)}return o}const s=qe();let i;if(t&&!n)i=Pm(t,r,e),qc(t,i);else if(t){const o=st(t),{traceId:a,spanId:c}=t.spanContext(),l=yt(t);i=Xo({traceId:a,parentSpanId:c,...e},r,l),pr(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:l}={...s.getPropagationContext(),...r.getPropagationContext()};i=Xo({traceId:o,parentSpanId:c,...e},r,l),a&&pr(i,a)}return Im(i),$h(i,r,s),i}function tl(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=Rt(t.startTime),delete r.startTime,r}return n}function Ei(){const t=Dt();return fn(t)}function Xo(t,e,n){var m;const r=X(),s=(r==null?void 0:r.getOptions())||{},{name:i=""}=t,o={spanAttributes:{...t.attributes},spanName:i,parentSampled:n};r==null||r.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,l=e.getPropagationContext(),[f,d,p]=e.getScopeData().sdkProcessingMetadata[Zc]?[!1]:Lm(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:Ot((m=l.dsc)==null?void 0:m.sample_rate)},l.sampleRand),h=new Wr({...t,attributes:{[Ue]:"custom",[mi]:d!==void 0&&p?d:void 0,...c},sampled:f});return!f&&r&&(F&&C.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",h),h}function Pm(t,e,n){const{spanId:r,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[Zc]?!1:yt(t),o=i?new Wr({...n,parentSpanId:r,traceId:s,sampled:i}):new ft({traceId:s});qc(t,o);const a=X();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function nl(t,e){if(e)return e;if(e===null)return;const n=wr(t);if(!n)return;const r=X();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?_e(n):n}function jm(t){return t!==void 0?e=>xi(t,e):e=>e()}const hr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Dm="heartbeatFailed",Fm="idleTimeout",$m="finalTimeout",Bm="externalFinish";function rl(t,e={}){const n=new Map;let r=!1,s,i=Bm,o=!e.disableAutoFinish;const a=[],{idleTimeout:c=hr.idleTimeout,finalTimeout:l=hr.finalTimeout,childSpanTimeout:f=hr.childSpanTimeout,beforeSpanEnd:d,trimIdleSpanEndTimestamp:p=!0}=e,h=X();if(!h||!He()){const k=new ft,b={sample_rate:"0",sampled:"false",...st(k)};return pr(k,b),k}const m=se(),y=xe(),_=Um(t);_.end=new Proxy(_.end,{apply(k,b,x){if(d&&d(_),b instanceof ft)return;const[g,...E]=x,v=g||ge(),I=Rt(v),N=fr(_).filter($=>$!==_),U=ee(_);if(!N.length||!p)return A(I),Reflect.apply(k,b,[I,...E]);const R=h.getOptions().ignoreSpans,L=N==null?void 0:N.reduce(($,B)=>{const G=ee(B);return!G.timestamp||R&&kr(G,R)?$:$?Math.max($,G.timestamp):G.timestamp},void 0),O=U.start_timestamp,j=Math.min(O?O+l/1e3:1/0,Math.max(O||-1/0,Math.min(I,L||1/0)));return A(j),Reflect.apply(k,b,[j,...E])}});function T(){s&&(clearTimeout(s),s=void 0)}function w(k){T(),s=setTimeout(()=>{!r&&n.size===0&&o&&(i=Fm,_.end(k))},c)}function D(k){s=setTimeout(()=>{!r&&o&&(i=Dm,_.end(k))},f)}function P(k){T(),n.set(k,!0);const b=ge();D(b+f/1e3)}function M(k){if(n.has(k)&&n.delete(k),n.size===0){const b=ge();w(b+c/1e3)}}function A(k){r=!0,n.clear(),a.forEach(I=>I()),en(m,y);const b=ee(_),{start_timestamp:x}=b;if(!x)return;b.data[Nn]||_.setAttribute(Nn,i),C.log(`[Tracing] Idle span "${b.op}" finished`);const E=fr(_).filter(I=>I!==_);let v=0;E.forEach(I=>{I.isRecording()&&(I.setStatus({code:pe,message:"cancelled"}),I.end(k),F&&C.log("[Tracing] Cancelling span since span ended early",JSON.stringify(I,void 0,2)));const N=ee(I),{timestamp:U=0,start_timestamp:R=0}=N,L=R<=k,O=(l+c)/1e3,j=U-R<=O;if(F){const $=JSON.stringify(I,void 0,2);L?j||C.log("[Tracing] Discarding span since it finished after idle span final timeout",$):C.log("[Tracing] Discarding span since it happened after idle span was finished",$)}(!j||!L)&&(cm(_,I),v++)}),v>0&&_.setAttribute("sentry.idle_span_discarded_spans",v)}return a.push(h.on("spanStart",k=>{if(r||k===_||ee(k).timestamp||k instanceof Wr&&k.isStandaloneSpan())return;fr(_).includes(k)&&P(k.spanContext().spanId)})),a.push(h.on("spanEnd",k=>{r||M(k.spanContext().spanId)})),a.push(h.on("idleSpanEnableAutoFinish",k=>{k===_&&(o=!0,w(),n.size&&D())})),e.disableAutoFinish||w(),setTimeout(()=>{r||(_.setStatus({code:pe,message:"deadline_exceeded"}),i=$m,_.end())},l),_}function Um(t){const e=mn(t);return en(se(),e),F&&C.log("[Tracing] Started span is an idle span"),e}const ps=0,Qo=1,Zo=2;function qr(t){return new Rn(e=>{e(t)})}function vi(t){return new Rn((e,n)=>{n(t)})}class Rn{constructor(e){this._state=ps,this._handlers=[],this._runExecutor(e)}then(e,n){return new Rn((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Rn((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ps)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Qo&&n[1](this._value),this._state===Zo&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(i,o)=>{if(this._state===ps){if(un(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(Qo,i)},s=i=>{n(Zo,i)};try{e(r,s)}catch(i){s(i)}}}function Hm(t,e,n,r=0){try{const s=Bs(e,n,t,r);return un(s)?s:qr(s)}catch(s){return vi(s)}}function Bs(t,e,n,r){const s=n[r];if(!t||!s)return t;const i=s({...t},e);return F&&i===null&&C.log(`Event processor "${s.id||"?"}" dropped event`),un(i)?i.then(o=>Bs(o,e,n,r+1)):Bs(i,e,n,r+1)}function zm(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;Vm(t,e),r&&Gm(t,r),Km(t,n),Wm(t,s),qm(t,i)}function ea(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:f,attachments:d,propagationContext:p,transactionName:h,span:m}=e;Zn(t,"extra",n),Zn(t,"tags",r),Zn(t,"user",s),Zn(t,"contexts",i),t.sdkProcessingMetadata=Dn(t.sdkProcessingMetadata,a,2),o&&(t.level=o),h&&(t.transactionName=h),m&&(t.span=m),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),f.length&&(t.eventProcessors=[...t.eventProcessors,...f]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function Zn(t,e,n){t[e]=Dn(t[e],n,1)}function Vm(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function Wm(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function qm(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Gm(t,e){t.contexts={trace:rm(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:st(e),...t.sdkProcessingMetadata};const n=_e(e),r=ee(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function Km(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let Ke,ta,na,ct;function Ym(t){const e=Z._sentryDebugIds,n=Z._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],s=n?Object.keys(n):[];if(ct&&r.length===ta&&s.length===na)return ct;ta=r.length,na=s.length,ct={},Ke||(Ke={});const i=(o,a)=>{for(const c of o){const l=a[c],f=Ke==null?void 0:Ke[c];if(f&&ct&&l)ct[f[0]]=l,Ke&&(Ke[c]=[f[0],l]);else if(l){const d=t(c);for(let p=d.length-1;p>=0;p--){const h=d[p],m=h==null?void 0:h.filename;if(m&&ct&&Ke){ct[m]=l,Ke[c]=[m,l];break}}}}};return e&&i(r,e),n&&i(s,n),ct}function sl(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||Ie(),timestamp:e.timestamp||$t()},l=n.integrations||t.integrations.map(_=>_.name);Jm(c,t),Zm(c,l),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&Xm(c,t.stackParser);const f=tg(r,n.captureContext);n.mechanism&&Qt(c,n.mechanism);const d=s?s.getEventProcessors():[],p=Ah().getScopeData();if(i){const _=i.getScopeData();ea(p,_)}if(f){const _=f.getScopeData();ea(p,_)}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),zm(c,p);const m=[...d,...p.eventProcessors];return Hm(m,c,n).then(_=>(_&&Qm(_),typeof o=="number"&&o>0?eg(_,o,a):_))}function Jm(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;t.environment=t.environment||n||Si,!t.release&&r&&(t.release=r),!t.dist&&s&&(t.dist=s);const o=t.request;o!=null&&o.url&&(o.url=vr(o.url,i))}function Xm(t,e){var r,s;const n=Ym(e);(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function Qm(t){var r,s;const e={};if((s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?e[c.abs_path]=c.debug_id:c.filename&&(e[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([i,o])=>{n.push({type:"sourcemap",code_file:i,debug_id:o})})}function Zm(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function eg(t,e,n){var s,i;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:$e(o.data,e,n)}}))},...t.user&&{user:$e(t.user,e,n)},...t.contexts&&{contexts:$e(t.contexts,e,n)},...t.extra&&{extra:$e(t.extra,e,n)}};return(s=t.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=$e(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(o=>({...o,...o.data&&{data:$e(o.data,e,n)}}))),(i=t.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=$e(t.contexts.flags,3,n)),r}function tg(t,e){if(!e)return t;const n=t?t.clone():new We;return n.update(e),n}function ng(t){if(t)return rg(t)?{captureContext:t}:ig(t)?{captureContext:t}:t}function rg(t){return t instanceof We||typeof t=="function"}const sg=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function ig(t){return Object.keys(t).some(e=>sg.includes(e))}function il(t,e){return se().captureException(t,ng(e))}function ol(t,e){return se().captureEvent(t,e)}function al(t,e){qe().setContext(t,e)}function og(){const t=X();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function ag(t){qe().addEventProcessor(t)}function ra(t){const e=qe(),n=se(),{userAgent:r}=Z.navigator||{},s=Eh({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&Zt(i,{status:"exited"}),cl(),e.setSession(s),s}function cl(){const t=qe(),n=se().getSession()||t.getSession();n&&vh(n),ll(),t.setSession()}function ll(){const t=qe(),e=X(),n=t.getSession();n&&e&&e.captureSession(n)}function sa(t=!1){if(t){cl();return}ll()}const cg="7";function lg(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function ug(t){return`${lg(t)}${t.projectId}/envelope/`}function dg(t,e){const n={sentry_version:cg};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function fg(t,e,n){return e||`${ug(t)}?${dg(t,n)}`}const ia=[];function pg(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function hg(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const s=n(e);r=Array.isArray(s)?s:[s]}else r=e;return pg(r)}function mg(t,e){const n={};return e.forEach(r=>{r&&ul(t,r,n)}),n}function oa(t,e){for(const n of e)n!=null&&n.afterAllSetup&&n.afterAllSetup(t)}function ul(t,e,n){if(n[e.name]){F&&C.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,ia.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),ia.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,o)=>r(i,o,t),{id:e.name});t.addEventProcessor(s)}F&&C.log(`Integration installed: ${e.name}`)}function gg(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function yg(t,e,n,r){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=hn(r)),_t(s,[gg(t)])}function dl(t,e){const n=e??_g(t)??[];if(n.length===0)return;const r=t.getOptions(),s=yg(n,r._metadata,r.tunnel,t.getDsn());fl().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function _g(t){return fl().get(t)}function fl(){return cn("clientToLogBufferMap",()=>new WeakMap)}function Sg(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function bg(t,e,n,r){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=hn(r)),_t(s,[Sg(t)])}function pl(t,e){const n=e??xg(t)??[];if(n.length===0)return;const r=t.getOptions(),s=bg(n,r._metadata,r.tunnel,t.getDsn());hl().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(s)}function xg(t){return hl().get(t)}function hl(){return cn("clientToMetricBufferMap",()=>new WeakMap)}function Eg(t,e,n){const r=[{type:"client_report"},{timestamp:$t(),discarded_events:t}];return _t(e?{dsn:e}:{},[r])}function ml(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n!=null&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function vg(t){var c;const{trace_id:e,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=((c=t.contexts)==null?void 0:c.trace)??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:o==null?void 0:o[gi],exclusive_time:o==null?void 0:o[pn],measurements:t.measurements,is_segment:!0}}function wg(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[gi]:t.profile_id},...t.exclusive_time&&{[pn]:t.exclusive_time}}}},measurements:t.measurements}}const aa="Not capturing exception because it's already been captured.",ca="Discarded session because of missing or non-string release",gl=Symbol.for("SentryInternalError"),yl=Symbol.for("SentryDoNotSendEventError"),Tg=5e3;function mr(t){return{message:t,[gl]:!0}}function hs(t){return{message:t,[yl]:!0}}function la(t){return!!t&&typeof t=="object"&&gl in t}function ua(t){return!!t&&typeof t=="object"&&yl in t}function da(t,e,n,r,s){let i=0,o;t.on(n,()=>{i=0,clearTimeout(o)}),t.on(e,a=>{i+=r(a),i>=8e5?s(t):(clearTimeout(o),o=setTimeout(()=>{s(t)},Tg))}),t.on("flush",()=>{s(t)})}class kg{constructor(e){var n;if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Qh(e.dsn):F&&C.warn("No DSN provided, client will not send events."),this._dsn){const r=fg(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}this._options.enableLogs&&da(this,"afterCaptureLog","flushLogs",Rg,dl),(n=this._options._experiments)!=null&&n.enableMetrics&&da(this,"afterCaptureMetric","flushMetrics",Ng,pl)}captureException(e,n,r){const s=Ie();if(jo(e))return F&&C.log(aa),s;const i={event_id:s,...n};return this._process(this.eventFromException(e,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(e,n,r,s){const i={event_id:Ie(),...r},o=fi(e)?e:String(e),a=Xt(e)?this.eventFromMessage(o,n,i):this.eventFromException(e,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(e,n,r){const s=Ie();if(n!=null&&n.originalException&&jo(n.originalException))return F&&C.log(aa),s;const i={event_id:s,...n},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,a||r,c)),i.event_id}captureSession(e){this.sendSession(e),Zt(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(e),s=await n.flush(e);return r&&s}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];ul(this,e,this._integrations),n||oa(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Tm(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=ym(r,xm(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",e,s))}sendSession(e){const{release:n,environment:r=Si}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!n){F&&C.warn(ca);return}i.release=i.release||n,i.environment=i.environment||r,e.attrs=i}else{if(!e.release&&!n){F&&C.warn(ca);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=wm(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s=`${e}:${n}`;F&&C.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||new Set,s=(...i)=>n(...i);return r.add(s),()=>{r.delete(s)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(s=>s(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return F&&C.error("Error while sending envelope:",n),{}}return F&&C.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=mg(this,e),oa(this,e)}_updateSessionFromEvent(e,n){var c;let r=n.level==="fatal",s=!1;const i=(c=n.exception)==null?void 0:c.values;if(i){s=!0;for(const l of i){const f=l.mechanism;if((f==null?void 0:f.handled)===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Zt(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||s.setLastEventId(e.event_id||n.event_id),sl(i,e,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Lh(r),...a.contexts};const c=Yc(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r=se(),s=qe()){return F&&Us(e)&&C.log(`Captured error event \`${ml(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,s).then(i=>i.event_id,i=>{F&&(ua(i)?C.log(i.message):la(i)?C.warn(i.message):C.warn(i))})}_processEvent(e,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=_l(e),c=Us(e),l=e.type||"error",f=`before send for type \`${l}\``,d=typeof o>"u"?void 0:Ot(o);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),vi(hs(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const p=l==="replay_event"?"replay":l;return this._prepareEvent(e,n,r,s).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",p),hs("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return h;const y=Cg(this,i,h,n);return Ig(y,f)}).then(h=>{var _;if(h===null){if(this.recordDroppedEvent("before_send",p),a){const w=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",w)}throw hs(`${f} returned \`null\`, will not send event.`)}const m=r.getSession()||s.getSession();if(c&&m&&this._updateSessionFromEvent(m,h),a){const T=((_=h.sdkProcessingMetadata)==null?void 0:_.spanCountBeforeProcessing)||0,w=h.spans?h.spans.length:0,D=T-w;D>0&&this.recordDroppedEvent("before_send","span",D)}const y=h.transaction_info;if(a&&y&&h.transaction!==e.transaction){const T="custom";h.transaction_info={...y,source:T}}return this.sendEvent(h,n),h}).then(null,h=>{throw ua(h)||la(h)?h:(this.captureException(h,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:h}),mr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){F&&C.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){F&&C.log("No outcomes to send");return}if(!this._dsn){F&&C.log("No dsn provided, will not send outcomes");return}F&&C.log("Sending outcomes:",e);const n=Eg(e,this._options.tunnel&&hn(this._dsn));this.sendEnvelope(n)}}function Ig(t,e){const n=`${e} must return \`null\` or a valid event.`;if(un(t))return t.then(r=>{if(!Cn(r)&&r!==null)throw mr(n);return r},r=>{throw mr(`${e} rejected with ${r}`)});if(!Cn(t)&&t!==null)throw mr(n);return t}function Cg(t,e,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=e;let c=n;if(Us(c)&&s)return s(c,r);if(_l(c)){if(o||a){const l=vg(c);if(a!=null&&a.length&&kr(l,a))return null;if(o){const f=o(l);f?c=Dn(n,wg(f)):Ds()}if(c.spans){const f=[],d=c.spans;for(const h of d){if(a!=null&&a.length&&kr(h,a)){um(d,h);continue}if(o){const m=o(h);m?f.push(m):(Ds(),f.push(h))}else f.push(h)}const p=c.spans.length-f.length;p&&t.recordDroppedEvent("before_send","span",p),c.spans=f}}if(i){if(c.spans){const l=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return i(c,r)}}return c}function Us(t){return t.type===void 0}function _l(t){return t.type==="transaction"}function Ng(t){let e=0;return t.name&&(e+=t.name.length*2),typeof t.value=="string"?e+=t.value.length*2:e+=8,e+Sl(t.attributes)}function Rg(t){let e=0;return t.message&&(e+=t.message.length*2),e+Sl(t.attributes)}function Sl(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*fa(n[0]):Xt(n)?e+=fa(n):e+=100}),e}function fa(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function Mg(t,e){e.debug===!0&&(F?C.enable():Ft(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),se().update(e.initialScope);const r=new t(e);return Ag(r),r.init(),r}function Ag(t){se().setClient(t)}const bl=Symbol.for("SentryBufferFullError");function Lg(t=100){const e=new Set;function n(){return e.size<t}function r(o){e.delete(o)}function s(o){if(!n())return vi(bl);const a=o();return e.add(a),a.then(()=>r(a),()=>r(a)),a}function i(o){if(!e.size)return qr(!0);const a=Promise.allSettled(Array.from(e)).then(()=>!0);if(!o)return a;const c=[a,new Promise(l=>setTimeout(()=>l(!1),o))];return Promise.race(c)}return{get $(){return Array.from(e)},add:s,drain:i}}const Og=60*1e3;function Pg(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?Og:r-e}function jg(t,e){return t[e]||t.all||0}function xl(t,e,n=Date.now()){return jg(t,e)>n}function El(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,l,,,f]=a.split(":",5),d=parseInt(c,10),p=(isNaN(d)?60:d)*1e3;if(!l)s.all=r+p;else for(const h of l.split(";"))h==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(s[h]=r+p):s[h]=r+p}else o?s.all=r+Pg(o,r):e===429&&(s.all=r+60*1e3);return s}const Dg=64;function Fg(t,e,n=Lg(t.bufferSize||Dg)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(Wo(o,(d,p)=>{const h=qo(p);xl(r,h)?t.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return Promise.resolve({});const c=_t(o[0],a),l=d=>{Wo(c,(p,h)=>{t.recordDroppedEvent(d,qo(h))})},f=()=>e({body:_m(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&F&&C.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=El(r,d),d),d=>{throw l("network_error"),F&&C.error("Encountered error running transport request:",d),d});return n.add(f).then(d=>d,d=>{if(d===bl)return F&&C.error("Skipped sending event because buffer is full."),l("queue_overflow"),Promise.resolve({});throw d})}return{send:i,flush:s}}const $g="thismessage:/";function wi(t){return"isRelative"in t}function Ti(t,e){const n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=n?$g:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const s=new URL(t,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function Bg(t){if(wi(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function At(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function Ug(t){return t.split(/[?#]/,1)[0]}function Hg(t,e){const n=e==null?void 0:e.getDsn(),r=e==null?void 0:e.getOptions().tunnel;return Vg(t,n)||zg(t,r)}function zg(t,e){return e?pa(t)===pa(e):!1}function Vg(t,e){const n=Ti(t);return!n||wi(n)?!1:e?n.host.includes(e.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function pa(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function Wg(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function vl(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Nt})),version:Nt}),t._metadata=s}function wl(t={}){const e=t.client||X();if(!og()||!e)return{};const n=Dt(),r=fn(n);if(r.getTraceData)return r.getTraceData(t);const s=t.scope||se(),i=t.span||xe(),o=i?sm(i):qg(s),a=i?st(i):Yc(e,s),c=Hh(a);if(!Bc.test(o))return C.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const f={"sentry-trace":o,baggage:c};if(t.propagateTraceparent){const d=i?im(i):Gg(s);d&&(f.traceparent=d)}return f}function qg(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Uc(e,r,n)}function Gg(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Hc(e,r,n)}function Kg(t,e,n){let r,s,i;const o=n!=null&&n.maxWait?Math.max(n.maxWait,e):0,a=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function c(){return l(),r=t(),r}function l(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function f(){return s!==void 0||i!==void 0?c():r}function d(){return s&&clearTimeout(s),s=a(c,e),o&&i===void 0&&(i=a(c,o)),r}return d.cancel=l,d.flush=f,d}const Yg=100;function it(t,e){const n=X(),r=qe();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Yg}=n.getOptions();if(i<=0)return;const a={timestamp:$t(),...t},c=s?Ft(()=>s(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,i))}let ha;const Jg="FunctionToString",ma=new WeakMap,Xg=()=>({name:Jg,setupOnce(){ha=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=hi(this),n=ma.has(X())&&e!==void 0?e:this;return ha.apply(n,t)}}catch{}},setup(t){ma.set(t,!0)}}),Qg=Xg,Zg=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ey="EventFilters",ty=(t={})=>{let e;return{name:ey,setup(n){const r=n.getOptions();e=ga(t,r)},processEvent(n,r,s){if(!e){const i=s.getOptions();e=ga(t,i)}return ry(n,e)?null:n}}},ny=(t={})=>({...ty(t),name:"InboundFilters"});function ga(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Zg],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function ry(t,e){if(t.type){if(t.type==="transaction"&&iy(t,e.ignoreTransactions))return F&&C.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Et(t)}`),!0}else{if(sy(t,e.ignoreErrors))return F&&C.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Et(t)}`),!0;if(ly(t))return F&&C.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Et(t)}`),!0;if(oy(t,e.denyUrls))return F&&C.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Et(t)}.
Url: ${Ir(t)}`),!0;if(!ay(t,e.allowUrls))return F&&C.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Et(t)}.
Url: ${Ir(t)}`),!0}return!1}function sy(t,e){return e!=null&&e.length?ml(t).some(n=>Xe(n,e)):!1}function iy(t,e){if(!(e!=null&&e.length))return!1;const n=t.transaction;return n?Xe(n,e):!1}function oy(t,e){if(!(e!=null&&e.length))return!1;const n=Ir(t);return n?Xe(n,e):!1}function ay(t,e){if(!(e!=null&&e.length))return!0;const n=Ir(t);return n?Xe(n,e):!0}function cy(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ir(t){var e,n;try{const r=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(i=>{var o,a,c;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((c=(a=i.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),s=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return s?cy(s):null}catch{return F&&C.error(`Cannot extract url for event ${Et(t)}`),null}}function ly(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)!=null&&n.length?!t.message&&!t.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function uy(t,e,n,r,s,i){var a;if(!((a=s.exception)!=null&&a.values)||!i||!tt(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=Hs(t,e,r,i.originalException,n,s.exception.values,o,0))}function Hs(t,e,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(tt(r[s],Error)){ya(o,a);const l=t(e,r[s]),f=c.length;_a(l,s,f,a),c=Hs(t,e,n,r[s],s,[l,...c],l,f)}return Array.isArray(r.errors)&&r.errors.forEach((l,f)=>{if(tt(l,Error)){ya(o,a);const d=t(e,l),p=c.length;_a(d,`errors[${f}]`,p,a),c=Hs(t,e,n,l,s,[d,...c],d,p)}}),c}function ya(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function _a(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function dy(t){const e="console";mt(e,t),gt(e,fy)}function fy(){"console"in Z&&Zp.forEach(function(t){t in Z.console&&we(Z.console,t,function(e){return Er[t]=e,function(...n){Oe("console",{args:n,level:t});const s=Er[t];s==null||s.apply(Z.console,n)}})})}function Tl(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const py="Dedupe",hy=()=>{let t;return{name:py,processEvent(e){if(e.type)return e;try{if(gy(e,t))return F&&C.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},my=hy;function gy(t,e){return e?!!(yy(t,e)||_y(t,e)):!1}function yy(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Il(t,e)||!kl(t,e))}function _y(t,e){const n=Sa(e),r=Sa(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Il(t,e)||!kl(t,e))}function kl(t,e){let n=Ro(t),r=Ro(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Il(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Sa(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function Sy(t,e,n,r,s){if(!t.fetchData)return;const{method:i,url:o}=t.fetchData,a=He()&&e(o);if(t.endTimestamp&&a){const h=t.fetchData.__span;if(!h)return;const m=r[h];m&&(Ey(m,t),by(m,t,s),delete r[h]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:l=!1}=typeof s=="object"?s:{spanOrigin:s},f=!!xe(),d=a&&f?mn(wy(o,i,c)):new ft;if(t.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(t.fetchData.url)){const h=t.args[0],m=t.args[1]||{},y=xy(h,m,He()&&f?d:void 0,l);y&&(t.args[1]=m,m.headers=y)}const p=X();if(p){const h={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};p.emit("beforeOutgoingRequestSpan",d,h)}return d}function by(t,e,n){var s;const r=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;r==null||r(t,{headers:(s=e.response)==null?void 0:s.headers,error:e.error})}function xy(t,e,n,r){const s=wl({span:n,propagateTraceparent:r}),i=s["sentry-trace"],o=s.baggage,a=s.traceparent;if(!i)return;const c=e.headers||(Ic(t)?t.headers:void 0);if(c)if(vy(c)){const l=new Headers(c);if(l.get("sentry-trace")||l.set("sentry-trace",i),r&&a&&!l.get("traceparent")&&l.set("traceparent",a),o){const f=l.get("baggage");f?er(f)||l.set("baggage",`${f},${o}`):l.set("baggage",o)}return l}else if(Array.isArray(c)){const l=[...c];c.find(d=>d[0]==="sentry-trace")||l.push(["sentry-trace",i]),r&&a&&!c.find(d=>d[0]==="traceparent")&&l.push(["traceparent",a]);const f=c.find(d=>d[0]==="baggage"&&er(d[1]));return o&&!f&&l.push(["baggage",o]),l}else{const l="sentry-trace"in c?c["sentry-trace"]:void 0,f="traceparent"in c?c.traceparent:void 0,d="baggage"in c?c.baggage:void 0,p=d?Array.isArray(d)?[...d]:[d]:[],h=d&&(Array.isArray(d)?d.find(y=>er(y)):er(d));o&&!h&&p.push(o);const m={...c,"sentry-trace":l??i,baggage:p.length>0?p.join(","):void 0};return r&&a&&!f&&(m.traceparent=a),m}else return{...s}}function Ey(t,e){var n,r;if(e.response){Pc(t,e.response.status);const s=(r=(n=e.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(s){const i=parseInt(s);i>0&&t.setAttribute("http.response_content_length",i)}}else e.error&&t.setStatus({code:pe,message:"internal_error"});t.end()}function er(t){return t.split(",").some(e=>e.trim().startsWith(yi))}function vy(t){return typeof Headers<"u"&&tt(t,Headers)}function wy(t,e,n){const r=Ti(t);return{name:r?`${e} ${Bg(r)}`:e,attributes:Ty(t,r,e,n)}}function Ty(t,e,n,r){const s={url:t,type:"fetch","http.method":n,[he]:r,[rt]:"http.client"};return e&&(wi(e)||(s["http.url"]=e.href,s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function Cl(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Mn=Z;function ky(){return"history"in Mn&&!!Mn.history}function Iy(){if(!("fetch"in Mn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function zs(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Cy(){var n;if(typeof EdgeRuntime=="string")return!0;if(!Iy())return!1;if(zs(Mn.fetch))return!0;let t=!1;const e=Mn.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(t=zs(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){F&&C.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function Nl(t,e){const n="fetch";mt(n,t),gt(n,()=>Rl(void 0,e))}function Ny(t){const e="fetch-body-resolved";mt(e,t),gt(e,()=>Rl(My))}function Rl(t,e=!1){e&&!Cy()||we(Z,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=Ay(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:ge()*1e3,virtualError:s,headers:Ly(r)};return t||Oe("fetch",{...a}),n.apply(Z,r).then(async c=>(t?t(c):Oe("fetch",{...a,endTimestamp:ge()*1e3,response:c}),c),c=>{if(Oe("fetch",{...a,endTimestamp:ge()*1e3,error:c}),di(c)&&c.stack===void 0&&(c.stack=s.stack,Ce(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const l=new URL(a.fetchData.url);c.message=`${c.message} (${l.host})`}catch{}throw c})}})}async function Ry(t,e){if(t!=null&&t.body){const n=t.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(e(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function My(t){let e;try{e=t.clone()}catch{return}Ry(e,()=>{Oe("fetch-body-resolved",{endTimestamp:ge()*1e3,response:t})})}function Vs(t,e){return!!t&&typeof t=="object"&&!!t[e]}function ba(t){return typeof t=="string"?t:t?Vs(t,"url")?t.url:t.toString?t.toString():"":""}function Ay(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:ba(n),method:Vs(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:ba(e),method:Vs(e,"method")?String(e.method).toUpperCase():"GET"}}function Ly(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Ic(e))return new Headers(e.headers)}catch{}}function Oy(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Py(){return"npm"}function jy(){return!Oy()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function xa(){return typeof window<"u"&&(!jy()||Dy())}function Dy(){const t=Z.process;return(t==null?void 0:t.type)==="renderer"}const te=Z;let Ws=0;function Ml(){return Ws>0}function Fy(){Ws++,setTimeout(()=>{Ws--})}function nn(t,e={}){function n(s){return typeof s=="function"}if(!n(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(hi(t))return t}catch{return t}const r=function(...s){try{const i=s.map(o=>nn(o,e));return t.apply(this,i)}catch(i){throw Fy(),Vr(o=>{o.addEventProcessor(a=>(e.mechanism&&(Os(a,void 0),Qt(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),il(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}Nc(r,t),Ce(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function ki(){const t=dn(),{referrer:e}=te.document||{},{userAgent:n}=te.navigator||{},r={...e&&{Referer:e},...n&&{"User-Agent":n}};return{url:t,headers:r}}function Ii(t,e){const n=Ci(t,e),r={type:zy(e),value:Vy(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function $y(t,e,n,r){const s=X(),i=s==null?void 0:s.getOptions().normalizeDepth,o=Yy(e),a={__serialized__:Jc(e,i)};if(o)return{exception:{values:[Ii(t,o)]},extra:a};const c={exception:{values:[{type:zr(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Gy(e,{isUnhandledRejection:r})}]},extra:a};if(n){const l=Ci(t,n);l.length&&(c.exception.values[0].stacktrace={frames:l})}return c}function ms(t,e){return{exception:{values:[Ii(t,e)]}}}function Ci(t,e){const n=e.stacktrace||e.stack||"",r=Uy(e),s=Hy(e);try{return t(n,r,s)}catch{}return[]}const By=/Minified React error #\d+;/i;function Uy(t){return t&&By.test(t.message)?1:0}function Hy(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Al(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function zy(t){const e=t==null?void 0:t.name;return!e&&Al(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Vy(t){const e=t==null?void 0:t.message;return Al(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Wy(t,e,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,i=Ni(t,e,s,r);return Qt(i),i.level="error",n!=null&&n.event_id&&(i.event_id=n.event_id),qr(i)}function qy(t,e,n="info",r,s){const i=(r==null?void 0:r.syntheticException)||void 0,o=qs(t,e,i,s);return o.level=n,r!=null&&r.event_id&&(o.event_id=r.event_id),qr(o)}function Ni(t,e,n,r,s){let i;if(Tc(e)&&e.error)return ms(t,e.error);if(Ao(e)||uh(e)){const o=e;if("stack"in e)i=ms(t,e);else{const a=o.name||(Ao(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=qs(t,c,n,r),Os(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return di(e)?ms(t,e):Cn(e)||zr(e)?(i=$y(t,e,n,s),Qt(i,{synthetic:!0}),i):(i=qs(t,e,n,r),Os(i,`${e}`),Qt(i,{synthetic:!0}),i)}function qs(t,e,n,r){const s={};if(r&&n){const i=Ci(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),Qt(s,{synthetic:!0})}if(fi(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function Gy(t,{isUnhandledRejection:e}){const n=gh(t),r=e?"promise rejection":"exception";return Tc(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:zr(t)?`Event \`${Ky(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Ky(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Yy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}class Jy extends kg{constructor(e){var c;const n=Xy(e),r=te.SENTRY_SDK_SOURCE||Py();vl(n,"browser",["browser"],r),(c=n._metadata)!=null&&c.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:i,enableLogs:o,_experiments:a}=this._options;te.document&&(i||o||a!=null&&a.enableMetrics)&&te.document.addEventListener("visibilitychange",()=>{te.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&dl(this),a!=null&&a.enableMetrics&&pl(this))}),s&&this.on("beforeSendSession",Wg)}eventFromException(e,n){return Wy(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return qy(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,s)}}function Xy(t){var e;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(e=te.SENTRY_RELEASE)==null?void 0:e.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Pt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,W=Z,Qy=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Bn=(t,e,n,r)=>{let s,i;return o=>{e.value>=0&&(o||r)&&(i=e.value-(s??0),(i||s===void 0)&&(s=e.value,e.delta=i,e.rating=Qy(e.value,n),t(e)))}},Zy=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Un=(t=!0)=>{var n,r;const e=(r=(n=W.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},gn=()=>{const t=Un();return(t==null?void 0:t.activationStart)??0},Hn=(t,e=-1)=>{var i,o;const n=Un();let r="navigate";return n&&((i=W.document)!=null&&i.prerendering||gn()>0?r="prerender":(o=W.document)!=null&&o.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:Zy(),navigationType:r}},gs=new WeakMap;function Ri(t,e){return gs.get(t)||gs.set(t,new e),gs.get(t)}class Cr{constructor(){Cr.prototype.__init.call(this),Cr.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var s;if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,e)}}const yn=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Mi=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let xn=-1;const e_=()=>{var t,e;return((t=W.document)==null?void 0:t.visibilityState)==="hidden"&&!((e=W.document)!=null&&e.prerendering)?0:1/0},Nr=t=>{W.document.visibilityState==="hidden"&&xn>-1&&(xn=t.type==="visibilitychange"?t.timeStamp:0,n_())},t_=()=>{addEventListener("visibilitychange",Nr,!0),addEventListener("prerenderingchange",Nr,!0)},n_=()=>{removeEventListener("visibilitychange",Nr,!0),removeEventListener("prerenderingchange",Nr,!0)},Ai=()=>{var t;if(W.document&&xn<0){const e=gn();xn=(W.document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>e)[0])==null?void 0:t.startTime)??e_(),t_()}return{get firstHiddenTime(){return xn}}},Gr=t=>{var e;(e=W.document)!=null&&e.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},r_=[1800,3e3],s_=(t,e={})=>{Gr(()=>{const n=Ai(),r=Hn("FCP");let s;const o=yn("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-gn(),0),r.entries.push(c),s(!0)))});o&&(s=Bn(t,r,r_,e.reportAllChanges))})},i_=[.1,.25],o_=(t,e={})=>{s_(Mi(()=>{var a,c;const n=Hn("CLS",0);let r;const s=Ri(e,Cr),i=l=>{for(const f of l)s._processEntry(f);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},o=yn("layout-shift",i);o&&(r=Bn(t,n,i_,e.reportAllChanges),(a=W.document)==null||a.addEventListener("visibilitychange",()=>{var l;((l=W.document)==null?void 0:l.visibilityState)==="hidden"&&(i(o.takeRecords()),r(!0))}),(c=W==null?void 0:W.setTimeout)==null||c.call(W,r))}))};let Ll=0,ys=1/0,tr=0;const a_=t=>{t.forEach(e=>{e.interactionId&&(ys=Math.min(ys,e.interactionId),tr=Math.max(tr,e.interactionId),Ll=tr?(tr-ys)/7+1:0)})};let Gs;const Ol=()=>Gs?Ll:performance.interactionCount||0,c_=()=>{"interactionCount"in performance||Gs||(Gs=yn("event",a_,{type:"event",buffered:!0,durationThreshold:0}))},_s=10;let Pl=0;const l_=()=>Ol()-Pl;class Rr{constructor(){Rr.prototype.__init.call(this),Rr.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Pl=Ol(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(l_()/50));return this._longestInteractionList[e]}_processEntry(e){var s,i;if((s=this._onBeforeProcessingEntry)==null||s.call(this,e),!(e.interactionId||e.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<_s||e.duration>n._latency){if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,a)=>a._latency-o._latency),this._longestInteractionList.length>_s){const o=this._longestInteractionList.splice(_s);for(const a of o)this._longestInteractionMap.delete(a.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,r)}}}const Li=t=>{const e=n=>{var r;(n.type==="pagehide"||((r=W.document)==null?void 0:r.visibilityState)==="hidden")&&t(n)};W.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},jl=t=>{var n;const e=W.requestIdleCallback||W.setTimeout;((n=W.document)==null?void 0:n.visibilityState)==="hidden"?t():(t=Mi(t),e(t),Li(t))},u_=[200,500],d_=40,f_=(t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Gr(()=>{c_();const n=Hn("INP");let r;const s=Ri(e,Rr),i=a=>{jl(()=>{for(const l of a)s._processEntry(l);const c=s._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},o=yn("event",i,{durationThreshold:e.durationThreshold??d_});r=Bn(t,n,u_,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Li(()=>{i(o.takeRecords()),r(!0)}))})};class p_{_processEntry(e){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,e)}}const h_=[2500,4e3],m_=(t,e={})=>{Gr(()=>{const n=Ai(),r=Hn("LCP");let s;const i=Ri(e,p_),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const l of c)i._processEntry(l),l.startTime<n.firstHiddenTime&&(r.value=Math.max(l.startTime-gn(),0),r.entries=[l],s())},a=yn("largest-contentful-paint",o);if(a){s=Bn(t,r,h_,e.reportAllChanges);const c=Mi(()=>{o(a.takeRecords()),a.disconnect(),s(!0)});for(const l of["keydown","click","visibilitychange"])W.document&&addEventListener(l,()=>jl(c),{capture:!0,once:!0})}})},g_=[800,1800],Ks=t=>{var e,n;(e=W.document)!=null&&e.prerendering?Gr(()=>Ks(t)):((n=W.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>Ks(t),!0):setTimeout(t)},y_=(t,e={})=>{const n=Hn("TTFB"),r=Bn(t,n,g_,e.reportAllChanges);Ks(()=>{const s=Un();s&&(n.value=Math.max(s.responseStart-gn(),0),n.entries=[s],r(!0))})},En={},Mr={};let Dl,Fl,$l,Bl;function Oi(t,e=!1){return Kr("cls",t,S_,Dl,e)}function Pi(t,e=!1){return Kr("lcp",t,b_,Fl,e)}function __(t){return Kr("ttfb",t,x_,$l)}function Ul(t){return Kr("inp",t,E_,Bl)}function jt(t,e){return Hl(t,e),Mr[t]||(v_(t),Mr[t]=!0),zl(t,e)}function zn(t,e){const n=En[t];if(n!=null&&n.length)for(const r of n)try{r(e)}catch(s){Pt&&C.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${et(r)}
Error:`,s)}}function S_(){return o_(t=>{zn("cls",{metric:t}),Dl=t},{reportAllChanges:!0})}function b_(){return m_(t=>{zn("lcp",{metric:t}),Fl=t},{reportAllChanges:!0})}function x_(){return y_(t=>{zn("ttfb",{metric:t}),$l=t})}function E_(){return f_(t=>{zn("inp",{metric:t}),Bl=t})}function Kr(t,e,n,r,s=!1){Hl(t,e);let i;return Mr[t]||(i=n(),Mr[t]=!0),r&&e({metric:r}),zl(t,e,s?i:void 0)}function v_(t){const e={};t==="event"&&(e.durationThreshold=0),yn(t,n=>{zn(t,{entries:n})},e)}function Hl(t,e){En[t]=En[t]||[],En[t].push(e)}function zl(t,e,n){return()=>{n&&n();const r=En[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function w_(t){return"duration"in t}function Ss(t){return typeof t=="number"&&isFinite(t)}function pt(t,e,n,{...r}){const s=ee(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),xi(t,()=>{const i=mn({startTime:e,...r});return i&&i.end(n),i})}function ji(t){var _;const e=X();if(!e)return;const{name:n,transaction:r,attributes:s,startTime:i}=t,{release:o,environment:a,sendDefaultPii:c}=e.getOptions(),l=e.getIntegrationByName("Replay"),f=l==null?void 0:l.getReplayId(),d=se(),p=d.getUser(),h=p!==void 0?p.email||p.id||p.ip_address:void 0;let m;try{m=d.getScopeData().contexts.profile.profile_id}catch{}const y={release:o,environment:a,user:h||void 0,profile_id:m||void 0,replay_id:f||void 0,transaction:r,"user_agent.original":(_=W.navigator)==null?void 0:_.userAgent,"client.address":c?"{{auto}}":void 0,...s};return mn({name:n,attributes:y,startTime:i,experimental:{standalone:!0}})}function Vn(){return W.addEventListener&&W.performance}function le(t){return t/1e3}function T_(t){let e="unknown",n="unknown",r="";for(const s of t){if(s==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=s}return r===t&&(e=r),{name:e,version:n}}function Vl(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function Wl(t,e){let n,r=!1;function s(a){!r&&n&&e(a,n),r=!0}Li(()=>{s("pagehide")});const i=t.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(s("navigation"),i(),o())}),o=t.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,o()})}function k_(t){let e=0,n;if(!Vl("layout-shift"))return;const r=Oi(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,n=i)},!0);Wl(t,(s,i)=>{I_(e,n,i,s),r()})}function I_(t,e,n,r){var l;Pt&&C.log(`Sending CLS span (${t})`);const s=e?le((Te()||0)+e.startTime):ge(),i=se().getScopeData().transactionName,o=e?Pe((l=e.sources[0])==null?void 0:l.node):"Layout shift",a={[he]:"auto.http.browser.cls",[rt]:"ui.webvital.cls",[pn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e!=null&&e.sources&&e.sources.forEach((f,d)=>{a[`cls.source.${d+1}`]=Pe(f.node)});const c=ji({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Fn]:"",[$n]:t}),c.end(s))}function C_(t){let e=0,n;if(!Vl("largest-contentful-paint"))return;const r=Pi(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,n=i)},!0);Wl(t,(s,i)=>{N_(e,n,i,s),r()})}function N_(t,e,n,r){Pt&&C.log(`Sending LCP span (${t})`);const s=le((Te()||0)+((e==null?void 0:e.startTime)||0)),i=se().getScopeData().transactionName,o=e?Pe(e.element):"Largest contentful paint",a={[he]:"auto.http.browser.lcp",[rt]:"ui.webvital.lcp",[pn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e&&(e.element&&(a["lcp.element"]=Pe(e.element)),e.id&&(a["lcp.id"]=e.id),e.url&&(a["lcp.url"]=e.url.trim().slice(0,200)),e.loadTime!=null&&(a["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(a["lcp.renderTime"]=e.renderTime),e.size!=null&&(a["lcp.size"]=e.size));const c=ji({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Fn]:"millisecond",[$n]:t}),c.end(s))}function Ae(t){return t&&((Te()||performance.timeOrigin)+t)/1e3}function ql(t){var n;const e={};if(t.nextHopProtocol!=null){const{name:r,version:s}=T_(t.nextHopProtocol);e["network.protocol.version"]=s,e["network.protocol.name"]=r}return Te()||(n=Vn())!=null&&n.timeOrigin?R_({...e,"http.request.redirect_start":Ae(t.redirectStart),"http.request.redirect_end":Ae(t.redirectEnd),"http.request.worker_start":Ae(t.workerStart),"http.request.fetch_start":Ae(t.fetchStart),"http.request.domain_lookup_start":Ae(t.domainLookupStart),"http.request.domain_lookup_end":Ae(t.domainLookupEnd),"http.request.connect_start":Ae(t.connectStart),"http.request.secure_connection_start":Ae(t.secureConnectionStart),"http.request.connection_end":Ae(t.connectEnd),"http.request.request_start":Ae(t.requestStart),"http.request.response_start":Ae(t.responseStart),"http.request.response_end":Ae(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0}):e}function R_(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!=null))}const M_=2147483647;let Ea=0,Be={},ve,qt;function A_({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=Vn();if(r&&Te()){r.mark&&W.performance.mark("sentry-tracing-init");const s=e?C_(n):D_(),i=F_(),o=t?k_(n):j_();return()=>{s==null||s(),i(),o==null||o()}}return()=>{}}function L_(){jt("longtask",({entries:t})=>{const e=xe();if(!e)return;const{op:n,start_timestamp:r}=ee(e);for(const s of t){const i=le(Te()+s.startTime),o=le(s.duration);n==="navigation"&&r&&i<r||pt(e,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[he]:"auto.ui.browser.metrics"}})}})}function O_(){new PerformanceObserver(e=>{const n=xe();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const s=le(Te()+r.startTime),{start_timestamp:i,op:o}=ee(n);if(o==="navigation"&&i&&s<i)continue;const a=le(r.duration),c={[he]:"auto.ui.browser.metrics"},l=r.scripts[0],{invoker:f,invokerType:d,sourceURL:p,sourceFunctionName:h,sourceCharPosition:m}=l;c["browser.script.invoker"]=f,c["browser.script.invoker_type"]=d,p&&(c["code.filepath"]=p),h&&(c["code.function"]=h),m!==-1&&(c["browser.script.source_char_position"]=m),pt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function P_(){jt("event",({entries:t})=>{const e=xe();if(e){for(const n of t)if(n.name==="click"){const r=le(Te()+n.startTime),s=le(n.duration),i={name:Pe(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[he]:"auto.ui.browser.metrics"}},o=Cc(n.target);o&&(i.attributes["ui.component_name"]=o),pt(e,r,r+s,i)}}})}function j_(){return Oi(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Be.cls={value:t.value,unit:""},qt=e)},!0)}function D_(){return Pi(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Be.lcp={value:t.value,unit:"millisecond"},ve=e)},!0)}function F_(){return __(({metric:t})=>{t.entries[t.entries.length-1]&&(Be.ttfb={value:t.value,unit:"millisecond"})})}function $_(t,e){const n=Vn(),r=Te();if(!(n!=null&&n.getEntries)||!r)return;const s=le(r),i=n.getEntries(),{op:o,start_timestamp:a}=ee(t);i.slice(Ea).forEach(c=>{const l=le(c.startTime),f=le(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+l<a))switch(c.entryType){case"navigation":{z_(t,c,s);break}case"mark":case"paint":case"measure":{U_(t,c,l,f,s,e.ignorePerformanceApiSpans);const d=Ai(),p=c.startTime<d.firstHiddenTime;c.name==="first-paint"&&p&&(Be.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&p&&(Be.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{q_(t,c,c.name,l,f,s,e.ignoreResourceSpans);break}}}),Ea=Math.max(i.length-1,0),G_(t),o==="pageload"&&(J_(Be),e.recordClsOnPageloadSpan||delete Be.cls,e.recordLcpOnPageloadSpan||delete Be.lcp,Object.entries(Be).forEach(([c,l])=>{Qc(c,l.value,l.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",gn()),K_(t,e)),ve=void 0,qt=void 0,Be={}}function B_(t){if((t==null?void 0:t.entryType)==="measure")try{return t.detail.devtools.track==="Components ⚛"}catch{return}}function U_(t,e,n,r,s,i){if(B_(e)||["mark","measure"].includes(e.entryType)&&Xe(e.name,i))return;const o=Un(!1),a=le(o?o.requestStart:0),c=s+Math.max(n,a),l=s+n,f=l+r,d={[he]:"auto.resource.browser.metrics"};c!==l&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c),H_(d,e),c<=f&&pt(t,c,f,{name:e.name,op:e.entryType,attributes:d})}function H_(t,e){try{const n=e.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&Xt(s))t[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{t[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(Xt(n)){t["sentry.browser.measure.detail"]=n;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function z_(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{nr(t,e,r,n)}),nr(t,e,"secureConnection",n,"TLS/SSL"),nr(t,e,"fetch",n,"cache"),nr(t,e,"domainLookup",n,"DNS"),W_(t,e,n)}function nr(t,e,n,r,s=n){const i=V_(n),o=e[i],a=e[`${n}Start`];!a||!o||pt(t,r+le(a),r+le(o),{op:`browser.${s}`,name:e.name,attributes:{[he]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function V_(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function W_(t,e,n){const r=n+le(e.requestStart),s=n+le(e.responseEnd),i=n+le(e.responseStart);e.responseEnd&&(pt(t,r,s,{op:"browser.request",name:e.name,attributes:{[he]:"auto.ui.browser.metrics"}}),pt(t,i,s,{op:"browser.response",name:e.name,attributes:{[he]:"auto.ui.browser.metrics"}}))}function q_(t,e,n,r,s,i,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(o!=null&&o.includes(a))return;const c={[he]:"auto.resource.browser.metrics"},l=At(n);l.protocol&&(c["url.scheme"]=l.protocol.split(":").pop()),l.host&&(c["server.address"]=l.host),c["url.same_origin"]=n.includes(W.location.origin),Y_(e,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const f={...c,...ql(e)},d=i+r,p=d+s;pt(t,d,p,{name:n.replace(W.location.origin,""),op:a,attributes:f})}function G_(t){const e=W.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),Ss(n.rtt)&&(Be["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ss(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),Ss(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function K_(t,e){ve&&e.recordLcpOnPageloadSpan&&(ve.element&&t.setAttribute("lcp.element",Pe(ve.element)),ve.id&&t.setAttribute("lcp.id",ve.id),ve.url&&t.setAttribute("lcp.url",ve.url.trim().slice(0,200)),ve.loadTime!=null&&t.setAttribute("lcp.loadTime",ve.loadTime),ve.renderTime!=null&&t.setAttribute("lcp.renderTime",ve.renderTime),t.setAttribute("lcp.size",ve.size)),qt!=null&&qt.sources&&e.recordClsOnPageloadSpan&&qt.sources.forEach((n,r)=>t.setAttribute(`cls.source.${r+1}`,Pe(n.node)))}function Y_(t,e,n){n.forEach(([r,s])=>{const i=t[r];i!=null&&(typeof i=="number"&&i<M_||typeof i=="string")&&(e[s]=i)})}function J_(t){const e=Un(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function X_(){return Vn()&&Te()?jt("element",Q_):()=>{}}const Q_=({entries:t})=>{const e=xe(),n=e?_e(e):void 0,r=n?ee(n).description:se().getScopeData().transactionName;t.forEach(s=>{var h,m;const i=s;if(!i.identifier)return;const o=i.name,a=i.renderTime,c=i.loadTime,[l,f]=c?[le(c),"load-time"]:a?[le(a),"render-time"]:[ge(),"entry-emission"],d=o==="image-paint"?le(Math.max(0,(a??0)-(c??0))):0,p={[he]:"auto.ui.browser.elementtiming",[rt]:"ui.elementtiming",[Ue]:"component","sentry.span_start_time_source":f,"sentry.transaction_name":r,"element.id":i.id,"element.type":((m=(h=i.element)==null?void 0:h.tagName)==null?void 0:m.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};Om({name:`element[${i.identifier}]`,attributes:p,startTime:l,onlyIfParent:!0},y=>{y.end(l+d)})})},Z_=1e3;let va,Ys,Js;function Gl(t){const e="dom";mt(e,t),gt(e,eS)}function eS(){if(!W.document)return;const t=Oe.bind(null,"dom"),e=wa(t,!0);W.document.addEventListener("click",e,!1),W.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{var i,o;const s=(i=W[n])==null?void 0:i.prototype;(o=s==null?void 0:s.hasOwnProperty)!=null&&o.call(s,"addEventListener")&&(we(s,"addEventListener",function(a){return function(c,l,f){if(c==="click"||c=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},p=d[c]=d[c]||{refCount:0};if(!p.handler){const h=wa(t);p.handler=h,a.call(this,c,h,f)}p.refCount++}catch{}return a.call(this,c,l,f)}}),we(s,"removeEventListener",function(a){return function(c,l,f){if(c==="click"||c=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},p=d[c];p&&(p.refCount--,p.refCount<=0&&(a.call(this,c,p.handler,f),p.handler=void 0,delete d[c]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,l,f)}}))})}function tS(t){if(t.type!==Ys)return!1;try{if(!t.target||t.target._sentryId!==Js)return!1}catch{}return!0}function nS(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function wa(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=rS(n);if(nS(n.type,r))return;Ce(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ce(r,"_sentryId",Ie());const s=n.type==="keypress"?"input":n.type;tS(n)||(t({event:n,name:s,global:e}),Ys=n.type,Js=r?r._sentryId:void 0),clearTimeout(va),va=W.setTimeout(()=>{Js=void 0,Ys=void 0},Z_)}}function rS(t){try{return t.target}catch{return null}}let rr;function Yr(t){const e="history";mt(e,t),gt(e,sS)}function sS(){if(W.addEventListener("popstate",()=>{const e=W.location.href,n=rr;if(rr=e,n===e)return;Oe("history",{from:n,to:e})}),!ky())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=rr,i=iS(String(r));if(rr=i,s===i)return e.apply(this,n);Oe("history",{from:s,to:i})}return e.apply(this,n)}}we(W.history,"pushState",t),we(W.history,"replaceState",t)}function iS(t){try{return new URL(t,W.location.origin).toString()}catch{return t}}const gr={};function Kl(t){const e=gr[t];if(e)return e;let n=W[t];if(zs(n))return gr[t]=n.bind(W);const r=W.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i!=null&&i[t]&&(n=i[t]),r.head.removeChild(s)}catch(s){Pt&&C.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return n&&(gr[t]=n.bind(W))}function oS(t){gr[t]=void 0}function Wn(...t){return Kl("setTimeout")(...t)}const kt="__sentry_xhr_v3__";function Yl(t){const e="xhr";mt(e,t),gt(e,aS)}function aS(){if(!W.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const s=new Error,i=ge()*1e3,o=Je(r[0])?r[0].toUpperCase():void 0,a=cS(r[1]);if(!o||!a)return e.apply(n,r);n[kt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const l=n[kt];if(l&&n.readyState===4){try{l.status_code=n.status}catch{}const f={endTimestamp:ge()*1e3,startTimestamp:i,xhr:n,virtualError:s};Oe("xhr",f)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(l,f,d){return c(),l.apply(f,d)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(l,f,d){const[p,h]=d,m=f[kt];return m&&Je(p)&&Je(h)&&(m.request_headers[p.toLowerCase()]=h),l.apply(f,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const s=n[kt];if(!s)return e.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:ge()*1e3,xhr:n};return Oe("xhr",i),e.apply(n,r)}})}function cS(t){if(Je(t))return t;try{return t.toString()}catch{}}function Jl(t){return new URLSearchParams(t).toString()}function Xl(t,e=C){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Jl(t)];if(!t)return[void 0]}catch(n){return Pt&&e.error(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Pt&&e.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Ql(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function Zl(t){let e;try{e=t.getAllResponseHeaders()}catch(n){return Pt&&C.error(n,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return i&&(n[s.toLowerCase()]=i),n},{}):{}}const bs=[],yr=new Map,lS=60;function uS(){if(Vn()&&Te()){const e=dS();return()=>{e()}}return()=>{}}const Ta={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function dS(){return Ul(fS)}const fS=({metric:t})=>{if(t.value==null)return;const e=le(t.value);if(e>lS)return;const n=t.entries.find(m=>m.duration===t.value&&Ta[m.name]);if(!n)return;const{interactionId:r}=n,s=Ta[n.name],i=le(Te()+n.startTime),o=xe(),a=o?_e(o):void 0,l=(r!=null?yr.get(r):void 0)||a,f=l?ee(l).description:se().getScopeData().transactionName,d=Pe(n.target),p={[he]:"auto.http.browser.inp",[rt]:`ui.interaction.${s}`,[pn]:n.duration},h=ji({name:d,transaction:f,attributes:p,startTime:i});h&&(h.addEvent("inp",{[Fn]:"millisecond",[$n]:t.value}),h.end(i+e))};function pS(){const t=({entries:e})=>{const n=xe(),r=n&&_e(n);e.forEach(s=>{if(!w_(s)||!r)return;const i=s.interactionId;if(i!=null&&!yr.has(i)){if(bs.length>10){const o=bs.shift();yr.delete(o)}bs.push(i),yr.set(i,r)}})};jt("event",t),jt("first-input",t)}function hS(t,e=Kl("fetch")){let n=0,r=0;async function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const c=await e(t.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw oS("fetch"),c}finally{n-=o,r--}}return Fg(t,s)}const mS=30,gS=50;function Xs(t,e,n,r){const s={filename:t,function:e==="<anonymous>"?Lt:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const yS=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,_S=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,SS=/\((\S*)(?::(\d+))(?::(\d+))\)/,bS=/at (.+?) ?\(data:(.+?),/,xS=t=>{const e=t.match(bS);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=yS.exec(t);if(n){const[,s,i,o]=n;return Xs(s,Lt,+i,+o)}const r=_S.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=SS.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[i,o]=eu(r[1]||Lt,r[2]);return Xs(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},ES=[mS,xS],vS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,wS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,TS=t=>{const e=vS.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=wS.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Lt;return[s,r]=eu(s,r),Xs(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},kS=[gS,TS],IS=[ES,kS],CS=xc(...IS),eu=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Lt,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},je=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,sr=1024,NS="Breadcrumbs",RS=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:NS,setup(n){e.console&&dy(OS(n)),e.dom&&Gl(LS(n,e.dom)),e.xhr&&Yl(PS(n)),e.fetch&&Nl(jS(n)),e.history&&Yr(DS(n)),e.sentry&&n.on("beforeSendEvent",AS(n))}}},MS=RS;function AS(t){return function(n){X()===t&&it({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Et(n)},{event:n})}}function LS(t,e){return function(r){if(X()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>sr&&(je&&C.warn(`\`dom.maxStringLength\` cannot exceed ${sr}, but a value of ${a} was configured. Sentry will use ${sr} instead.`),a=sr),typeof o=="string"&&(o=[o]);try{const l=r.event,f=FS(l)?l.target:l;s=Pe(f,{keyAttrs:o,maxStringLength:a}),i=Cc(f)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),it(c,{event:r.event,name:r.name,global:r.global})}}function OS(t){return function(n){if(X()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Tl(n.level),message:Lo(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Lo(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;it(r,{input:n.args,level:n.level})}}function PS(t){return function(n){if(X()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[kt];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:l}=i,f={method:o,url:a,status_code:c},d={xhr:n.xhr,input:l,startTimestamp:r,endTimestamp:s},p={category:"xhr",data:f,type:"http",level:Cl(c)};t.emit("beforeOutgoingRequestBreadcrumb",p,d),it(p,d)}}function jS(t){return function(n){if(X()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",a,o),it(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i==null?void 0:i.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i==null||i.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Cl(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,a),it(c,a)}}}function DS(t){return function(n){if(X()!==t)return;let r=n.from,s=n.to;const i=At(te.location.href);let o=r?At(r):void 0;const a=At(s);o!=null&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),it({category:"navigation",data:{from:r,to:s}})}}function FS(t){return!!t&&!!t.target}const $S=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],BS="BrowserApiErrors",US=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:BS,setupOnce(){e.setTimeout&&we(te,"setTimeout",ka),e.setInterval&&we(te,"setInterval",ka),e.requestAnimationFrame&&we(te,"requestAnimationFrame",zS),e.XMLHttpRequest&&"XMLHttpRequest"in te&&we(XMLHttpRequest.prototype,"send",VS);const n=e.eventTarget;n&&(Array.isArray(n)?n:$S).forEach(s=>WS(s,e))}}},HS=US;function ka(t){return function(...e){const n=e[0];return e[0]=nn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${et(t)}`}}),t.apply(this,e)}}function zS(t){return function(e){return t.apply(this,[nn(e,{mechanism:{data:{handler:et(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function VS(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&we(n,s,function(i){const o={mechanism:{data:{handler:et(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=hi(i);return a&&(o.mechanism.data.handler=et(a)),nn(i,o)})}),t.apply(this,e)}}function WS(t,e){var s,i;const r=(s=te[t])==null?void 0:s.prototype;(i=r==null?void 0:r.hasOwnProperty)!=null&&i.call(r,"addEventListener")&&(we(r,"addEventListener",function(o){return function(a,c,l){try{qS(c)&&(c.handleEvent=nn(c.handleEvent,{mechanism:{data:{handler:et(c),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&GS(this,a,c),o.apply(this,[a,nn(c,{mechanism:{data:{handler:et(c),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),l])}}),we(r,"removeEventListener",function(o){return function(a,c,l){try{const f=c.__sentry_wrapped__;f&&o.call(this,a,f,l)}catch{}return o.call(this,a,c,l)}}))}function qS(t){return typeof t.handleEvent=="function"}function GS(t,e,n){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,n)}const KS=()=>({name:"BrowserSession",setupOnce(){if(typeof te.document>"u"){je&&C.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}ra({ignoreDuration:!0}),sa(),Yr(({from:t,to:e})=>{t!==void 0&&t!==e&&(ra({ignoreDuration:!0}),sa())})}}),YS="GlobalHandlers",JS=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:YS,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(QS(n),Ia("onerror")),e.onunhandledrejection&&(ZS(n),Ia("onunhandledrejection"))}}},XS=JS;function QS(t){Ec(e=>{const{stackParser:n,attachStacktrace:r}=tu();if(X()!==t||Ml())return;const{msg:s,url:i,line:o,column:a,error:c}=e,l=nb(Ni(n,c||s,void 0,r,!1),i,o,a);l.level="error",ol(l,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function ZS(t){vc(e=>{const{stackParser:n,attachStacktrace:r}=tu();if(X()!==t||Ml())return;const s=eb(e),i=Xt(s)?tb(s):Ni(n,s,void 0,r,!0);i.level="error",ol(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function eb(t){if(Xt(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function tb(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function nb(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=r,f=n,d=rb(e)??dn();return c.length===0&&c.push({colno:l,filename:d,function:Lt,in_app:!0,lineno:f}),t}function Ia(t){je&&C.log(`Global Handler attached: ${t}`)}function tu(){const t=X();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function rb(t){if(!(!Je(t)||t.length===0)){if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/),n=e?e[1]:"text/javascript",r=t.includes("base64,");return`<data:${n}${r?",base64":""}>`}return t.slice(0,1024)}}const sb=()=>({name:"HttpContext",preprocessEvent(t){var r;if(!te.navigator&&!te.location&&!te.document)return;const e=ki(),n={...e.headers,...(r=t.request)==null?void 0:r.headers};t.request={...e,...t.request,headers:n}}}),ib="cause",ob=5,ab="LinkedErrors",cb=(t={})=>{const e=t.limit||ob,n=t.key||ib;return{name:ab,preprocessEvent(r,s,i){const o=i.getOptions();uy(Ii,o.stackParser,n,e,r,s)}}},lb=cb;function ub(){return db()?(je&&Ft(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function db(){var i;if(typeof te.window>"u")return!1;const t=te;if(t.nw)return!1;const e=t.chrome||t.browser;if(!((i=e==null?void 0:e.runtime)!=null&&i.id))return!1;const n=dn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(te===te.top&&r.some(o=>n.startsWith(`${o}://`)))}function fb(t){return[ny(),Qg(),HS(),MS(),XS(),lb(),my(),sb(),KS()]}function pb(t={}){const e=!t.skipBrowserExtensionCheck&&ub(),n={...t,enabled:e?!1:t.enabled,stackParser:oh(t.stackParser||CS),integrations:hg({integrations:t.integrations,defaultIntegrations:t.defaultIntegrations==null?fb():t.defaultIntegrations}),transport:t.transport||hS};return Mg(Jy,n)}const oe=Z,Di="sentryReplaySession",hb="replay_event",Fi="Unable to send Replay",mb=3e5,gb=9e5,yb=5e3,_b=5500,Sb=6e4,bb=5e3,xb=3,Ca=15e4,ir=5e3,Eb=3e3,vb=300,$i=2e7,wb=4999,Tb=15e3,Na=36e5;var kb=Object.defineProperty,Ib=(t,e,n)=>e in t?kb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ra=(t,e,n)=>Ib(t,typeof e!="symbol"?e+"":e,n),de=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(de||{});function Cb(t){return t.nodeType===t.ELEMENT_NODE}function vn(t){const e=t==null?void 0:t.host;return(e==null?void 0:e.shadowRoot)===t}function wn(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function Nb(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}function Rb(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function Ar(t){try{const e=t.rules||t.cssRules;return e?Nb(Array.from(e,nu).join("")):null}catch{return null}}function Mb(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style,s=r[n],i=r.getPropertyPriority(s);e+=`${s}:${r.getPropertyValue(s)}${i?" !important":""};`}return`${t.selectorText} { ${e} }`}function nu(t){let e;if(Lb(t))try{e=Ar(t.styleSheet)||Rb(t)}catch{}else if(Ob(t)){let n=t.cssText;const r=t.selectorText.includes(":"),s=typeof t.style.all=="string"&&t.style.all;if(s&&(n=Mb(t)),r&&(n=Ab(n)),r||s)return n}return e||t.cssText}function Ab(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function Lb(t){return"styleSheet"in t}function Ob(t){return"selectorText"in t}class ru{constructor(){Ra(this,"idNodeMap",new Map),Ra(this,"nodeMetaMap",new WeakMap)}getId(e){var r;return e?((r=this.getMeta(e))==null?void 0:r.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Pb(){return new ru}function Jr({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function An({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function rn(t){return t.toLowerCase()}function Qs(t){return t.toUpperCase()}const Ma="__rrweb_original__";function jb(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let s=0;s<t.height;s+=n){const i=e.getImageData,o=Ma in i?i[Ma]:i;if(new Uint32Array(o.call(e,r,s,Math.min(n,t.width-r),Math.min(n,t.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Bi(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?rn(e):null}function Lr(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}function su(t,e){let n;try{n=new URL(t,e??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,s=n.pathname.match(r);return(s==null?void 0:s[1])??null}const Aa={};function iu(t){const e=Aa[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[t]&&(r=i[t]),n.head.removeChild(s)}catch{}return Aa[t]=r.bind(window)}function Zs(...t){return iu("setTimeout")(...t)}function ou(...t){return iu("clearTimeout")(...t)}function au(t){try{return t.contentDocument}catch{}}let Db=1;const Fb=new RegExp("[^a-z0-9-_:]"),Ln=-2;function Ui(){return Db++}function $b(t){if(t instanceof HTMLFormElement)return"form";const e=rn(t.tagName);return Fb.test(e)?"div":e}function Bb(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let zt,La;const Ub=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Hb=/^(?:[a-z+]+:)?\/\//i,zb=/^www\..*/i,Vb=/^(data:)([^,]*),(.*)/i;function Or(t,e){return(t||"").replace(Ub,(n,r,s,i,o,a)=>{const c=s||o||a,l=r||i||"";if(!c)return n;if(Hb.test(c)||zb.test(c))return`url(${l}${c}${l})`;if(Vb.test(c))return`url(${l}${c}${l})`;if(c[0]==="/")return`url(${l}${Bb(e)+c}${l})`;const f=e.split("/"),d=c.split("/");f.pop();for(const p of d)p!=="."&&(p===".."?f.pop():f.push(p));return`url(${l}${f.join("/")}${l})`})}const Wb=/^[^ \t\n\r\u000c]+/,qb=/^[, \t\n\r\u000c]+/;function Gb(t,e){if(e.trim()==="")return e;let n=0;function r(i){let o;const a=i.exec(e.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(qb),!(n>=e.length);){let i=r(Wb);if(i.slice(-1)===",")i=Gt(t,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Gt(t,i);let a=!1;for(;;){const c=e.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}const Oa=new WeakMap;function Gt(t,e){return!e||e.trim()===""?e:Xr(t,e)}function Kb(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function Xr(t,e){let n=Oa.get(t);if(n||(n=t.createElement("a"),Oa.set(t,n)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return n.setAttribute("href",e),n.href}function cu(t,e,n,r,s,i){return r&&(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th")?Gt(t,r):n==="srcset"?Gb(t,r):n==="style"?Or(r,Xr(t)):e==="object"&&n==="data"?Gt(t,r):typeof i=="function"?i(n,r,s):r)}function lu(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function Yb(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let s=t.classList.length;s--;){const i=t.classList[s];if(e.test(i))return!0}if(n)return t.matches(n)}catch{}return!1}function Jb(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function It(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:It(t.parentNode,e,n,r+1)}function Kt(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(Jb(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function sn(t,e,n,r,s,i){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const l=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(l))return!0}let a=-1,c=-1;if(i){if(c=It(o,Kt(r,s)),c<0)return!0;a=It(o,Kt(e,n),c>=0?c:1/0)}else{if(a=It(o,Kt(e,n)),a<0)return!1;c=It(o,Kt(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function Xb(t,e,n){const r=t.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=Zs(()=>{s||(e(),s=!0)},n);t.addEventListener("load",()=>{ou(a),s=!0,e()});return}const o="about:blank";if(r.location.href!==o||t.src===o||t.src==="")return Zs(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function Qb(t,e,n){let r=!1,s;try{s=t.sheet}catch{return}if(s)return;const i=Zs(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{ou(i),r=!0,e()})}function Zb(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:f,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:m={},maskTextFn:y,maskInputFn:_,dataURLOptions:T={},inlineImages:w,recordCanvas:D,keepIframeSrcFn:P,newlyAddedElement:M=!1}=e,A=ex(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:de.Document,childNodes:[],compatMode:t.compatMode}:{type:de.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:de.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:A};case t.ELEMENT_NODE:return nx(t,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:m,maskInputFn:_,dataURLOptions:T,inlineImages:w,recordCanvas:D,keepIframeSrcFn:P,newlyAddedElement:M,rootId:A,maskTextClass:l,unmaskTextClass:f,maskTextSelector:d,unmaskTextSelector:p});case t.TEXT_NODE:return tx(t,{doc:n,maskAllText:a,maskTextClass:l,unmaskTextClass:f,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:y,maskInputOptions:m,maskInputFn:_,rootId:A});case t.CDATA_SECTION_NODE:return{type:de.CDATA,textContent:"",rootId:A};case t.COMMENT_NODE:return{type:de.Comment,textContent:t.textContent||"",rootId:A};default:return!1}}function ex(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function tx(t,e){var T;const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:f}=e,d=t.parentNode&&t.parentNode.tagName;let p=t.textContent;const h=d==="STYLE"?!0:void 0,m=d==="SCRIPT"?!0:void 0,y=d==="TEXTAREA"?!0:void 0;if(h&&p){try{t.nextSibling||t.previousSibling||(T=t.parentNode.sheet)!=null&&T.cssRules&&(p=Ar(t.parentNode.sheet))}catch(w){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${w}`,t)}p=Or(p,Xr(e.doc))}m&&(p="SCRIPT_PLACEHOLDER");const _=sn(t,r,i,s,o,n);if(!h&&!m&&!y&&p&&_&&(p=a?a(p,t.parentElement):p.replace(/[\S]/g,"*")),y&&p&&(c.textarea||_)&&(p=l?l(p,t.parentNode):p.replace(/[\S]/g,"*")),d==="OPTION"&&p){const w=Jr({type:null,tagName:d,maskInputOptions:c});p=An({isMasked:sn(t,r,i,s,o,w),element:t,value:p,maskInputFn:l})}return{type:de.Text,textContent:p||"",isStyle:h,rootId:f}}function nx(t,e){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:f={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:m=!1,rootId:y,maskTextClass:_,unmaskTextClass:T,maskTextSelector:w,unmaskTextSelector:D}=e,P=Yb(t,r,s,i),M=$b(t);let A={};const k=t.attributes.length;for(let x=0;x<k;x++){const g=t.attributes[x];g.name&&!lu(M,g.name,g.value)&&(A[g.name]=cu(n,M,rn(g.name),g.value,t,c))}if(M==="link"&&o){const x=Array.from(n.styleSheets).find(E=>E.href===t.href);let g=null;x&&(g=Ar(x)),g&&(A.rel=null,A.href=null,A.crossorigin=null,A._cssText=Or(g,x.href))}if(M==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const x=Ar(t.sheet);x&&(A._cssText=Or(x,Xr(n)))}if(M==="input"||M==="textarea"||M==="select"||M==="option"){const x=t,g=Bi(x),E=Lr(x,Qs(M),g),v=x.checked;if(g!=="submit"&&g!=="button"&&E){const I=sn(x,_,w,T,D,Jr({type:g,tagName:Qs(M),maskInputOptions:a}));A.value=An({isMasked:I,element:x,value:E,maskInputFn:l})}v&&(A.checked=v)}if(M==="option"&&(t.selected&&!a.select?A.selected=!0:delete A.selected),M==="canvas"&&p){if(t.__context==="2d")jb(t)||(A.rr_dataURL=t.toDataURL(f.type,f.quality));else if(!("__context"in t)){const x=t.toDataURL(f.type,f.quality),g=n.createElement("canvas");g.width=t.width,g.height=t.height;const E=g.toDataURL(f.type,f.quality);x!==E&&(A.rr_dataURL=x)}}if(M==="img"&&d){zt||(zt=n.createElement("canvas"),La=zt.getContext("2d"));const x=t,g=x.currentSrc||x.getAttribute("src")||"<unknown-src>",E=x.crossOrigin,v=()=>{x.removeEventListener("load",v);try{zt.width=x.naturalWidth,zt.height=x.naturalHeight,La.drawImage(x,0,0),A.rr_dataURL=zt.toDataURL(f.type,f.quality)}catch(I){if(x.crossOrigin!=="anonymous"){x.crossOrigin="anonymous",x.complete&&x.naturalWidth!==0?v():x.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${g}! Error: ${I}`)}x.crossOrigin==="anonymous"&&(E?A.crossOrigin=E:x.removeAttribute("crossorigin"))};x.complete&&x.naturalWidth!==0?v():x.addEventListener("load",v)}if((M==="audio"||M==="video")&&(A.rr_mediaState=t.paused?"paused":"played",A.rr_mediaCurrentTime=t.currentTime),m||(t.scrollLeft&&(A.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(A.rr_scrollTop=t.scrollTop)),P){const{width:x,height:g}=t.getBoundingClientRect();A={class:A.class,rr_width:`${x}px`,rr_height:`${g}px`}}M==="iframe"&&!h(A.src)&&(!P&&!au(t)&&(A.rr_src=A.src),delete A.src);let b;try{customElements.get(M)&&(b=!0)}catch{}return{type:de.Element,tagName:M,attributes:A,childNodes:[],isSVG:Kb(t)||void 0,needBlock:P,rootId:y,isCustom:b}}function ie(t){return t==null?"":t.toLowerCase()}function rx(t,e){if(e.comment&&t.type===de.Comment)return!0;if(t.type===de.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&su(t.attributes.href)==="js"))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(ie(t.attributes.name).match(/^msapplication-tile(image|color)$/)||ie(t.attributes.name)==="application-name"||ie(t.attributes.rel)==="icon"||ie(t.attributes.rel)==="apple-touch-icon"||ie(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&ie(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ie(t.attributes.property).match(/^(og|twitter|fb):/)||ie(t.attributes.name).match(/^(og|twitter):/)||ie(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(ie(t.attributes.name)==="robots"||ie(t.attributes.name)==="googlebot"||ie(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(ie(t.attributes.name)==="author"||ie(t.attributes.name)==="generator"||ie(t.attributes.name)==="framework"||ie(t.attributes.name)==="publisher"||ie(t.attributes.name)==="progid"||ie(t.attributes.property).match(/^article:/)||ie(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(ie(t.attributes.name)==="google-site-verification"||ie(t.attributes.name)==="yandex-verification"||ie(t.attributes.name)==="csrf-token"||ie(t.attributes.name)==="p:domain_verify"||ie(t.attributes.name)==="verify-v1"||ie(t.attributes.name)==="verification"||ie(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Yt(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:m={},maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOMOptions:w,dataURLOptions:D={},inlineImages:P=!1,recordCanvas:M=!1,onSerialize:A,onIframeLoad:k,iframeLoadTimeout:b=5e3,onBlockedImageLoad:x,onStylesheetLoad:g,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:v=()=>!1,newlyAddedElement:I=!1}=e;let{preserveWhiteSpace:N=!0}=e;const U=Zb(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,dataURLOptions:D,inlineImages:P,recordCanvas:M,keepIframeSrcFn:v,newlyAddedElement:I});if(!U)return console.warn(t,"not serialized"),null;let R;r.hasNode(t)?R=r.getId(t):rx(U,w)||!N&&U.type===de.Text&&!U.isStyle&&!U.textContent.replace(/^\s+|\s+$/gm,"").length?R=Ln:R=Ui();const L=Object.assign(U,{id:R});if(r.add(t,L),R===Ln)return null;A&&A(t);let O=!p;if(L.type===de.Element){O=O&&!L.needBlock;const j=t.shadowRoot;j&&wn(j)&&(L.isShadowHost=!0)}if((L.type===de.Document||L.type===de.Element)&&O){w.headWhitespace&&L.type===de.Element&&L.tagName==="head"&&(N=!1);const j={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOMOptions:w,dataURLOptions:D,inlineImages:P,recordCanvas:M,preserveWhiteSpace:N,onSerialize:A,onIframeLoad:k,iframeLoadTimeout:b,onBlockedImageLoad:x,onStylesheetLoad:g,stylesheetLoadTimeout:E,keepIframeSrcFn:v},$=t.childNodes?Array.from(t.childNodes):[];for(const B of $){const G=Yt(B,j);G&&L.childNodes.push(G)}if(Cb(t)&&t.shadowRoot)for(const B of Array.from(t.shadowRoot.childNodes)){const G=Yt(B,j);G&&(wn(t.shadowRoot)&&(G.isShadow=!0),L.childNodes.push(G))}}if(t.parentNode&&vn(t.parentNode)&&wn(t.parentNode)&&(L.isShadow=!0),L.type===de.Element&&L.tagName==="iframe"&&!L.needBlock&&Xb(t,()=>{const j=au(t);if(j&&k){const $=Yt(j,{doc:j,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOMOptions:w,dataURLOptions:D,inlineImages:P,recordCanvas:M,preserveWhiteSpace:N,onSerialize:A,onIframeLoad:k,iframeLoadTimeout:b,onStylesheetLoad:g,stylesheetLoadTimeout:E,keepIframeSrcFn:v});$&&k(t,$)}},b),L.type===de.Element&&L.tagName==="img"&&!t.complete&&L.needBlock){const j=t,$=()=>{if(j.isConnected&&!j.complete&&x)try{const B=j.getBoundingClientRect();B.width>0&&B.height>0&&x(j,L,B)}catch{}j.removeEventListener("load",$)};j.isConnected&&j.addEventListener("load",$)}return L.type===de.Element&&L.tagName==="link"&&typeof L.attributes.rel=="string"&&(L.attributes.rel==="stylesheet"||L.attributes.rel==="preload"&&typeof L.attributes.href=="string"&&su(L.attributes.href)==="css")&&Qb(t,()=>{if(g){const j=Yt(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOMOptions:w,dataURLOptions:D,inlineImages:P,recordCanvas:M,preserveWhiteSpace:N,onSerialize:A,onIframeLoad:k,iframeLoadTimeout:b,onStylesheetLoad:g,stylesheetLoadTimeout:E,keepIframeSrcFn:v});j&&g(t,j)}},E),L.type===de.Element&&delete L.needBlock,L}function sx(t,e){const{mirror:n=new ru,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:f=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:m=!1,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOM:w=!1,dataURLOptions:D,preserveWhiteSpace:P,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:k,onBlockedImageLoad:b,onStylesheetLoad:x,stylesheetLoadTimeout:g,keepIframeSrcFn:E=()=>!1}=e||{};return Yt(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:d,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:y,maskTextFn:_,maskInputFn:T,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:D,inlineImages:p,recordCanvas:h,preserveWhiteSpace:P,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:k,onBlockedImageLoad:b,onStylesheetLoad:x,stylesheetLoadTimeout:g,keepIframeSrcFn:E,newlyAddedElement:!1})}function be(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Vt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Pa={map:{},getId(){return console.error(Vt),-1},getNode(){return console.error(Vt),null},removeNodeFromMap(){console.error(Vt)},has(){return console.error(Vt),!1},reset(){console.error(Vt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Pa=new Proxy(Pa,{get(t,e,n){return e==="map"&&console.error(Vt),Reflect.get(t,e,n)}}));function On(t,e,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=e-(o-s),c=this;a<=0||a>e?(r&&(dx(r),r=null),s=o,t.apply(c,i)):!r&&n.trailing!==!1&&(r=Qr(()=>{s=n.leading===!1?0:Date.now(),r=null,t.apply(c,i)},a))}}function uu(t,e,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(o){Qr(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>uu(t,e,i||{},!0)}function Hi(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}let Pr=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Pr=()=>new Date().getTime());function du(t){var n,r,s,i,o,a;const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:(e==null?void 0:e.documentElement.scrollLeft)||((r=(n=e==null?void 0:e.body)==null?void 0:n.parentElement)==null?void 0:r.scrollLeft)||((s=e==null?void 0:e.body)==null?void 0:s.scrollLeft)||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:(e==null?void 0:e.documentElement.scrollTop)||((o=(i=e==null?void 0:e.body)==null?void 0:i.parentElement)==null?void 0:o.scrollTop)||((a=e==null?void 0:e.body)==null?void 0:a.scrollTop)||0}}function fu(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function pu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function hu(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function ke(t,e,n,r,s){if(!t)return!1;const i=hu(t);if(!i)return!1;const o=Kt(e,n);if(!s){const l=r&&i.matches(r);return o(i)&&!l}const a=It(i,o);let c=-1;return a<0?!1:(r&&(c=It(i,Kt(null,r))),a>-1&&c<0?!0:a<c)}function ix(t,e){return e.getId(t)!==-1}function xs(t,e){return e.getId(t)===Ln}function mu(t,e){if(vn(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?mu(t.parentNode,e):!0:!0}function ei(t){return!!t.changedTouches}function ox(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function gu(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function yu(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function ti(t){return!!(t!=null&&t.shadowRoot)}class ax{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function _u(t){var n,r;let e=null;return((r=(n=t.getRootNode)==null?void 0:n.call(t))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function cx(t){let e=t,n;for(;n=_u(e);)e=n;return e}function lx(t){const e=t.ownerDocument;if(!e)return!1;const n=cx(t);return e.contains(n)}function Su(t){const e=t.ownerDocument;return e?e.contains(t)||lx(t):!1}const ja={};function zi(t){const e=ja[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[t]&&(r=i[t]),n.head.removeChild(s)}catch{}return ja[t]=r.bind(window)}function ux(...t){return zi("requestAnimationFrame")(...t)}function Qr(...t){return zi("setTimeout")(...t)}function dx(...t){return zi("clearTimeout")(...t)}var K=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(K||{}),q=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(q||{}),Se=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Se||{}),Ye=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Ye||{}),Wt=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Wt||{});function Vi(t){try{return t.contentDocument}catch{}}function fx(t){try{return t.contentWindow}catch{}}function Da(t){return"__ln"in t}class px{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=(n==null?void 0:n.next)||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&Da(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&Da(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Fa=(t,e)=>`${t}@${e}`;class hx{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new px,s=c=>{let l=c,f=Ln;for(;f===Ln;)l=l&&l.nextSibling,f=l&&this.mirror.getId(l);return f},i=c=>{if(!c.parentNode||!Su(c))return;const l=vn(c.parentNode)?this.mirror.getId(_u(c)):this.mirror.getId(c.parentNode),f=s(c);if(l===-1||f===-1)return r.addNode(c);const d=Yt(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{gu(p,this.mirror)&&!ke(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),yu(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),ti(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,h)=>{ke(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,h),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,h)=>{this.stylesheetManager.attachLinkElement(p,h)},onBlockedImageLoad:(p,h,{width:m,height:y})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:h.id,attributes:{style:{width:`${m}px`,height:`${y}px`}}}]})}});d&&(e.push({parentId:l,nextId:f,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)$a(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Ba(this.droppedSet,c)&&!$a(this.removes,c,this.mirror)||Ba(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const l=this.mirror.getId(o.value.parentNode),f=s(o.value);l!==-1&&f!==-1&&(c=o)}if(!c){let l=r.tail;for(;l;){const f=l;if(l=l.previous,f){const d=this.mirror.getId(f.value.parentNode);if(s(f.value)===-1)continue;if(d!==-1){c=f;break}else{const h=f.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const m=h.parentNode.host;if(this.mirror.getId(m)!==-1){c=f;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:l}=c;if(typeof l.style=="string"){const f=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);f.length<l.style.length&&(f+d).split("var(").length===l.style.split("var(").length&&(l.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:l}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!xs(e.target,this.mirror))switch(e.type){case"characterData":{const n=e.target.textContent;!ke(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==e.oldValue&&this.texts.push({value:sn(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,hu(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,s=e.target.getAttribute(r);if(r==="value"){const o=Bi(n),a=n.tagName;s=Lr(n,a,o);const c=Jr({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),l=sn(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=An({isMasked:l,element:n,value:s,maskInputFn:this.maskInputFn})}if(ke(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let i=this.attributeMap.get(e.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Vi(n))r="rr_src";else return;if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),r==="type"&&n.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!lu(n.tagName,r)&&(i.attributes[r]=cu(this.doc,rn(n.tagName),rn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),l=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||l!==o.style.getPropertyPriority(a)?l===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,l]:i._unchangedStyles[a]=[c,l]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(ke(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(n=>this.genAdds(n,e.target)),e.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=vn(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);ke(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||xs(n,this.mirror)||!ix(n,this.mirror)||(this.addedSet.has(n)?(ni(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(e.target)&&r===-1||mu(e.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Fa(r,s)]?ni(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:vn(e.target)&&wn(e.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(xs(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Fa(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);ke(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach(r=>this.genAdds(r)),ti(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ni(t,e){var n;t.delete(e),(n=e.childNodes)==null||n.forEach(r=>ni(t,r))}function $a(t,e,n){return t.length===0?!1:mx(t,e,n)}function mx(t,e,n){let r=e.parentNode;for(;r;){const s=n.getId(r);if(t.some(i=>i.id===s))return!0;r=r.parentNode}return!1}function Ba(t,e){return t.size===0?!1:bu(t,e)}function bu(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:bu(t,n):!1}let Tn;function gx(t){Tn=t}function yx(){Tn=void 0}const Q=t=>Tn?(...n)=>{try{return t(...n)}catch(r){if(Tn&&Tn(r)===!0)return()=>{};throw r}}:t,Jt=[];function qn(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function xu(t,e){var o,a;const n=new hx;Jt.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const s=(a=(o=window==null?void 0:window.Zone)==null?void 0:o.__symbol__)==null?void 0:a.call(o,"MutationObserver");s&&window[s]&&(r=window[s]);const i=new r(Q(c=>{t.onMutation&&t.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return i.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function _x({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const s=typeof e.mousemove=="number"?e.mousemove:50,i=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const c=On(Q(d=>{const p=Date.now()-a;t(o.map(h=>(h.timeOffset-=p,h)),d),o=[],a=null}),i),l=Q(On(Q(d=>{const p=qn(d),{clientX:h,clientY:m}=ei(d)?d.changedTouches[0]:d;a||(a=Pr()),o.push({x:h,y:m,id:r.getId(p),timeOffset:Pr()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?q.Drag:d instanceof MouseEvent?q.MouseMove:q.TouchMove)}),s,{trailing:!1})),f=[be("mousemove",l,n),be("touchmove",l,n),be("drag",l,n)];return Q(()=>{f.forEach(d=>d())})}function Sx({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let l=null;const f=d=>p=>{const h=qn(p);if(ke(h,r,s,i,!0))return;let m=null,y=d;if("pointerType"in p){switch(p.pointerType){case"mouse":m=Ye.Mouse;break;case"touch":m=Ye.Touch;break;case"pen":m=Ye.Pen;break}m===Ye.Touch?Se[d]===Se.MouseDown?y="TouchStart":Se[d]===Se.MouseUp&&(y="TouchEnd"):Ye.Pen}else ei(p)&&(m=Ye.Touch);m!==null?(l=m,(y.startsWith("Touch")&&m===Ye.Touch||y.startsWith("Mouse")&&m===Ye.Mouse)&&(m=null)):Se[d]===Se.Click&&(m=l,l=null);const _=ei(p)?p.changedTouches[0]:p;if(!_)return;const T=n.getId(h),{clientX:w,clientY:D}=_;Q(t)({type:Se[y],id:T,x:w,y:D,...m!==null&&{pointerType:m}})};return Object.keys(Se).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let p=rn(d);const h=f(d);if(window.PointerEvent)switch(Se[d]){case Se.MouseDown:case Se.MouseUp:p=p.replace("mouse","pointer");break;case Se.TouchStart:case Se.TouchEnd:return}c.push(be(p,h,e))}),Q(()=>{c.forEach(d=>d())})}function Eu({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=Q(On(Q(c=>{const l=qn(c);if(!l||ke(l,r,s,i,!0))return;const f=n.getId(l);if(l===e&&e.defaultView){const d=du(e.defaultView);t({id:f,x:d.left,y:d.top})}else t({id:f,x:l.scrollLeft,y:l.scrollTop})}),o.scroll||100));return be("scroll",a,e)}function bx({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const s=Q(On(Q(()=>{const i=fu(),o=pu();(n!==i||r!==o)&&(t({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return be("resize",s,e)}const xx=["INPUT","TEXTAREA","SELECT"],Ua=new WeakMap;function Ex({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:f,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:m,unmaskTextSelector:y}){function _(k){let b=qn(k);const x=k.isTrusted,g=b&&Qs(b.tagName);if(g==="OPTION"&&(b=b.parentElement),!b||!g||xx.indexOf(g)<0||ke(b,r,s,i,!0))return;const E=b;if(E.classList.contains(o)||a&&E.matches(a))return;const v=Bi(b);let I=Lr(E,g,v),N=!1;const U=Jr({maskInputOptions:c,tagName:g,type:v}),R=sn(b,p,m,h,y,U);(v==="radio"||v==="checkbox")&&(N=b.checked),I=An({isMasked:R,element:b,value:I,maskInputFn:l}),T(b,d?{text:I,isChecked:N,userTriggered:x}:{text:I,isChecked:N});const L=b.name;v==="radio"&&L&&N&&e.querySelectorAll(`input[type="radio"][name="${L}"]`).forEach(O=>{if(O!==b){const j=An({isMasked:R,element:O,value:Lr(O,g,v),maskInputFn:l});T(O,d?{text:j,isChecked:!N,userTriggered:!1}:{text:j,isChecked:!N})}})}function T(k,b){const x=Ua.get(k);if(!x||x.text!==b.text||x.isChecked!==b.isChecked){Ua.set(k,b);const g=n.getId(k);Q(t)({...b,id:g})}}const D=(f.input==="last"?["change"]:["input","change"]).map(k=>be(k,Q(_),e)),P=e.defaultView;if(!P)return()=>{D.forEach(k=>k())};const M=P.Object.getOwnPropertyDescriptor(P.HTMLInputElement.prototype,"value"),A=[[P.HTMLInputElement.prototype,"value"],[P.HTMLInputElement.prototype,"checked"],[P.HTMLSelectElement.prototype,"value"],[P.HTMLTextAreaElement.prototype,"value"],[P.HTMLSelectElement.prototype,"selectedIndex"],[P.HTMLOptionElement.prototype,"selected"]];return M&&M.set&&D.push(...A.map(k=>uu(k[0],k[1],{set(){Q(_)({target:this,isTrusted:!1})}},!1,P))),Q(()=>{D.forEach(k=>k())})}function jr(t){const e=[];function n(r,s){if(or("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||or("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||or("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||or("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(t,e)}function lt(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function vx({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Q((f,d,p)=>{const[h,m]=p,{id:y,styleId:_}=lt(d,e,n.styleMirror);return(y&&y!==-1||_&&_!==-1)&&t({id:y,styleId:_,adds:[{rule:h,index:m}]}),f.apply(d,p)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Q((f,d,p)=>{const[h]=p,{id:m,styleId:y}=lt(d,e,n.styleMirror);return(m&&m!==-1||y&&y!==-1)&&t({id:m,styleId:y,removes:[{index:h}]}),f.apply(d,p)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Q((f,d,p)=>{const[h]=p,{id:m,styleId:y}=lt(d,e,n.styleMirror);return(m&&m!==-1||y&&y!==-1)&&t({id:m,styleId:y,replace:h}),f.apply(d,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Q((f,d,p)=>{const[h]=p,{id:m,styleId:y}=lt(d,e,n.styleMirror);return(m&&m!==-1||y&&y!==-1)&&t({id:m,styleId:y,replaceSync:h}),f.apply(d,p)})}));const c={};ar("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ar("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ar("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ar("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach(([f,d])=>{l[f]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(l[f].insertRule,{apply:Q((p,h,m)=>{const[y,_]=m,{id:T,styleId:w}=lt(h.parentStyleSheet,e,n.styleMirror);return(T&&T!==-1||w&&w!==-1)&&t({id:T,styleId:w,adds:[{rule:y,index:[...jr(h),_||0]}]}),p.apply(h,m)})}),d.prototype.deleteRule=new Proxy(l[f].deleteRule,{apply:Q((p,h,m)=>{const[y]=m,{id:_,styleId:T}=lt(h.parentStyleSheet,e,n.styleMirror);return(_&&_!==-1||T&&T!==-1)&&t({id:_,styleId:T,removes:[{index:[...jr(h),y]}]}),p.apply(h,m)})})}),Q(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([f,d])=>{d.prototype.insertRule=l[f].insertRule,d.prototype.deleteRule=l[f].deleteRule})})}function vu({mirror:t,stylesheetManager:e},n){var o,a,c;let r=null;n.nodeName==="#document"?r=t.getId(n):r=t.getId(n.host);const s=n.nodeName==="#document"?(o=n.defaultView)==null?void 0:o.Document:(c=(a=n.ownerDocument)==null?void 0:a.defaultView)==null?void 0:c.ShadowRoot,i=s!=null&&s.prototype?Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var l;return(l=i.get)==null?void 0:l.call(this)},set(l){var d;const f=(d=i.set)==null?void 0:d.call(this,l);if(r!==null&&r!==-1)try{e.adoptStyleSheets(l,r)}catch{}return f}}),Q(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function wx({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Q((a,c,l)=>{var y;const[f,d,p]=l;if(n.has(f))return i.apply(c,[f,d,p]);const{id:h,styleId:m}=lt((y=c.parentRule)==null?void 0:y.parentStyleSheet,e,r.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,set:{property:f,value:d,priority:p},index:jr(c.parentRule)}),a.apply(c,l)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Q((a,c,l)=>{var h;const[f]=l;if(n.has(f))return o.apply(c,[f]);const{id:d,styleId:p}=lt((h=c.parentRule)==null?void 0:h.parentStyleSheet,e,r.styleMirror);return(d&&d!==-1||p&&p!==-1)&&t({id:d,styleId:p,remove:{property:f},index:jr(c.parentRule)}),a.apply(c,l)})}),Q(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function Tx({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=Q(l=>On(Q(f=>{const d=qn(f);if(!d||ke(d,e,n,r,!0))return;const{currentTime:p,volume:h,muted:m,playbackRate:y}=d;t({type:l,id:s.getId(d),currentTime:p,volume:h,muted:m,playbackRate:y})}),i.media||500)),c=[be("play",a(Wt.Play),o),be("pause",a(Wt.Pause),o),be("seeked",a(Wt.Seeked),o),be("volumechange",a(Wt.VolumeChange),o),be("ratechange",a(Wt.RateChange),o)];return Q(()=>{c.forEach(l=>l())})}function kx({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,l,f){const d=new i(c,l,f);return s.set(d,{family:c,buffer:typeof l!="string",descriptors:f,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),d};const o=Hi(e.fonts,"add",function(a){return function(c){return Qr(Q(()=>{const l=s.get(c);l&&(t(l),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),Q(()=>{r.forEach(a=>a())})}function Ix(t){const{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=t;let a=!0;const c=Q(()=>{const l=e.getSelection();if(!l||a&&(l!=null&&l.isCollapsed))return;a=l.isCollapsed||!1;const f=[],d=l.rangeCount||0;for(let p=0;p<d;p++){const h=l.getRangeAt(p),{startContainer:m,startOffset:y,endContainer:_,endOffset:T}=h;ke(m,r,s,i,!0)||ke(_,r,s,i,!0)||f.push({start:n.getId(m),startOffset:y,end:n.getId(_),endOffset:T})}o({ranges:f})});return c(),be("selectionchange",c)}function Cx({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:Hi(n.customElements,"define",function(s){return function(i,o,a){try{e({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function Nx(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};let r;t.recordDOM&&(r=xu(t,t.doc));const s=_x(t),i=Sx(t),o=Eu(t),a=bx(t,{win:n}),c=Ex(t),l=Tx(t);let f=()=>{},d=()=>{},p=()=>{},h=()=>{};t.recordDOM&&(f=vx(t,{win:n}),d=vu(t,t.doc),p=wx(t,{win:n}),t.collectFonts&&(h=kx(t)));const m=Ix(t),y=Cx(t),_=[];for(const T of t.plugins)_.push(T.observer(T.callback,n,T.options));return Q(()=>{Jt.forEach(T=>T.reset()),r==null||r.disconnect(),s(),i(),o(),a(),c(),l(),f(),d(),p(),h(),m(),y(),_.forEach(T=>T())})}function or(t){return typeof window[t]<"u"}function ar(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class ri{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,s){const i=r||this.getIdToRemoteIdMap(e),o=s||this.getRemoteIdToIdMap(e);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(e,n){const r=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return n.map(i=>this.getId(e,i,r,s))}getRemoteId(e,n,r){const s=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(s=>this.getRemoteId(e,s,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}class Rx{constructor(){this.crossOriginIframeMirror=new ri(Ui),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Mx{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ri(Ui),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ri(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){var s,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((s=e.contentWindow)==null||s.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e);const r=Vi(e);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(e,n){var r;switch(n.type){case K.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:K.IncrementalSnapshot,data:{source:q.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case K.Meta:case K.Load:case K.DomContentLoaded:return!1;case K.Plugin:return n;case K.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case K.IncrementalSnapshot:switch(n.data.source){case q.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(s.node,i)}),n.data.removes.forEach(s=>{this.replaceIds(s,e,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,e,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,e,["id"])}),n;case q.Drag:case q.TouchMove:case q.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,e,["id"])}),n;case q.ViewportResize:return!1;case q.MediaInteraction:case q.MouseInteraction:case q.Scroll:case q.CanvasMutation:case q.Input:return this.replaceIds(n.data,e,["id"]),n;case q.StyleSheetRule:case q.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case q.Font:return n;case q.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,e,["start","end"])}),n;case q.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),(r=n.data.styles)==null||r.forEach(s=>{this.replaceStyleIds(s,e,["styleId"])}),n}}return!1}replace(e,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=e.getIds(r,n[i]):n[i]=e.getId(r,n[i]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==de.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Ax{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Lx{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!wn(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const r=xu({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Eu({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Qr(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(vu({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const n=Vi(e),r=fx(e);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(Hi(e.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Su(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ox=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cr=0;cr<Ha.length;cr++)Ox[Ha.charCodeAt(cr)]=cr;class za{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Px{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new ax,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of e){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:nu(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class jx{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(s=>s!==n)}add(e,n){this.active||(this.active=!0,ux(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}destroy(){}}let ce,Dr;var ic;try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=((ic=t.contentWindow)==null?void 0:ic.Array.from)||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const Fe=Pb();function Ze(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:f="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:m=!0,maskAllInputs:y,maskInputOptions:_,slimDOMOptions:T,maskAttributeFn:w,maskInputFn:D,maskTextFn:P,maxCanvasSize:M=null,packFn:A,sampling:k={},dataURLOptions:b={},mousemoveWait:x,recordDOM:g=!0,recordCanvas:E=!1,recordCrossOriginIframes:v=!1,recordAfter:I=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:N=!1,collectFonts:U=!1,inlineImages:R=!1,plugins:L,keepIframeSrcFn:O=()=>!1,ignoreCSSAttributes:j=new Set([]),errorHandler:$,onMutation:B,getCanvasManager:G}=t;gx($);const ae=v?window.parent===window:!0;let me=!1;if(!ae)try{window.parent.document&&(me=!1)}catch{me=!0}if(ae&&!e)throw new Error("emit function is required");if(!ae&&!me)return()=>{};x!==void 0&&k.mousemove===void 0&&(k.mousemove=x),Fe.reset();const fe=y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},Ge=T===!0||T==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:T==="all",headMetaDescKeywords:T==="all"}:T||{};ox();let Ne,ue=0;const Bt=ne=>{for(const De of L||[])De.eventProcessor&&(ne=De.eventProcessor(ne));return A&&!me&&(ne=A(ne)),ne};ce=(ne,De)=>{var Ee;const J=ne;if(J.timestamp=Pr(),(Ee=Jt[0])!=null&&Ee.isFrozen()&&J.type!==K.FullSnapshot&&!(J.type===K.IncrementalSnapshot&&J.data.source===q.Mutation)&&Jt.forEach(Re=>Re.unfreeze()),ae)e==null||e(Bt(J),De);else if(me){const Re={type:"rrweb",event:Bt(J),origin:window.location.origin,isCheckout:De};window.parent.postMessage(Re,"*")}if(J.type===K.FullSnapshot)Ne=J,ue=0;else if(J.type===K.IncrementalSnapshot){if(J.data.source===q.Mutation&&J.data.isAttachIframe)return;ue++;const Re=r&&ue>=r,re=n&&Ne&&J.timestamp-Ne.timestamp>n;(Re||re)&&rs(!0)}};const St=ne=>{ce({type:K.IncrementalSnapshot,data:{source:q.Mutation,...ne}})},eo=ne=>ce({type:K.IncrementalSnapshot,data:{source:q.Scroll,...ne}}),Yu=ne=>ce({type:K.IncrementalSnapshot,data:{source:q.CanvasMutation,...ne}}),Ju=ne=>ce({type:K.IncrementalSnapshot,data:{source:q.AdoptedStyleSheet,...ne}}),bt=new Px({mutationCb:St,adoptedStyleSheetCb:Ju}),xt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Rx:new Mx({mirror:Fe,mutationCb:St,stylesheetManager:bt,recordCrossOriginIframes:v,wrappedEmit:ce});for(const ne of L||[])ne.getMirror&&ne.getMirror({nodeMirror:Fe,crossOriginIframeMirror:xt.crossOriginIframeMirror,crossOriginIframeStyleMirror:xt.crossOriginIframeStyleMirror});const ts=new jx,ns=Fx(G,{mirror:Fe,win:window,mutationCb:ne=>ce({type:K.IncrementalSnapshot,data:{source:q.CanvasMutation,...ne}}),recordCanvas:E,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:M,sampling:k.canvas,dataURLOptions:b,errorHandler:$}),Kn=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ax:new Lx({mutationCb:St,scrollCb:eo,bypassOptions:{onMutation:B,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:f,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:m,maskInputOptions:fe,dataURLOptions:b,maskAttributeFn:w,maskTextFn:P,maskInputFn:D,recordCanvas:E,inlineImages:R,sampling:k,slimDOMOptions:Ge,iframeManager:xt,stylesheetManager:bt,canvasManager:ns,keepIframeSrcFn:O,processedNodeManager:ts},mirror:Fe}),rs=(ne=!1)=>{if(!g)return;ce({type:K.Meta,data:{href:window.location.href,width:pu(),height:fu()}},ne),bt.reset(),Kn.init(),Jt.forEach(J=>J.lock());const De=sx(document,{mirror:Fe,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:f,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:m,maskAllInputs:fe,maskAttributeFn:w,maskInputFn:D,maskTextFn:P,slimDOM:Ge,dataURLOptions:b,recordCanvas:E,inlineImages:R,onSerialize:J=>{gu(J,Fe)&&xt.addIframe(J),yu(J,Fe)&&bt.trackLinkElement(J),ti(J)&&Kn.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,Ee)=>{xt.attachIframe(J,Ee),J.contentWindow&&ns.addWindow(J.contentWindow),Kn.observeAttachShadow(J)},onStylesheetLoad:(J,Ee)=>{bt.attachLinkElement(J,Ee)},onBlockedImageLoad:(J,Ee,{width:Re,height:re})=>{St({adds:[],removes:[],texts:[],attributes:[{id:Ee.id,attributes:{style:{width:`${Re}px`,height:`${re}px`}}}]})},keepIframeSrcFn:O});if(!De)return console.warn("Failed to snapshot the document");ce({type:K.FullSnapshot,data:{node:De,initialOffset:du(window)}}),Jt.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&bt.adoptStyleSheets(document.adoptedStyleSheets,Fe.getId(document))};Dr=rs;try{const ne=[],De=Ee=>{var Re;return Q(Nx)({onMutation:B,mutationCb:St,mousemoveCb:(re,ss)=>ce({type:K.IncrementalSnapshot,data:{source:ss,positions:re}}),mouseInteractionCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.MouseInteraction,...re}}),scrollCb:eo,viewportResizeCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.ViewportResize,...re}}),inputCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.Input,...re}}),mediaInteractionCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.MediaInteraction,...re}}),styleSheetRuleCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.StyleSheetRule,...re}}),styleDeclarationCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.StyleDeclaration,...re}}),canvasMutationCb:Yu,fontCb:re=>ce({type:K.IncrementalSnapshot,data:{source:q.Font,...re}}),selectionCb:re=>{ce({type:K.IncrementalSnapshot,data:{source:q.Selection,...re}})},customElementCb:re=>{ce({type:K.IncrementalSnapshot,data:{source:q.CustomElement,...re}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:f,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:fe,inlineStylesheet:m,sampling:k,recordDOM:g,recordCanvas:E,inlineImages:R,userTriggeredOnInput:N,collectFonts:U,doc:Ee,maskAttributeFn:w,maskInputFn:D,maskTextFn:P,keepIframeSrcFn:O,blockSelector:i,unblockSelector:o,slimDOMOptions:Ge,dataURLOptions:b,mirror:Fe,iframeManager:xt,stylesheetManager:bt,shadowDomManager:Kn,processedNodeManager:ts,canvasManager:ns,ignoreCSSAttributes:j,plugins:((Re=L==null?void 0:L.filter(re=>re.observer))==null?void 0:Re.map(re=>({observer:re.observer,options:re.options,callback:ss=>ce({type:K.Plugin,data:{plugin:re.name,payload:ss}})})))||[]},{})};xt.addLoadListener(Ee=>{try{ne.push(De(Ee.contentDocument))}catch(Re){console.warn(Re)}});const J=()=>{rs(),ne.push(De(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(ne.push(be("DOMContentLoaded",()=>{ce({type:K.DomContentLoaded,data:{}}),I==="DOMContentLoaded"&&J()})),ne.push(be("load",()=>{ce({type:K.Load,data:{}}),I==="load"&&J()},window))),()=>{ne.forEach(Ee=>Ee()),ts.destroy(),Dr=void 0,yx()}}catch(ne){console.warn(ne)}}function Dx(t){if(!Dr)throw new Error("please take full snapshot after start recording");Dr(t)}Ze.mirror=Fe;Ze.takeFullSnapshot=Dx;function Fx(t,e){try{return t?t(e):new za}catch{return console.warn("Unable to initialize CanvasManager"),new za}}var Va;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Va||(Va={}));const $x=3,Bx=5;function Wi(t){return t>9999999999?t:t*1e3}function Es(t){return t>9999999999?t/1e3:t}function Gn(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:K.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:$e(e,10,1e3)}}),e.category==="console")))}const Ux="button,a";function wu(t){return t.closest(Ux)||t}function Tu(t){const e=ku(t);return!e||!(e instanceof Element)?e:wu(e)}function ku(t){return Hx(t)?t.target:t}function Hx(t){return typeof t=="object"&&!!t&&"target"in t}let ut;function zx(t){return ut||(ut=[],Vx()),ut.push(t),()=>{const e=ut?ut.indexOf(t):-1;e>-1&&ut.splice(e,1)}}function Vx(){we(oe,"open",function(t){return function(...e){if(ut)try{ut.forEach(n=>n())}catch{}return t.apply(oe,e)}})}const Wx=new Set([q.Mutation,q.StyleSheetRule,q.StyleDeclaration,q.AdoptedStyleSheet,q.CanvasMutation,q.Selection,q.MediaInteraction]);function qx(t,e,n){t.handleClick(e,n)}class Gx{constructor(e,n,r=Gn){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=zx(()=>{this._lastMutation=Wa()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(Yx(n,this._ignoreSelector)||!Jx(e))return;const r={timestamp:Es(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Es(e)}registerScroll(e=Date.now()){this._lastScroll=Es(e)}registerClick(e){const n=wu(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=Wa();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=e;if(i){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,l=c<this._timeout*1e3?"mutation":"timeout",f={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:oe.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:l,clickCount:o||1}};this._addBreadcrumbEvent(n,f);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:oe.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Wn(()=>this._checkClicks(),1e3)}}const Kx=["A","BUTTON","INPUT"];function Yx(t,e){return!!(!Kx.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function Jx(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function Wa(){return Date.now()/1e3}function Xx(t,e){try{if(!Qx(e))return;const{source:n}=e.data;if(Wx.has(n)&&t.registerMutation(e.timestamp),n===q.Scroll&&t.registerScroll(e.timestamp),Zx(e)){const{type:r,id:s}=e.data,i=Ze.mirror.getNode(s);i instanceof HTMLElement&&r===Se.Click&&t.registerClick(i)}}catch{}}function Qx(t){return t.type===$x}function Zx(t){return t.data.source===q.MouseInteraction}function Ve(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var qi=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(qi||{});const eE=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function tE(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const n in t)if(eE.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const nE=t=>e=>{if(!t.isEnabled())return;const n=rE(e);if(!n)return;const r=e.name==="click",s=r?e.event:void 0;r&&t.clickDetector&&(s!=null&&s.target)&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&qx(t.clickDetector,n,Tu(e.event)),Gn(t,n)};function Iu(t,e){const n=Ze.mirror.getId(t),r=n&&Ze.mirror.getNode(n),s=r&&Ze.mirror.getMeta(r),i=s&&iE(s)?s:null;return{message:e,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===qi.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:tE(i.attributes)}}:{}}}function rE(t){const{target:e,message:n}=sE(t);return Ve({category:`ui.${t.name}`,...Iu(e,n)})}function sE(t){const e=t.name==="click";let n,r=null;try{r=e?Tu(t.event):ku(t.event),n=Pe(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function iE(t){return t.type===qi.Element}function oE(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=aE(e);n&&Gn(t,n)}function aE(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=t;if(!o||cE(o)||!i)return null;const a=e||r||s,c=i.length===1;if(!a&&c)return null;const l=Pe(o,{maxStringLength:200})||"<unknown>",f=Iu(o,l);return Ve({category:"ui.keyDown",message:l,data:{...f.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function cE(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const lE={resource:hE,paint:fE,navigation:pE};function vs(t,e){return({metric:n})=>void e.replayPerformanceEntries.push(t(n))}function uE(t){return t.map(dE).filter(Boolean)}function dE(t){const e=lE[t.entryType];return e?e(t):null}function on(t){return((Te()||oe.performance.timeOrigin)+t)/1e3}function fE(t){const{duration:e,entryType:n,name:r,startTime:s}=t,i=on(s);return{type:n,name:r,start:i,end:i+e,data:void 0}}function pE(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:f,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:m,type:y}=t;return s===0?null:{type:`${e}.${y}`,start:on(h),end:on(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:f,loadEventEnd:d,domComplete:i,redirectCount:p}}}function hE(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:l}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:on(i),end:on(s),name:r,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function mE(t){const e=t.entries[t.entries.length-1],n=e!=null&&e.element?[e.element]:void 0;return Gi(t,"largest-contentful-paint",n)}function gE(t){return t.sources!==void 0}function yE(t){const e=[],n=[];for(const r of t.entries)if(gE(r)){const s=[];for(const i of r.sources)if(i.node){n.push(i.node);const o=Ze.mirror.getId(i.node);o&&s.push(o)}e.push({value:r.value,nodeIds:s.length?s:void 0})}return Gi(t,"cumulative-layout-shift",n,e)}function _E(t){const e=t.entries[t.entries.length-1],n=e!=null&&e.target?[e.target]:void 0;return Gi(t,"interaction-to-next-paint",n)}function Gi(t,e,n,r){const s=t.value,i=t.rating,o=on(s);return{type:"web-vital",name:e,start:o,end:o,data:{value:s,size:s,rating:i,nodeIds:n?n.map(a=>Ze.mirror.getId(a)):void 0,attributions:r}}}function SE(t){function e(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function n({entries:s}){s.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(jt(s,n))}),r.push(Pi(vs(mE,t)),Oi(vs(yE,t)),Ul(vs(_E,t))),()=>{r.forEach(s=>s())}}const H=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,bE='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function xE(){const t=new Blob([bE]);return URL.createObjectURL(t)}const qa=["log","warn","error"],_r="[Replay] ";function ws(t,e="info"){it({category:"console",data:{logger:"replay"},level:e,message:`${_r}${t}`},{level:e})}function EE(){let t=!1,e=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{t=!!r.captureExceptions,e=!!r.traceInternals}};return H?(qa.forEach(r=>{n[r]=(...s)=>{C[r](_r,...s),e&&ws(s.join(""),Tl(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),C.error(_r,r),t?il(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):e&&ws(r,"error")},n.infoTick=(...r)=>{C.log(_r,...r),e&&setTimeout(()=>ws(r[0]),0)}):qa.forEach(r=>{n[r]=()=>{}}),n}const z=EE();class Ki extends Error{constructor(){super(`Event buffer exceeded maximum size of ${$i}.`)}}class Cu{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>$i)throw new Ki;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?Wi(e):null}}class vE{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){H&&z.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===e&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){H&&z.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class wE{constructor(e){this._worker=new vE(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=Wi(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>$i?Promise.reject(new Ki):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{H&&z.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class TE{constructor(e){this._fallback=new Cu,this._compression=new wE(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){H&&z.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const i of e)s.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(i){H&&z.exception(i,"Failed to add events when switching buffers.")}}}function kE({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=IE(e);if(n)return n}return H&&z.log("Using simple buffer"),new Cu}function IE(t){try{const e=t||CE();if(!e)return;H&&z.log(`Using compression worker${t?` from ${t}`:""}`);const n=new Worker(e);return new TE(n)}catch(e){H&&z.exception(e,"Failed to create compression worker")}}function CE(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?xE():""}function Yi(){try{return"sessionStorage"in oe&&!!oe.sessionStorage}catch{return!1}}function NE(t){RE(),t.session=void 0}function RE(){if(Yi())try{oe.sessionStorage.removeItem(Di)}catch{}}function Nu(t){return t===void 0?!1:Math.random()<t}function Ji(t){if(Yi())try{oe.sessionStorage.setItem(Di,JSON.stringify(t))}catch{}}function Ru(t){const e=Date.now(),n=t.id||Ie(),r=t.started||e,s=t.lastActivity||e,i=t.segmentId||0,o=t.sampled,a=t.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function ME(t,e){return Nu(t)?"session":e?"buffer":!1}function Ga({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=ME(t,e),i=Ru({sampled:s,previousSessionId:r});return n&&Ji(i),i}function AE(){if(!Yi())return null;try{const t=oe.sessionStorage.getItem(Di);if(!t)return null;const e=JSON.parse(t);return H&&z.infoTick("Loading existing session"),Ru(e)}catch{return null}}function si(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function Mu(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return si(t.started,e,r)||si(t.lastActivity,n,r)}function Au(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!Mu(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function Ts({sessionIdleExpire:t,maxReplayDuration:e,previousSessionId:n},r){const s=r.stickySession&&AE();return s?Au(s,{sessionIdleExpire:t,maxReplayDuration:e})?(H&&z.infoTick("Session in sessionStorage is expired, creating new one..."),Ga(r,{previousSessionId:s.id})):s:(H&&z.infoTick("Creating new session"),Ga(r,{previousSessionId:n}))}function LE(t){return t.type===K.Custom}function Xi(t,e,n){return Ou(t,e)?(Lu(t,e,n),!0):!1}function OE(t,e,n){return Ou(t,e)?Lu(t,e,n):Promise.resolve(null)}async function Lu(t,e,n){const{eventBuffer:r}=t;if(!r||r.waitForCheckout&&!n)return null;const s=t.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=t.getOptions(),o=PE(e,i.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(i){const o=i&&i instanceof Ki,a=o?"addEventSizeExceeded":"addEvent",c=X();if(c){const l=o?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(l,"replay")}if(o&&s)return r.clear(),r.waitForCheckout=!0,null;t.handleException(i),await t.stop({reason:a})}}function Ou(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Wi(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(H&&z.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function PE(t,e){try{if(typeof e=="function"&&LE(t))return e(t)}catch(n){return H&&z.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}function Qi(t){return!t.type}function ii(t){return t.type==="transaction"}function jE(t){return t.type==="replay_event"}function Ka(t){return t.type==="feedback"}function DE(t){return(e,n)=>{if(!t.isEnabled()||!Qi(e)&&!ii(e))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(ii(e)){FE(t,e);return}$E(t,e)}}}function FE(t,e){var r,s;const n=t.getContext();(s=(r=e.contexts)==null?void 0:r.trace)!=null&&s.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function $E(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();typeof r=="function"&&!r(e)||Wn(async()=>{try{await t.sendBufferedReplayOrFlush()}catch(s){t.handleException(s)}})}function BE(t){return e=>{!t.isEnabled()||!Qi(e)||UE(t,e)}}function UE(t,e){var r,s,i;const n=(i=(s=(r=e.exception)==null?void 0:r.values)==null?void 0:s[0])==null?void 0:i.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const o=Ve({category:"replay.hydrate-error",data:{url:dn()}});Gn(t,o)}}function HE(t){const e=X();e&&e.on("beforeAddBreadcrumb",n=>zE(t,n))}function zE(t,e){if(!t.isEnabled()||!Pu(e))return;const n=VE(e);n&&Gn(t,n)}function VE(t){return!Pu(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?WE(t):Ve(t)}function WE(t){var s;const e=(s=t.data)==null?void 0:s.arguments;if(!Array.isArray(e)||e.length===0)return Ve(t);let n=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>ir?(n=!0,`${i.slice(0,ir)}…`):i;if(typeof i=="object")try{const o=$e(i,7);return JSON.stringify(o).length>ir?(n=!0,`${JSON.stringify(o,null,2).slice(0,ir)}…`):o}catch{}return i});return Ve({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Pu(t){return!!t.category}function qE(t,e){var n,r,s;return t.type||!((r=(n=t.exception)==null?void 0:n.values)!=null&&r.length)?!1:!!((s=e.originalException)!=null&&s.__rrweb__)}function ju(){const t=se().getPropagationContext().dsc;t&&delete t.replay_id;const e=xe();if(e){const n=st(e);delete n.replay_id}}function GE(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:K.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function KE(t,e){return t.recordingMode!=="buffer"||e.message===Fi||!e.exception||e.type?!1:Nu(t.getOptions().errorSampleRate)}function YE(t){return Object.assign((e,n)=>!t.isEnabled()||t.isPaused()?e:jE(e)?(delete e.breadcrumbs,e):!Qi(e)&&!ii(e)&&!Ka(e)?e:t.checkAndHandleExpiredSession()?Ka(e)?(t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),GE(t,e),e):qE(e,n)&&!t.getOptions()._experiments.captureExceptions?(H&&z.log("Ignoring error from rrweb internals",e),null):((KE(t,e)||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),e):(ju(),e),{id:"Replay"})}function Zr(t,e){return e.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=t.throttledAddEvent({type:K.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function JE(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function XE(t){return e=>{if(!t.isEnabled())return;const n=JE(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(Zr(t,[n]),!1)))}}function QE(t,e){return H&&t.getOptions()._experiments.traceInternals?!1:Hg(e,X())}function Du(t,e){t.isEnabled()&&e!==null&&(QE(t,e.name)||t.addUpdate(()=>(Zr(t,[e]),!0)))}function es(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Jl(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function Fu(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Fr(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function $u(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:{method:i,statusCode:o,request:a,response:c}}}function Pn(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function dt(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:i}=ZE(n);return r.body=s,i!=null&&i.length&&(r._meta={warnings:i}),r}function oi(t,e){return Object.entries(t).reduce((n,[r,s])=>{const i=r.toLowerCase();return e.includes(i)&&t[r]&&(n[i]=s),n},{})}function ZE(t){if(!t||typeof t!="string")return{body:t};const e=t.length>Ca,n=ev(t);if(e){const r=t.slice(0,Ca);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function ev(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function $r(t,e){const n=tv(t);return Xe(n,e)}function tv(t,e=oe.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(oe.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function nv(t,e,n){try{const r=await sv(t,e,n),s=$u("resource.fetch",r);Du(n.replay,s)}catch(r){H&&z.exception(r,"Failed to capture fetch breadcrumb")}}function rv(t,e){const{input:n,response:r}=e,s=n?Ql(n):void 0,i=es(s),o=r?Fu(r.headers.get("content-length")):void 0;i!==void 0&&(t.data.request_body_size=i),o!==void 0&&(t.data.response_body_size=o)}async function sv(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=e,{url:o,method:a,status_code:c=0,request_body_size:l,response_body_size:f}=t.data,d=$r(o,n.networkDetailAllowUrls)&&!$r(o,n.networkDetailDenyUrls),p=d?iv(n,e.input,l):Pn(l),h=await ov(d,n,e.response,f);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:p,response:h}}function iv({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const s=n?lv(n,e):{};if(!t)return dt(s,r,void 0);const i=Ql(n),[o,a]=Xl(i,z),c=dt(s,r,o);return a?Fr(c,a):c}async function ov(t,{networkCaptureBodies:e,networkResponseHeaders:n},r,s){if(!t&&s!==void 0)return Pn(s);const i=r?Bu(r.headers,n):{};if(!r||!e&&s!==void 0)return dt(i,s,void 0);const[o,a]=await cv(r),c=av(o,{networkCaptureBodies:e,responseBodySize:s,captureDetails:t,headers:i});return a?Fr(c,a):c}function av(t,{networkCaptureBodies:e,responseBodySize:n,captureDetails:r,headers:s}){try{const i=t!=null&&t.length&&n===void 0?es(t):n;return r?e?dt(s,i,t):dt(s,i,void 0):Pn(i)}catch(i){return H&&z.exception(i,"Failed to serialize response body"),dt(s,n,void 0)}}async function cv(t){const e=uv(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await dv(e)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(H&&z.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(H&&z.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Bu(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function lv(t,e){return t.length===1&&typeof t[0]!="string"?Ya(t[0],e):t.length===2?Ya(t[1],e):{}}function Ya(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?Bu(n,e):Array.isArray(n)?{}:oi(n,e):{}}function uv(t){try{return t.clone()}catch(e){H&&z.exception(e,"Failed to clone response body")}}function dv(t){return new Promise((e,n)=>{const r=Wn(()=>n(new Error("Timeout while trying to read response body")),500);fv(t).then(s=>e(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function fv(t){return await t.text()}async function pv(t,e,n){try{const r=mv(t,e,n),s=$u("resource.xhr",r);Du(n.replay,s)}catch(r){H&&z.exception(r,"Failed to capture xhr breadcrumb")}}function hv(t,e){const{xhr:n,input:r}=e;if(!n)return;const s=es(r),i=n.getResponseHeader("content-length")?Fu(n.getResponseHeader("content-length")):_v(n.response,n.responseType);s!==void 0&&(t.data.request_body_size=s),i!==void 0&&(t.data.response_body_size=i)}function mv(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=e,{url:c,method:l,status_code:f=0,request_body_size:d,response_body_size:p}=t.data;if(!c)return null;if(!a||!$r(c,n.networkDetailAllowUrls)||$r(c,n.networkDetailDenyUrls)){const A=Pn(d),k=Pn(p);return{startTimestamp:s,endTimestamp:i,url:c,method:l,statusCode:f,request:A,response:k}}const h=a[kt],m=h?oi(h.request_headers,n.networkRequestHeaders):{},y=oi(Zl(a),n.networkResponseHeaders),[_,T]=n.networkCaptureBodies?Xl(o,z):[void 0],[w,D]=n.networkCaptureBodies?gv(a):[void 0],P=dt(m,d,_),M=dt(y,p,w);return{startTimestamp:s,endTimestamp:i,url:c,method:l,statusCode:f,request:T?Fr(P,T):P,response:D?Fr(M,D):M}}function gv(t){const e=[];try{return[t.responseText]}catch(n){e.push(n)}try{return yv(t.response,t.responseType)}catch(n){e.push(n)}return H&&z.warn("Failed to get xhr response body",...e),[void 0]}function yv(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch(n){return H&&z.exception(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return H&&z.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function _v(t,e){try{const n=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return es(n)}catch{return}}function Sv(t){const e=X();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=t.getOptions(),a={replay:t,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(c,l)=>bv(a,c,l))}catch{}}function bv(t,e,n){if(e.data)try{xv(e)&&vv(n)&&(hv(e,n),pv(e,n,t)),Ev(e)&&wv(n)&&(rv(e,n),nv(e,n,t))}catch(r){H&&z.exception(r,"Error when enriching network breadcrumb")}}function xv(t){return t.category==="xhr"}function Ev(t){return t.category==="fetch"}function vv(t){return t==null?void 0:t.xhr}function wv(t){return t==null?void 0:t.response}function Tv(t){const e=X();Gl(nE(t)),Yr(XE(t)),HE(t),Sv(t);const n=YE(t);ag(n),e&&(e.on("beforeSendEvent",BE(t)),e.on("afterSendEvent",DE(t)),e.on("createDsc",r=>{const s=t.getSessionId();s&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(r.replay_id=s)}),e.on("spanStart",r=>{t.lastActiveSpan=r}),e.on("spanEnd",r=>{t.lastActiveSpan=r}),e.on("beforeSendFeedback",async(r,s)=>{var o;const i=t.getSessionId();s!=null&&s.includeReplay&&t.isEnabled()&&i&&((o=r.contexts)!=null&&o.feedback)&&(r.contexts.feedback.source==="api"&&await t.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),e.on("openFeedbackWidget",async()=>{await t.sendBufferedReplayOrFlush()}))}async function kv(t){try{return Promise.all(Zr(t,[Iv(oe.performance.memory)]))}catch{return[]}}function Iv(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Cv(t,e,n){return Kg(t,e,{...n,setTimeoutImpl:Wn})}const Le=Z.navigator;function Nv(){return/iPhone|iPad|iPod/i.test((Le==null?void 0:Le.userAgent)??"")||/Macintosh/i.test((Le==null?void 0:Le.userAgent)??"")&&(Le!=null&&Le.maxTouchPoints)&&(Le==null?void 0:Le.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function Rv(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){H&&z.warn("Received replay event after session expired.");return}const s=r||!e;e=!0,t.clickDetector&&Xx(t.clickDetector,n),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!Xi(t,n,s))return!0;if(!s)return!1;const i=t.session;if(Av(t,s),t.recordingMode==="buffer"&&i&&t.eventBuffer){const o=t.eventBuffer.getEarliestTimestamp();o&&(H&&z.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,t.getOptions().stickySession&&Ji(i))}return i!=null&&i.previousSessionId||t.recordingMode==="session"&&t.flush(),!0})}}function Mv(t){const e=t.getOptions();return{type:K.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function Av(t,e){!e||!t.session||t.session.segmentId!==0||Xi(t,Mv(t),!1)}function Lv(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function Ov(t,e,n,r){return _t(Xc(t,bi(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function Pv({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+t.length),n.set(i),n.set(t,i.length)}return n}async function jv({client:t,scope:e,replayId:n,event:r}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,i={event_id:n,integrations:s};t.emit("preprocessEvent",r,i);const o=await sl(t.getOptions(),r,i,e,t,qe());if(!o)return null;t.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const a=t.getSdkMetadata(),{name:c,version:l,settings:f}=(a==null?void 0:a.sdk)||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:l||"0.0.0",settings:f},o}async function Dv({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=Pv({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:f}=r,d=X(),p=se(),h=d==null?void 0:d.getTransport(),m=d==null?void 0:d.getDsn();if(!d||!h||!m||!i.sampled)return Promise.resolve({});const y={type:hb,replay_start_timestamp:f/1e3,timestamp:s/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:e,segment_id:n,replay_type:i.sampled},_=await jv({scope:p,client:d,replayId:e,event:y});if(!_)return d.recordDroppedEvent("event_processor","replay"),H&&z.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete _.sdkProcessingMetadata;const T=Ov(_,o,m,d.getOptions().tunnel);let w;try{w=await h.send(T)}catch(P){const M=new Error(Fi);try{M.cause=P}catch{}throw M}if(typeof w.statusCode=="number"&&(w.statusCode<200||w.statusCode>=300))throw new Uu(w.statusCode);const D=El({},w);if(xl(D,"replay"))throw new Zi(D);return w}class Uu extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Zi extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Hu(t,e={count:0,interval:bb}){const{recordingData:n,onError:r}=t;if(n.length)try{return await Dv(t),!0}catch(s){if(s instanceof Uu||s instanceof Zi)throw s;if(al("Replays",{_retryCount:e.count}),r&&r(s),e.count>=xb){const i=new Error(`${Fi} - max retries exceeded`);try{i.cause=s}catch{}throw i}return e.interval*=++e.count,new Promise((i,o)=>{Wn(async()=>{try{await Hu(t,e),i(!0)}catch(a){o(a)}},e.interval)})}}const zu="__THROTTLED",Fv="__SKIPPED";function $v(t,e,n){const r=new Map,s=a=>{const c=a-n;r.forEach((l,f)=>{f<c&&r.delete(f)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=e){const f=o;return o=!0,f?Fv:zu}o=!1;const l=r.get(c)||0;return r.set(c,l+1),t(...a)}}class Bv{constructor({options:e,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:mb,sessionIdleExpire:gb},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=Cv(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=$v((o,a)=>OE(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(Eb,r),timeout:r,scrollTimeout:vb,ignoreSelector:s?s.join(","):""}:void 0;if(i&&(this.clickDetector=new Gx(this,i)),H){const o=e._experiments;z.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{oe.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=Ve({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=Ve({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{oE(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){H&&z.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(e),!this.session){H&&z.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",H&&z.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){H&&z.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){H&&z.log("Buffering is in progress, call `flush()` to save the replay");return}H&&z.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Ts({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){H&&z.log("Buffering is in progress, call `flush()` to save the replay");return}H&&z.infoTick("Starting replay in buffer mode");const e=Ts({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Ze({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Sb}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Rv(this),...Nv(),onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){var r;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{H&&z.log(`Stopping Replay${n?` triggered by ${n}`:""}`),ju(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),(r=this.eventBuffer)==null||r.destroy(),this.eventBuffer=null,NE(this)}catch(s){this.handleException(s)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),H&&z.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),H&&z.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();H&&z.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(e){var n,r;if(!(e&&((n=this.session)==null?void 0:n.sampled)===!1))return(r=this.session)==null?void 0:r.id}checkAndHandleExpiredSession(){if(this._lastActivity&&si(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${oe.location.pathname}${oe.location.hash}${oe.location.search}`,n=`${oe.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===zu){const s=Ve({category:"replay.throttled"});this.addUpdate(()=>!Xi(this,{type:Bx,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastActiveSpan||xe(),n=e&&_e(e),s=(n&&ee(n).data||{})[Ue];if(!(!n||!s||!["route","custom"].includes(s)))return ee(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=kE({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=Ts({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return Au(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{oe.document.addEventListener("visibilitychange",this._handleVisibilityChange),oe.addEventListener("blur",this._handleWindowBlur),oe.addEventListener("focus",this._handleWindowFocus),oe.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Tv(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=SE(this)}_removeListeners(){try{oe.document.removeEventListener("visibilitychange",this._handleVisibilityChange),oe.removeEventListener("blur",this._handleWindowBlur),oe.removeEventListener("focus",this._handleWindowFocus),oe.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){!this.session||Mu(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){H&&z.log("Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:K.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=uE(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;e=e.filter(r=>r.start>=n)}return Promise.all(Zr(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||this._requiresManualStart||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){var n;const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){H&&z.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await kv(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const s=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Hu({replayId:e,recordingData:o,segmentId:i,eventContext:s,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const s=X();if(s){const i=r instanceof Zi?"ratelimit_backoff":"send_error";s.recordDroppedEvent(i,"replay")}}}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){H&&z.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){H&&z.log(`Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&H&&z.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(l){this.handleException(l)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Ji(this.session)}_onMutationHandler(e){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&e.some(a=>{const c=Lv(a.target),l=n.join(",");return c==null?void 0:c.matches(l)}))return!1;const r=e.length,s=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=s&&r>s;if(r>i||o){const a=Ve({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(a)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Sn(t,e){return[...t,...e].join(",")}function Uv({mask:t,unmask:e,block:n,unblock:r,ignore:s}){const i=["base","iframe[srcdoc]:not([src])"],o=Sn(t,[".sentry-mask","[data-sentry-mask]"]),a=Sn(e,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:Sn(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Sn(r,[]),ignoreSelector:Sn(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function Hv({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?i:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Ja='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',zv=["content-length","content-type","accept"];let Xa=!1;const Vv=t=>new Wv(t);class Wv{constructor({flushMinDelay:e=yb,flushMaxDelay:n=_b,minReplayDuration:r=wb,maxReplayDuration:s=Na,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:l=!0,maskAllInputs:f=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:h=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:y=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:T=[],networkCaptureBodies:w=!0,networkRequestHeaders:D=[],networkResponseHeaders:P=[],mask:M=[],maskAttributes:A=["title","placeholder","aria-label"],unmask:k=[],block:b=[],unblock:x=[],ignore:g=[],maskFn:E,beforeAddRecordingEvent:v,beforeErrorSampling:I,onError:N}={}){this.name="Replay";const U=Uv({mask:M,unmask:k,block:b,unblock:x,ignore:g});if(this._recordingOptions={maskAllInputs:f,maskAllText:l,maskInputOptions:{password:!0},maskTextFn:E,maskInputFn:E,maskAttributeFn:(R,L,O)=>Hv({maskAttributes:A,maskAllText:l,privacyOptions:U,key:R,value:L,el:O}),...U,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:R=>{try{R.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,Tb),maxReplayDuration:Math.min(s,Na),stickySession:i,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:f,maskAllText:l,mutationBreadcrumbLimit:p,mutationLimit:h,slowClickTimeout:m,slowClickIgnoreSelectors:y,networkDetailAllowUrls:_,networkDetailDenyUrls:T,networkCaptureBodies:w,networkRequestHeaders:Qa(D),networkResponseHeaders:Qa(P),beforeAddRecordingEvent:v,beforeErrorSampling:I,onError:N,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ja}`:Ja),this._isInitialized&&xa())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Xa}set _isInitialized(e){Xa=e}afterAllSetup(e){!xa()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(e){var n;if((n=this._replay)!=null&&n.isEnabled())return this._replay.getSessionId(e)}getRecordingMode(){var e;if((e=this._replay)!=null&&e.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const n=qv(this._initialOptions,e);this._replay=new Bv({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const n=e.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function qv(t,e){const n=e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...t},s=Ot(n.replaysSessionSampleRate),i=Ot(n.replaysOnErrorSampleRate);return s==null&&i==null&&Ft(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),i!=null&&(r.errorSampleRate=i),r}function Qa(t){return[...zv,...t.map(e=>e.toLowerCase())]}function Gv(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function Vu(t){try{return new URL(t,te.location.origin).href}catch{return}}function Kv(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Wu(t){try{return new Headers(t)}catch{return}}const Za=new WeakMap,ks=new Map,qu={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Yv(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:l}={...qu,...e},f=typeof i=="function"?i:m=>!0,d=m=>Jv(m,a),p={},h=t.getOptions().propagateTraceparent;n&&(t.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(y=>{if(y.op==="http.client"){const _=ks.get(y.span_id);_&&(y.timestamp=_/1e3,ks.delete(y.span_id))}}),m)),s&&Ny(m=>{if(m.response){const y=Za.get(m.response);y&&m.endTimestamp&&ks.set(y,m.endTimestamp)}}),Nl(m=>{const y=Sy(m,f,d,p,{propagateTraceparent:h,onRequestSpanEnd:l});if(m.response&&m.fetchData.__span&&Za.set(m.response,m.fetchData.__span),y){const _=Vu(m.fetchData.url),T=_?At(_).host:void 0;y.setAttributes({"http.url":_,"server.address":T}),o&&ec(y),c==null||c(y,{headers:m.headers})}})),r&&Yl(m=>{var _;const y=Xv(m,f,d,p,h,l);y&&(o&&ec(y),c==null||c(y,{headers:Wu((_=m.xhr.__sentry_xhr_v3__)==null?void 0:_.request_headers)}))})}function ec(t){const{url:e}=ee(t).data;if(!e||typeof e!="string")return;const n=jt("resource",({entries:r})=>{r.forEach(s=>{Kv(s)&&s.name.endsWith(e)&&(t.setAttributes(ql(s)),setTimeout(n))})})}function Jv(t,e){const n=dn();if(n){let r,s;try{r=new URL(t,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return e?Xe(r.toString(),e)||i&&Xe(r.pathname,e):i}else{const r=!!t.match(/^\/(?!\/)/);return e?Xe(t,e):r}}function Xv(t,e,n,r,s,i){const o=t.xhr,a=o==null?void 0:o[kt];if(!o||o.__sentry_own_request__||!a)return;const{url:c,method:l}=a,f=He()&&e(c);if(t.endTimestamp&&f){const T=o.__sentry_xhr_span_id__;if(!T)return;const w=r[T];w&&a.status_code!==void 0&&(Pc(w,a.status_code),w.end(),i==null||i(w,{headers:Wu(Zl(o)),error:t.error}),delete r[T]);return}const d=Vu(c),p=At(d||c),h=Ug(c),m=!!xe(),y=f&&m?mn({name:`${l} ${h}`,attributes:{url:c,type:"xhr","http.method":l,"http.url":d,"server.address":p==null?void 0:p.host,[he]:"auto.http.browser",[rt]:"http.client",...(p==null?void 0:p.search)&&{"http.query":p==null?void 0:p.search},...(p==null?void 0:p.hash)&&{"http.fragment":p==null?void 0:p.hash}}}):new ft;o.__sentry_xhr_span_id__=y.spanContext().spanId,r[o.__sentry_xhr_span_id__]=y,n(c)&&Qv(o,He()&&m?y:void 0,s);const _=X();return _&&_.emit("beforeOutgoingRequestSpan",y,t),y}function Qv(t,e,n){const{"sentry-trace":r,baggage:s,traceparent:i}=wl({span:e,propagateTraceparent:n});r&&Zv(t,r,s,i)}function Zv(t,e,n,r){var i;const s=(i=t.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(s!=null&&s["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),r&&!(s!=null&&s.traceparent)&&t.setRequestHeader("traceparent",r),n){const o=s==null?void 0:s.baggage;(!o||!Gv(o))&&t.setRequestHeader("baggage",n)}}catch{}}function e0(){te.document?te.document.addEventListener("visibilitychange",()=>{const t=xe();if(!t)return;const e=_e(t);if(te.document.hidden&&e){const n="cancelled",{op:r,status:s}=ee(e);je&&C.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||e.setStatus({code:pe,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):je&&C.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const t0=3600,Gu="sentry_previous_trace",n0="sentry.previous_trace";function r0(t,{linkPreviousTrace:e,consistentTraceSampling:n}){const r=e==="session-storage";let s=r?o0():void 0;t.on("spanStart",o=>{if(_e(o)!==o)return;const a=se().getPropagationContext();s=s0(s,o,a),r&&i0(s)});let i=!0;n&&t.on("beforeSampling",o=>{if(!s)return;const a=se(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(ai(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=ai(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[Lc]:s.sampleRate}})}function s0(t,e,n){const r=ee(e);function s(){var a,c;try{return Number((a=n.dsc)==null?void 0:a.sample_rate)??Number((c=r.data)==null?void 0:c[mi])}catch{return 0}}const i={spanContext:e.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!t)return i;const o=t.spanContext;return o.traceId===r.trace_id?t:(Date.now()/1e3-t.startTimestamp<=t0&&(je&&C.log(`Adding previous_trace ${o} link to span ${{op:r.op,...e.spanContext()}}`),e.addLink({context:o,attributes:{[Oh]:"previous_trace"}}),e.setAttribute(n0,`${o.traceId}-${o.spanId}-${ai(o)?1:0}`)),i)}function i0(t){try{te.sessionStorage.setItem(Gu,JSON.stringify(t))}catch(e){je&&C.warn("Could not store previous trace in sessionStorage",e)}}function o0(){var t;try{const e=(t=te.sessionStorage)==null?void 0:t.getItem(Gu);return JSON.parse(e)}catch{return}}function ai(t){return t.traceFlags===1}const a0="BrowserTracing",c0={...hr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...qu},l0=(t={})=>{const e={name:void 0,source:void 0},n=te.document,{enableInp:r,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:l},beforeStartSpan:f,idleTimeout:d,finalTimeout:p,childSpanTimeout:h,markBackgroundSpan:m,traceFetch:y,traceXHR:_,trackFetchStreamPerformance:T,shouldCreateSpanForRequest:w,enableHTTPTimings:D,ignoreResourceSpans:P,ignorePerformanceApiSpans:M,instrumentPageLoad:A,instrumentNavigation:k,detectRedirects:b,linkPreviousTrace:x,consistentTraceSampling:g,enableReportPageLoaded:E,onRequestSpanStart:v,onRequestSpanEnd:I}={...c0,...t};let N,U,R;function L(O,j,$=!0){const B=j.op==="pageload",G=j.name,ae=f?f(j):j,me=ae.attributes||{};if(G!==ae.name&&(me[Ue]="custom",ae.attributes=me),!$){const Ne=$t();mn({...ae,startTime:Ne}).end(Ne);return}e.name=ae.name,e.source=me[Ue];const fe=rl(ae,{idleTimeout:d,finalTimeout:p,childSpanTimeout:h,disableAutoFinish:B,beforeSpanEnd:Ne=>{N==null||N(),$_(Ne,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!l,ignoreResourceSpans:P,ignorePerformanceApiSpans:M}),nc(O,void 0);const ue=se(),Bt=ue.getPropagationContext();ue.setPropagationContext({...Bt,traceId:fe.spanContext().traceId,sampled:yt(fe),dsc:st(Ne)}),B&&(R=void 0)},trimIdleSpanEndTimestamp:!E});B&&E&&(R=fe),nc(O,fe);function Ge(){n&&["interactive","complete"].includes(n.readyState)&&O.emit("idleSpanEnableAutoFinish",fe)}B&&!E&&n&&(n.addEventListener("readystatechange",()=>{Ge()}),Ge())}return{name:a0,setup(O){if(lm(),N=A_({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:l||!1,client:O}),r&&uS(),s&&X_(),o&&Z.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?O_():i&&L_(),a&&P_(),b&&n){const $=()=>{U=ge()};addEventListener("click",$,{capture:!0}),addEventListener("keydown",$,{capture:!0,passive:!0})}function j(){const $=jn(O);$&&!ee($).timestamp&&(je&&C.log(`[Tracing] Finishing current active span with op: ${ee($).op}`),$.setAttribute(Nn,"cancelled"),$.end())}O.on("startNavigationSpan",($,B)=>{if(X()!==O)return;if(B!=null&&B.isRedirect){je&&C.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),L(O,{op:"navigation.redirect",...$},!1);return}U=void 0,j(),qe().setPropagationContext({traceId:nt(),sampleRand:Math.random(),propagationSpanId:He()?void 0:Qe()});const G=se();G.setPropagationContext({traceId:nt(),sampleRand:Math.random(),propagationSpanId:He()?void 0:Qe()}),G.setSDKProcessingMetadata({normalizedRequest:void 0}),L(O,{op:"navigation",...$,parentSpan:null,forceTransaction:!0})}),O.on("startPageLoadSpan",($,B={})=>{if(X()!==O)return;j();const G=B.sentryTrace||tc("sentry-trace"),ae=B.baggage||tc("baggage"),me=em(G,ae),fe=se();fe.setPropagationContext(me),He()||(fe.getPropagationContext().propagationSpanId=Qe()),fe.setSDKProcessingMetadata({normalizedRequest:ki()}),L(O,{op:"pageload",...$})}),O.on("endPageloadSpan",()=>{E&&R&&(R.setAttribute(Nn,"reportPageLoaded"),R.end())})},afterAllSetup(O){let j=dn();if(x!=="off"&&r0(O,{linkPreviousTrace:x,consistentTraceSampling:g}),te.location){if(A){const $=Te();u0(O,{name:te.location.pathname,startTime:$?$/1e3:void 0,attributes:{[Ue]:"url",[he]:"auto.pageload.browser"}})}k&&Yr(({to:$,from:B})=>{if(B===void 0&&(j==null?void 0:j.indexOf($))!==-1){j=void 0;return}j=void 0;const G=Ti($),ae=jn(O),me=ae&&b&&p0(ae,U);d0(O,{name:(G==null?void 0:G.pathname)||te.location.pathname,attributes:{[Ue]:"url",[he]:"auto.navigation.browser"}},{url:$,isRedirect:me})})}m&&e0(),a&&f0(O,d,p,h,e),r&&pS(),Yv(O,{traceFetch:y,traceXHR:_,trackFetchStreamPerformance:T,tracePropagationTargets:O.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:D,onRequestSpanStart:v,onRequestSpanEnd:I})}}};function u0(t,e,n){t.emit("startPageLoadSpan",e,n),se().setTransactionName(e.name);const r=jn(t);return r&&t.emit("afterStartPageLoadSpan",r),r}function d0(t,e,n){const{url:r,isRedirect:s}=n||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:s}),t.emit("startNavigationSpan",e,{isRedirect:s});const i=se();return i.setTransactionName(e.name),r&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...ki(),url:r}}),jn(t)}function tc(t){const e=te.document,n=e==null?void 0:e.querySelector(`meta[name=${t}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function f0(t,e,n,r,s){const i=te.document;let o;const a=()=>{const c="ui.action.click",l=jn(t);if(l){const f=ee(l).op;if(["navigation","pageload"].includes(f)){je&&C.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Nn,"interactionInterrupted"),o.end(),o=void 0),!s.name){je&&C.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=rl({name:s.name,op:c,attributes:{[Ue]:s.source||"url"}},{idleTimeout:e,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}const Ku="_sentry_idleSpan";function jn(t){return t[Ku]}function nc(t,e){Ce(t,Ku,e)}const rc=1.5;function p0(t,e){const n=ee(t),r=$t(),s=n.start_timestamp;return!(r-s>rc||e&&r-e<=rc)}function h0(t){const e={...t};return vl(e,"react"),al("react",{version:S.version}),pb(e)}const m0=()=>{Ut.VITE_SENTRY_DSN&&h0({dsn:Ut.VITE_SENTRY_DSN,environment:Ut.VITE_APP_ENV,release:Ut.VITE_APP_RELEASE||void 0,tracesSampleRate:Ut.isProduction?.1:1,integrations:[l0(),Vv({maskAllText:!0,blockAllMedia:!0})],replaysSessionSampleRate:Ut.isProduction?.01:.1,replaysOnErrorSampleRate:1})},g0=t=>{it({category:"performance",message:`${t.name}: ${t.value}`,level:"info",data:t}),(t.name==="INP"&&t.value>200||t.name==="CLS"&&t.value>.1||(t.name==="FCP"||t.name==="LCP"||t.name==="TTFB")&&t.value>2500)&&Qc(`${t.name}_measurement`,t.value,t.name.includes("CLS")?"ratio":"millisecond")},y0=t=>{t||(t=g0),Y(async()=>{const{onCLS:e,onFCP:n,onLCP:r,onTTFB:s,onINP:i}=await import("./web-vitals-xphS3Uu5.js");return{onCLS:e,onFCP:n,onLCP:r,onTTFB:s,onINP:i}},[]).then(({onCLS:e,onFCP:n,onLCP:r,onTTFB:s,onINP:i})=>{e(t),n(t),r(t),s(t),i(t)})};console.log("index.tsx loading");m0();console.log("index.tsx loading");const sc=document.getElementById("root");sc?(console.log("Root container found, rendering app"),Cs.createRoot(sc).render(u.jsx(oc.StrictMode,{children:u.jsx(Qp,{})})),y0()):console.error("Root container not found!");export{pp as F,of as a,Tt as b,vt as c,vo as d,x0 as e,E0 as f,Xn as g,ci as h,v0 as i,Zf as s,wt as u};
//# sourceMappingURL=index-BYmrHuMl.js.map
