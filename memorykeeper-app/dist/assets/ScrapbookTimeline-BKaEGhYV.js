const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-utils-By3fkXm9.js","assets/game-components-DlDolkYV.js","assets/ai-studio-D1VHpCnl.js"])))=>i.map(i=>d[i]);
import{_ as F}from"./game-components-DlDolkYV.js";import{u as R,r as l,j as e,h as Q,a7 as A,a8 as Y,t as H,U as E,ag as L,ak as J,J as _,al as I,am as G,ab as W,an as $,f as X,I as Z}from"./ai-studio-D1VHpCnl.js";const ae=({onBack:k})=>{const{state:S}=R(),[n,b]=l.useState(""),[i,j]=l.useState("all"),[c,w]=l.useState("all"),[d,N]=l.useState("all"),[h,z]=l.useState("newest"),[T,g]=l.useState(!1),[ee,f]=l.useState(null),[u,v]=l.useState("none"),m=l.useMemo(()=>S.memories.map((t,a)=>{const s=new Date(t.date).getFullYear(),o=`${Math.floor(s/10)*10}s`,r=t.tags||[],p=r.filter(x=>x.toLowerCase().includes("family")||x.toLowerCase().includes("friend")||x.toLowerCase().includes("mom")||x.toLowerCase().includes("dad")||x.toLowerCase().includes("child"));return{id:t.id||`memory-${a}`,title:t.prompt||`Memory ${a+1}`,date:t.date,type:t.type,image:t.type==="photo"||t.type==="ai-generated"?"https://placehold.co/300x200/ee862b/ffffff?text=Memory+Photo":void 0,description:t.response,tags:r,decade:o,people:p,favorite:a%5===0,comments:Math.floor(Math.random()*10),shares:Math.floor(Math.random()*5)}}),[S.memories]),O=l.useMemo(()=>[...new Set(m.map(a=>a.decade))].sort((a,s)=>s.localeCompare(a)),[m]),q=l.useMemo(()=>{const t=m.flatMap(s=>s.people);return[...new Set(t)]},[m]),y=l.useMemo(()=>m.filter(t=>!(n&&!t.title.toLowerCase().includes(n.toLowerCase())&&!t.description.toLowerCase().includes(n.toLowerCase())&&!t.tags.some(a=>a.toLowerCase().includes(n.toLowerCase()))||i!=="all"&&t.type!==i||c!=="all"&&t.decade!==c||d!=="all"&&!t.people.includes(d))).sort((t,a)=>{const s=new Date(t.date).getTime(),o=new Date(a.date).getTime();return h==="newest"?o-s:s-o}),[m,n,i,c,d,h]),C=l.useMemo(()=>{const t={};return y.forEach(s=>{t[s.decade]||(t[s.decade]=[]),t[s.decade].push(s)}),Object.keys(t).sort((s,o)=>h==="newest"?o.localeCompare(s):s.localeCompare(o)).map(s=>({decade:s,memories:t[s]}))},[y,h]),P=t=>{switch(t){case"photo":return e.jsx(Z,{className:"w-4 h-4"});case"text":return e.jsx($,{className:"w-4 h-4"});case"audio":return e.jsx(X,{className:"w-4 h-4"});case"ai-generated":return e.jsx(L,{className:"w-4 h-4"});default:return e.jsx($,{className:"w-4 h-4"})}},D=t=>{switch(t){case"photo":return"Photo";case"text":return"Text";case"audio":return"Audio";case"ai-generated":return"AI Image";default:return"Text"}},V=()=>{switch(u){case"sepia":return"sepia-filter";case"vintage":return"vintage-filter";case"black-and-white":return"grayscale-filter";default:return""}},B=async()=>{g(!0),f("pdf");try{const[{jsPDF:t},a]=await Promise.all([F(()=>import("./pdf-utils-By3fkXm9.js").then(p=>p.j),__vite__mapDeps([0,1,2])),F(()=>import("./pdf-utils-By3fkXm9.js").then(p=>p.h),__vite__mapDeps([0,1,2]))]),s=new t({orientation:"portrait",unit:"px",format:"a4"});s.setFontSize(22),s.text("MemoryKeeper Scrapbook",20,30);const o=new Date().toLocaleDateString();s.setFontSize(12),s.text(`Exported on: ${o}`,20,50);let r=70;for(const p of C){s.setFontSize(16),s.setTextColor(255,140,0),s.text(p.decade,20,r),r+=20;for(const x of p.memories){s.setFontSize(14),s.setTextColor(0,0,0),s.text(x.title,20,r),r+=15,s.setFontSize(10),s.setTextColor(100,100,100),s.text(new Date(x.date).toLocaleDateString(),20,r),r+=15,s.setFontSize(12),s.setTextColor(0,0,0);const M=s.splitTextToSize(x.description,400);s.text(M,20,r),r+=M.length*15,r+=20,r>700&&(s.addPage(),r=30)}}s.save(`MemoryKeeper_Scrapbook_${o.replace(/\//g,"-")}.pdf`)}catch(t){console.error("Error exporting PDF:",t),alert("Error exporting PDF. Please try again.")}finally{g(!1),f(null)}},U=async()=>{g(!0),f("audio");try{const t=y.filter(a=>a.type==="audio");if(t.length===0){alert("No audio memories found to export.");return}alert(`Audio compilation would include ${t.length} audio memories. In a full implementation, this would create an audio file with all your voice recordings.`)}catch(t){console.error("Error exporting audio:",t),alert("Error exporting audio compilation. Please try again.")}finally{g(!1),f(null)}},K=()=>{window.confirm(`Choose export format:

1. PDF - Export all memories as a printable document
2. Audio Compilation - Export all audio memories as a single file

Press OK for PDF, Cancel for Audio Compilation`)?B():U()};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50 font-display",children:[e.jsx("style",{children:`
        .sepia-filter {
          filter: sepia(80%) contrast(1.2) brightness(0.7);
        }
        .vintage-filter {
          filter: sepia(50%) contrast(1.2) brightness(0.9) saturate(1.5);
          border: 8px solid #8B4513;
          border-radius: 8px;
        }
        .grayscale-filter {
          filter: grayscale(100%);
        }
      `}),e.jsxs("main",{className:"flex-grow p-4",children:[e.jsxs("header",{className:"flex items-center mb-6",children:[e.jsx("button",{className:"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100",onClick:k,children:e.jsx(Q,{className:"w-6 h-6 text-gray-700"})}),e.jsx("h1",{className:"text-2xl font-bold text-center flex-1 pr-10 text-gray-800",children:"Scrapbook Timeline"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-orange-100 p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search memories...",className:"w-full pl-10 pr-4 py-2 bg-orange-50/50 backdrop-blur-xl border border-orange-200 rounded-xl text-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-300",value:n,onChange:t=>b(t.target.value)})]}),e.jsx("button",{className:"p-2 bg-orange-100 rounded-xl text-orange-700 hover:bg-orange-200",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700",children:"Type"}),e.jsxs("select",{className:"w-full bg-orange-50/50 backdrop-blur-xl border border-orange-200 rounded-xl p-2 text-gray-800 shadow-sm text-sm",value:i,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"photo",children:"Photos"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"ai-generated",children:"AI Images"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700",children:"Decade"}),e.jsxs("select",{className:"w-full bg-orange-50/50 backdrop-blur-xl border border-orange-200 rounded-xl p-2 text-gray-800 shadow-sm text-sm",value:c,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"all",children:"All Decades"}),O.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700",children:"People"}),e.jsxs("select",{className:"w-full bg-orange-50/50 backdrop-blur-xl border border-orange-200 rounded-xl p-2 text-gray-800 shadow-sm text-sm",value:d,onChange:t=>N(t.target.value),children:[e.jsx("option",{value:"all",children:"All People"}),q.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700",children:"Sort by"}),e.jsxs("select",{className:"w-full bg-orange-50/50 backdrop-blur-xl border border-orange-200 rounded-xl p-2 text-gray-800 shadow-sm text-sm",value:h,onChange:t=>z(t.target.value),children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-gray-700",children:"Visual Theme"}),e.jsx("div",{className:"flex gap-2",children:["none","sepia","vintage","black-and-white"].map(t=>e.jsx("button",{className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${u===t?"bg-orange-500 text-white":"bg-orange-100 text-orange-800 hover:bg-orange-200"}`,onClick:()=>v(t),children:t==="none"?"Default":t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),(n||i!=="all"||c!=="all"||d!=="all"||u!=="none")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n&&e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),n,e.jsx("button",{onClick:()=>b(""),className:"ml-1 hover:text-orange-900",children:"Ã—"})]}),i!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[P(i),D(i),e.jsx("button",{onClick:()=>j("all"),className:"ml-1 hover:text-orange-900",children:"Ã—"})]}),c!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),c,e.jsx("button",{onClick:()=>w("all"),className:"ml-1 hover:text-orange-900",children:"Ã—"})]}),d!=="all"&&e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),d,e.jsx("button",{onClick:()=>N("all"),className:"ml-1 hover:text-orange-900",children:"Ã—"})]}),u!=="none"&&e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),u.charAt(0).toUpperCase()+u.slice(1),e.jsx("button",{onClick:()=>v("none"),className:"ml-1 hover:text-orange-900",children:"Ã—"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[C.map(({decade:t,memories:a})=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-orange-500"}),t,": Memories"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.map(s=>e.jsxs("div",{className:"p-4 bg-white/80 backdrop-blur-xl rounded-2xl border border-orange-100 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.favorite&&e.jsx(_,{className:"w-5 h-5 text-red-500 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.date).toLocaleDateString()})]})]}),s.image&&e.jsx("img",{alt:s.title,className:`w-full h-48 object-cover rounded-xl mb-3 shadow-md ${V()}`,src:s.image}),e.jsx("p",{className:"mb-3 text-gray-700 line-clamp-2",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.tags.map((o,r)=>e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs",children:o},r))}),s.people.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:s.people.join(", ")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-3 py-1 bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 rounded-full text-sm font-medium flex items-center gap-1",children:[P(s.type),D(s.type)]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),s.comments]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),s.shares]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-2 text-orange-600 hover:bg-orange-100 rounded-xl",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-orange-600 hover:bg-orange-100 rounded-xl",children:e.jsx(I,{className:"w-4 h-4"})})]})]})]},s.id))})]},t)),C.length===0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-orange-100 p-8 text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“–"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No Memories Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n||i!=="all"||c!=="all"||d!=="all"?"Try adjusting your filters or search terms":"Start adding memories to your scrapbook!"}),n||i!=="all"||c!=="all"||d!=="all"?e.jsx("button",{onClick:()=>{b(""),j("all"),w("all"),N("all"),v("none")},className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-xl font-bold",children:"Clear Filters"}):e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-rose-500 text-white rounded-xl font-bold",children:"Add Your First Memory"})]})]})]}),e.jsx("div",{className:"fixed bottom-24 right-4",children:e.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-orange-500 to-rose-500 rounded-full shadow-lg flex items-center justify-center text-white hover:shadow-xl transition-all",children:e.jsx("span",{className:"text-2xl",children:"+"})})}),e.jsx("div",{className:"fixed top-20 right-4",children:e.jsx("button",{className:"px-4 py-2 bg-white/80 backdrop-blur-xl rounded-xl shadow-lg border border-orange-100 text-orange-600 font-bold text-sm hover:bg-orange-50 transition-colors flex items-center gap-1",onClick:K,disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4"}),"Export Book"]})})})]})};export{ae as default};
//# sourceMappingURL=ScrapbookTimeline-BKaEGhYV.js.map
