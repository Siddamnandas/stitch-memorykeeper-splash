import{r as i,u as f,c as v,j as e,h as w,I as g,s as N,ab as C,ao as k,J as S,ap as I}from"./ai-studio-D1VHpCnl.js";const G=({onBack:p})=>{const[t,d]=i.useState(null),[r,c]=i.useState(null),[m,u]=i.useState(!1),[l,x]=i.useState(""),{state:h}=f(),{addToast:a}=v(),b=async()=>{if(!t&&!l.trim()){a({type:"warning",title:"Missing Content",message:"Please select a memory or enter a custom prompt.",duration:3e3});return}u(!0),c(null);try{const s=t?`Create a visual representation for this memory: "${t.prompt}" - ${t.response}`:l.trim(),o={prompt:(t==null?void 0:t.prompt)||"Custom Visual",response:s,date:new Date().toISOString(),type:"text",tags:["visual","ai-generated"]},n=await I(o);n.success&&n.imageUrl?(c(n.imageUrl),a({type:"success",title:"Visual Created!",message:"Your AI-generated visual is ready.",duration:4e3})):a({type:"error",title:"Generation Failed",message:n.error||"Could not generate visual. Please try again.",duration:5e3})}catch(s){console.error("Error generating visual:",s),a({type:"error",title:"Generation Error",message:"An unexpected error occurred while creating your visual.",duration:5e3})}finally{u(!1)}},j=async()=>{if(r)try{const s=document.createElement("a");s.href=r,s.download=`memory-visual-${Date.now()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),a({type:"success",title:"Downloaded!",message:"Visual saved to your device.",duration:3e3})}catch{a({type:"error",title:"Download Failed",message:"Could not download the visual.",duration:4e3})}},y=async()=>{if(r)try{navigator.share?await navigator.share({title:"MemoryKeeper Visual",text:"Check out this AI-generated visual from my memory!",url:r}):(await navigator.clipboard.writeText(r),a({type:"success",title:"Copied!",message:"Image URL copied to clipboard.",duration:3e3}))}catch{a({type:"warning",title:"Share Unavailable",message:"Sharing is not supported on this device.",duration:4e3})}};return e.jsxs("div",{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:p,className:"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100",children:e.jsx(w,{className:"w-6 h-6 text-gray-700"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Visual Generator"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-800",children:"AI Visual Creator"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Transform memories into beautiful visuals"})]})]}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Create stunning AI-generated visuals from your cherished memories. Select a memory or describe what you'd like to visualize."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-medium mb-3 text-gray-800",children:"Select a Memory (Optional):"}),e.jsx("div",{className:"max-h-40 overflow-y-auto bg-orange-50/50 rounded-2xl p-3 mb-4",children:h.memories.length>0?h.memories.slice(0,5).map((s,o)=>e.jsxs("button",{onClick:()=>{d(s),x("")},className:`w-full text-left p-3 rounded-xl mb-2 transition-all ${(t==null?void 0:t.id)===s.id?"bg-orange-200 border-2 border-orange-400":"bg-white/80 hover:bg-orange-100"}`,children:[e.jsx("div",{className:"font-medium text-gray-800 truncate",children:s.prompt}),e.jsx("div",{className:"text-sm text-gray-600 truncate",children:s.response})]},s.id||o)):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No memories available. You can still create visuals with custom prompts!"})]})}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:"OR"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium mb-2 text-gray-800",children:"Custom Prompt:"}),e.jsx("textarea",{value:l,onChange:s=>{x(s.target.value),s.target.value.trim()&&d(null)},placeholder:"Describe the visual you'd like to create...",className:"w-full h-24 p-4 bg-orange-50/50 rounded-2xl border border-orange-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none resize-none transition-all"})]})]}),e.jsx("button",{onClick:b,disabled:m||!t&&!l.trim(),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 disabled:opacity-50 mb-6",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Creating Visual..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-6 h-6"}),e.jsx("span",{children:"Generate Visual"})]})}),r&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-200",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"âœ¨ Your AI-Generated Visual"}),e.jsx("p",{className:"text-gray-600",children:"A beautiful representation of your memory"})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:r,alt:"AI Generated Visual",className:"max-w-full max-h-96 rounded-2xl shadow-lg border border-purple-200"})}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all shadow-lg",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all shadow-lg",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{onClick:()=>{a({type:"success",title:"Saved to Favorites!",message:"Visual added to your memory collection.",duration:3e3})},className:"flex items-center gap-2 px-6 py-3 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all shadow-lg",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Save"})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"ðŸ’¡ Visual Creation Tips"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"For Memories:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"â€¢ Focus on emotional moments"}),e.jsx("li",{children:"â€¢ Include sensory details"}),e.jsx("li",{children:"â€¢ Describe the atmosphere"}),e.jsx("li",{children:"â€¢ Mention significant objects"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Custom Prompts:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"â€¢ Be specific about style"}),e.jsx("li",{children:"â€¢ Include color preferences"}),e.jsx("li",{children:"â€¢ Mention artistic influences"}),e.jsx("li",{children:"â€¢ Describe mood and lighting"})]})]})]})]})]})};export{G as default};
//# sourceMappingURL=VisualContentGenerator-B5ceHzam.js.map
