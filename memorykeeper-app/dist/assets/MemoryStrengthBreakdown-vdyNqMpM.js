import{u as q,r as x,j as e,h as G,ax as g,ay as d,Q as w,D as M,Z as D,l as S,az as _,t as k,aA as J}from"./ai-studio-D1VHpCnl.js";import{a as K}from"./game-components-DlDolkYV.js";const Y=({onBack:h})=>{var f;const{state:s,dispatch:C}=q(),{profile:o}=K(),y=x.useMemo(()=>{const t=s.memories.slice(0,5).map(r=>{var a;return{type:"memory_added",timestamp:new Date(r.date),value:Math.min(20,Math.max(5,Math.round((((a=r.response)==null?void 0:a.length)||0)/40))),metadata:{memoryId:r.id}}}),n=s.streakCount>1?[{type:"streak_maintained",timestamp:new Date,value:Math.min(25,s.streakCount*2),metadata:{streakDays:s.streakCount}}]:[];return[...t,...n].sort((r,a)=>a.timestamp.getTime()-r.timestamp.getTime())},[s.memories,s.streakCount]),u=x.useMemo(()=>{var v,b;if(s.memories.length===0)return{consistency:0,activityCount:0,recentActivity:0,engagementDepth:0,activityDiversity:0,progressStreak:Math.min(100,s.streakCount*14.28),challengeLevel:Math.min(100,s.memoryStrength),socialEngagement:Math.min(100,(((v=o==null?void 0:o.invited_family_emails)==null?void 0:v.length)??0)*20)};const t=s.memories.map(i=>new Date(i.date)).filter(i=>!Number.isNaN(i.getTime())).sort((i,c)=>i.getTime()-c.getTime()),n=new Set(t.map(i=>i.toDateString())),r=t.length>1?Math.max(1,Math.round((t[t.length-1].getTime()-t[0].getTime())/(1e3*60*60*24))+1):1,a=Math.min(100,n.size/r*100),l=Math.min(100,s.memories.length*5),m=t[t.length-1]??new Date,R=(Date.now()-m.getTime())/(1e3*60*60*24),z=Math.max(0,100-Math.min(100,R*25)),B=s.memories.reduce((i,c)=>{var N;return i+(((N=c.response)==null?void 0:N.length)||0)},0)/s.memories.length,j=Math.min(100,B/6),F=new Set(s.memories.map(i=>i.type||"text")),P=Math.min(100,F.size/4*100),Z=Math.min(100,s.streakCount*14.28),H=Math.min(100,s.memoryStrength),Q=((b=o==null?void 0:o.invited_family_emails)==null?void 0:b.length)??0,U=s.memories.filter(i=>(i.tags||[]).some(c=>c.toLowerCase().includes("share"))).length,V=Math.min(100,Q*20+U*5);return{consistency:a,activityCount:l,recentActivity:z,engagementDepth:Number.isFinite(j)?j:0,activityDiversity:P,progressStreak:Z,challengeLevel:H,socialEngagement:V}},[(f=o==null?void 0:o.invited_family_emails)==null?void 0:f.length,s.memories,s.memoryStrength,s.streakCount]),p=x.useMemo(()=>y.slice(0,5),[y]),A=()=>{h?h():C({type:"SET_DETAIL_VIEW",payload:null})},T=t=>({consistency:k,activityCount:d,recentActivity:_,engagementDepth:S,activityDiversity:D,progressStreak:M,challengeLevel:g,socialEngagement:w})[t]||J,E=t=>({consistency:"How regularly you engage with memories",activityCount:"Total number of memory activities",recentActivity:"How recently you've been active",engagementDepth:"Quality and depth of your engagement",activityDiversity:"Variety of different memory activities",progressStreak:"Consecutive days of memory practice",challengeLevel:"Difficulty level of games completed",socialEngagement:"Sharing and collaborative activities"})[t]||"Memory strength factor",I=t=>({memory_added:g,memory_imported:_,game_completed:S,memory_reviewed:d,daily_login:k,game_perfect_score:M,memory_shared:w,streak_maintained:D})[t]||d,$=t=>{var n,r,a,l,m;switch(t.type){case"memory_added":return"Added a new memory";case"memory_imported":return`Imported from ${((n=t.metadata)==null?void 0:n.importSource)||"file"}`;case"game_completed":return`Completed ${((r=t.metadata)==null?void 0:r.gameType)||"game"} (${((a=t.metadata)==null?void 0:a.difficulty)||"normal"})`;case"memory_reviewed":return"Reviewed existing memories";case"daily_login":return"Daily login bonus";case"game_perfect_score":return`Perfect score on ${((l=t.metadata)==null?void 0:l.gameType)||"game"}!`;case"memory_shared":return"Shared memories with others";case"streak_maintained":return`${((m=t.metadata)==null?void 0:m.streakDays)||0} day streak maintained`;default:return"Memory activity"}},L=t=>{const r=new Date().getTime()-t.getTime(),a=Math.floor(r/(1e3*60*60)),l=Math.floor(a/24);return l>0?`${l}d ago`:a>0?`${a}h ago`:"Just now"};return e.jsxs("div",{className:"pt-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:A,className:"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100 hover:bg-orange-50 transition-colors","aria-label":"Go back",children:e.jsx(G,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Memory Strength Analysis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of your memory progress"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-rose-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(g,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Current Strength: ",s.memoryStrength,"/100"]}),e.jsx("p",{className:"text-gray-600",children:"Keep up the great work to maintain and improve your memory!"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-rose-500 h-4 rounded-full transition-all duration-500",style:{width:`${s.memoryStrength}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[e.jsx("span",{children:"Beginner"}),e.jsx("span",{children:"Intermediate"}),e.jsx("span",{children:"Advanced"}),e.jsx("span",{children:"Expert"})]})]})]}),u&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Strength Factors"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(u).map(([t,n])=>{const r=T(t),a=E(t);return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(r,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-medium text-gray-800 capitalize",children:t.replace(/([A-Z])/g," $1").trim()}),e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:[Math.round(n),"/100"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:a}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-400 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]})]},t)})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Recent Activities"}),p.length>0?e.jsx("div",{className:"space-y-4",children:p.map((t,n)=>{const r=I(t.type),a=$(t),l=L(t.timestamp);return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(r,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:a}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:l}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["+",t.value," pts"]})]})]})]},n)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Start adding memories and playing games to see your activity here!"})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Tips to Improve Memory Strength"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Stay Consistent"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Try to engage with memories daily to build strong habits."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Challenge Yourself"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Play harder difficulty levels in memory games."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Share Memories"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Collaborate with family and friends to strengthen social connections."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Try Different Activities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mix up your routine with various games and memory exercises."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Maintain Streaks"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Build consecutive days of activity for bonus points."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mt-1",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:"6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Review Regularly"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Periodically review your existing memories to reinforce them."})]})]})]})]})]})]})};export{Y as default};
//# sourceMappingURL=MemoryStrengthBreakdown-vdyNqMpM.js.map
