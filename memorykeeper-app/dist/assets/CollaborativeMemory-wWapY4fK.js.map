{"version":3,"file":"CollaborativeMemory-wWapY4fK.js","sources":["../../src/components/CollaborativeMemory.tsx"],"sourcesContent":["import { useState, useEffect, type FC } from 'react';\nimport { ChevronLeft, Plus, Image, Video, Mic, UserPlus, Save, Users, MessageCircle, Heart, Share2, Mail, Link, Check, X, Clock, Edit } from 'lucide-react';\nimport { useAuth } from '../lib/AuthContext';\nimport { collaborativeMemoryService } from '../lib/collaborativeMemoryService';\n\ninterface FamilyMember {\n  id: string;\n  name: string;\n  avatar: string;\n  relationship: string;\n  status: 'connected' | 'pending' | 'invited';\n  sharedMemories: number;\n}\n\ninterface Activity {\n  id: string;\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  action: 'added_memory' | 'commented' | 'shared' | 'approved' | 'declined';\n  target: string;\n  content: string;\n  timestamp: string;\n  read: boolean;\n}\n\ninterface PendingContribution {\n  id: string;\n  userId: string;\n  userName: string;\n  userAvatar: string;\n  type: 'photo' | 'video' | 'text' | 'audio';\n  content: string;\n  caption: string;\n  date: string;\n  relatedPeople: string[];\n  timestamp: string;\n}\n\ninterface Comment {\n  id: string;\n  author: string;\n  avatar: string;\n  text: string;\n  timestamp: string;\n  likes: number;\n  memoryId: string;\n}\n\nconst PLACEHOLDER_AVATAR = 'https://lh3.googleusercontent.com/aida-public/AB6AXuAGex1pX93qBbizGrdKH51pL50dkK1pYVYeDl-jBpxT5AWJ6xDM2D847ZTKkaLBCVXWtdVnOvuKCPLz7Hxoh4YyR66U_Yd3XQoJG8si9PcqMgUtlbKBnIQISsjSwVHjXVdqm9-CR_5N3wkNGigpRybhW-ZmBoszQWkL3MBeDgFciIJGZViCWhsO0jUsSY0TvPAtEbLfOZBIqERmFT69xGf5lbSqjL4Ao2BZHzGatQINlKmQZ5V3FE_bCJ_mBeuAmA1BnGvaVrv7d0M';\n\nconst CollaborativeMemory: FC<{ onBack: () => void }> = ({ onBack }) => {\n  const { user } = useAuth();\n  const userEmail = user?.email || '';\n  const [activeTab, setActiveTab] = useState<'family' | 'activity' | 'shared' | 'pending'>('family');\n  const [newComment, setNewComment] = useState('');\n  const [likedMemories, setLikedMemories] = useState<Set<string>>(new Set());\n  const [likedComments, setLikedComments] = useState<Set<string>>(new Set());\n  const [inviteMethod, setInviteMethod] = useState<'email' | 'link'>('email');\n  const [inviteEmail, setInviteEmail] = useState('');\n  const [showInviteForm, setShowInviteForm] = useState(false);\n\n  // Mock family members data\n  const [familyMembers, setFamilyMembers] = useState<FamilyMember[]>([\n    {\n      id: '1',\n      name: 'Jennifer',\n      avatar: PLACEHOLDER_AVATAR,\n      relationship: 'Daughter',\n      status: 'connected',\n      sharedMemories: 12\n    },\n    {\n      id: '2',\n      name: 'Michael',\n      avatar: PLACEHOLDER_AVATAR,\n      relationship: 'Son',\n      status: 'pending',\n      sharedMemories: 0\n    },\n    {\n      id: '3',\n      name: 'Emma',\n      avatar: PLACEHOLDER_AVATAR,\n      relationship: 'Granddaughter',\n      status: 'connected',\n      sharedMemories: 5\n    }\n  ]);\n\n  // Mock activity feed data\n  const [activities, setActivities] = useState<Activity[]>([\n    {\n      id: '1',\n      userId: '1',\n      userName: 'Jennifer',\n      userAvatar: PLACEHOLDER_AVATAR,\n      action: 'added_memory',\n      target: \"Mom's 75th Birthday Party\",\n      content: 'Added a new photo',\n      timestamp: '2 hours ago',\n      read: false\n    },\n    {\n      id: '2',\n      userId: '3',\n      userName: 'Emma',\n      userAvatar: PLACEHOLDER_AVATAR,\n      action: 'commented',\n      target: \"Summer of '68\",\n      content: \"I love this story, Grandma!\",\n      timestamp: 'Yesterday',\n      read: true\n    },\n    {\n      id: '3',\n      userId: 'current',\n      userName: 'You',\n      userAvatar: PLACEHOLDER_AVATAR,\n      action: 'shared',\n      target: 'Wedding Day 1972',\n      content: 'Shared with family',\n      timestamp: '3 days ago',\n      read: true\n    }\n  ]);\n\n  // Mock pending contributions\n  const [pendingContributions, setPendingContributions] = useState<PendingContribution[]>([\n    {\n      id: '1',\n      userId: '1',\n      userName: 'Jennifer',\n      userAvatar: PLACEHOLDER_AVATAR,\n      type: 'photo',\n      content: 'https://lh3.googleusercontent.com/aida-public/AB6AXuA6Xa6PIYrJVFAmDgm1pDK2DeY0iWkW-vIDXGx07EmFACCiAyvQBF-wF0h4AteLCfhdP846C_wC2H78W6pLGXVSHX8aC2daiuU30s4BhS4JXEAknt0P2-rcgio7iOsSPaiZBjou0iqPRN4Qi6-XCjS4xgW55wsTUVSoqH8YMrmL1tYu87DkqyMqcd2Q1AIf7r8wbRZXb2ueiVLsbKLIlICMSk8L6Gl7Ppxc1L_CPbCvnAGWJ5P3TRfESBEIsoC33bjvWXiqQZR_dTg',\n      caption: 'Family reunion photo',\n      date: '1985',\n      relatedPeople: ['Margaret', 'Michael'],\n      timestamp: '1 hour ago'\n    }\n  ]);\n\n  // Mock comments\n  const [comments, setComments] = useState<Comment[]>([\n    {\n      id: '1',\n      author: 'Grandma',\n      avatar: PLACEHOLDER_AVATAR,\n      text: 'This is a wonderful memory to share!',\n      timestamp: '2d',\n      likes: 3,\n      memoryId: '1'\n    },\n    {\n      id: '2',\n      author: 'Uncle Mark',\n      avatar: PLACEHOLDER_AVATAR,\n      text: 'I love the photos we added!',\n      timestamp: '1d',\n      likes: 5,\n      memoryId: '2'\n    }\n  ]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [loadError, setLoadError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!user?.id) {\n      setIsLoading(false);\n      return;\n    }\n\n    let cancelled = false;\n\n    const loadCollaborationData = async () => {\n      try {\n        setIsLoading(true);\n        const [collectionsRes, sharedRes, invitesRes] = await Promise.all([\n          collaborativeMemoryService.getUserCollaborativeCollections(user.id),\n          collaborativeMemoryService.getSharedMemoriesWithMe(user.id),\n          collaborativeMemoryService.getInvitesForUser(user.id, userEmail)\n        ]);\n\n        if (cancelled) {\n          return;\n        }\n\n        if (collectionsRes.data && collectionsRes.data.length > 0) {\n          const mappedMembers: FamilyMember[] = collectionsRes.data.map((collection: any) => {\n            const ownerName = collection.profiles?.full_name;\n            const permission = collection.permissions?.[user.id];\n            return {\n              id: collection.id,\n              name: collection.title || 'Shared Collection',\n              avatar: collection.profiles?.avatar_url || PLACEHOLDER_AVATAR,\n              relationship: ownerName ? `${ownerName}'s collection` : 'Shared collection',\n              status: permission === 'edit' || permission === 'admin' ? 'connected' : 'pending',\n              sharedMemories: collection.shared_memories?.length ?? 0\n            };\n          });\n\n          if (mappedMembers.length > 0) {\n            setFamilyMembers(mappedMembers);\n          }\n        }\n\n        if (sharedRes.data && sharedRes.data.length > 0) {\n          const mappedActivities: Activity[] = sharedRes.data.map((share: any) => ({\n            id: share.id,\n            userId: share.shared_by_user_id,\n            userName: share.profiles?.full_name || 'Family member',\n            userAvatar: share.profiles?.avatar_url || PLACEHOLDER_AVATAR,\n            action: 'shared',\n            target: share.memories?.prompt || 'Shared memory',\n            content: share.message || share.memories?.response || '',\n            timestamp: new Date(share.created_at).toLocaleString(),\n            read: true\n          }));\n\n          if (mappedActivities.length > 0) {\n            setActivities(mappedActivities);\n\n            const mappedComments: Comment[] = mappedActivities\n              .filter((activity) => activity.content)\n              .map((activity, index) => ({\n                id: `${activity.id}-comment-${index}`,\n                author: activity.userName,\n                avatar: activity.userAvatar,\n                text: activity.content,\n                timestamp: activity.timestamp,\n                likes: 0,\n                memoryId: activity.id\n              }));\n\n            if (mappedComments.length > 0) {\n              setComments(mappedComments);\n            }\n          }\n        }\n\n        if (invitesRes.data && invitesRes.data.length > 0) {\n          const mappedPending: PendingContribution[] = invitesRes.data.map((invite: any) => ({\n            id: invite.id,\n            userId: invite.invited_by_user_id || '',\n            userName: invite.inviter?.full_name || 'Family member',\n            userAvatar: invite.inviter?.avatar_url || PLACEHOLDER_AVATAR,\n            type: 'text',\n            content: invite.message || 'New contribution awaiting review',\n            caption: invite.collaborative_collections?.title || 'Shared collection',\n            date: invite.expires_at\n              ? new Date(invite.expires_at).toLocaleDateString()\n              : new Date(invite.created_at).toLocaleDateString(),\n            relatedPeople: [],\n            timestamp: new Date(invite.created_at).toLocaleString()\n          }));\n\n          if (mappedPending.length > 0) {\n            setPendingContributions(mappedPending);\n          }\n        }\n\n        setLoadError(null);\n      } catch (error) {\n        console.error('Failed to load collaborative data:', error);\n        if (!cancelled) {\n          setLoadError('Unable to load the latest collaboration updates. Showing recent snapshot instead.');\n        }\n      } finally {\n        if (!cancelled) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    loadCollaborationData();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [user?.id, userEmail]);\n\n  const handleAddComment = () => {\n    if (newComment.trim()) {\n      const comment: Comment = {\n        id: `${comments.length + 1}`,\n        author: user?.user_metadata?.full_name || 'You',\n        avatar: user?.user_metadata?.avatar_url || PLACEHOLDER_AVATAR,\n        text: newComment,\n        timestamp: 'Just now',\n        likes: 0,\n        memoryId: 'current'\n      };\n      \n      setComments([...comments, comment]);\n      setNewComment('');\n    }\n  };\n\n  const handleInvite = () => {\n    setShowInviteForm(true);\n  };\n\n  const sendInvite = () => {\n    if (inviteMethod === 'email' && inviteEmail) {\n      // In a real app, this would send an email invite\n      console.log(`Sending invite to ${inviteEmail}`);\n      alert(`Invitation sent to ${inviteEmail}!`);\n      setInviteEmail('');\n      setShowInviteForm(false);\n    } else if (inviteMethod === 'link') {\n      // In a real app, this would generate a shareable link\n      const inviteLink = `${window.location.origin}/invite/${Math.random().toString(36).substring(2, 15)}`;\n      navigator.clipboard.writeText(inviteLink);\n      alert('Invite link copied to clipboard!');\n      setShowInviteForm(false);\n    }\n  };\n\n  const handleSave = () => {\n    // In a real app, this would save the memory\n    console.log('Save clicked');\n    alert('Memory saved successfully!');\n  };\n\n  const handleLikeMemory = (id: string) => {\n    setLikedMemories(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      return newSet;\n    });\n  };\n\n  const handleLikeComment = (id: string) => {\n    setLikedComments(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      return newSet;\n    });\n  };\n\n  const handleAddToMemory = (type: 'text' | 'photo' | 'video' | 'audio') => {\n    console.log(`Adding ${type} to memory`);\n    alert(`Add ${type} functionality would open here`);\n  };\n\n  const handleApproveContribution = (id: string) => {\n    setPendingContributions(prev => prev.filter(contrib => contrib.id !== id));\n    alert('Contribution approved and added to scrapbook!');\n  };\n\n  const handleDeclineContribution = (id: string) => {\n    setPendingContributions(prev => prev.filter(contrib => contrib.id !== id));\n    alert('Contribution declined.');\n  };\n\n  return (\n    <div className=\"pt-6\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button \n          onClick={onBack}\n          className=\"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100\"\n        >\n          <ChevronLeft className=\"w-6 h-6 text-gray-700\" />\n        </button>\n        <h1 className=\"text-2xl font-bold text-gray-800\">Family Circle</h1>\n      </div>\n\n      {isLoading && (\n        <div className=\"bg-white/70 border border-orange-100 rounded-2xl p-3 mb-4 text-sm text-gray-600 flex items-center gap-2\">\n          <Clock className=\"w-4 h-4 text-orange-500\" />\n          Loading the latest collaboration updates…\n        </div>\n      )}\n\n      {loadError && (\n        <div className=\"bg-orange-50 border border-orange-200 text-orange-700 text-sm rounded-2xl p-3 mb-4\">\n          {loadError}\n        </div>\n      )}\n      \n      <div className=\"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl border border-orange-100 mb-6\">\n        {/* Stats Section */}\n        <div className=\"grid grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-orange-50 rounded-2xl p-3 text-center\">\n            <Users className=\"w-6 h-6 text-orange-600 mx-auto mb-1\" />\n            <p className=\"text-sm font-bold text-gray-800\">{familyMembers.filter(m => m.status === 'connected').length}</p>\n            <p className=\"text-xs text-gray-600\">Connected</p>\n          </div>\n          <div className=\"bg-amber-50 rounded-2xl p-3 text-center\">\n            <MessageCircle className=\"w-6 h-6 text-amber-600 mx-auto mb-1\" />\n            <p className=\"text-sm font-bold text-gray-800\">{activities.filter(a => !a.read).length}</p>\n            <p className=\"text-xs text-gray-600\">Unread</p>\n          </div>\n          <div className=\"bg-rose-50 rounded-2xl p-3 text-center\">\n            <Heart className=\"w-6 h-6 text-rose-600 mx-auto mb-1\" />\n            <p className=\"text-sm font-bold text-gray-800\">\n              {comments.reduce((sum, comment) => sum + comment.likes, 0)}\n            </p>\n            <p className=\"text-xs text-gray-600\">Likes</p>\n          </div>\n        </div>\n        \n        {/* Tabs */}\n        <div className=\"flex border-b border-orange-200 mb-6\">\n          <button\n            className={`pb-3 px-4 font-medium text-sm ${activeTab === 'family' ? 'text-orange-600 border-b-2 border-orange-600' : 'text-gray-500'}`}\n            onClick={() => setActiveTab('family')}\n          >\n            Family\n          </button>\n          <button\n            className={`pb-3 px-4 font-medium text-sm ${activeTab === 'activity' ? 'text-orange-600 border-b-2 border-orange-600' : 'text-gray-500'}`}\n            onClick={() => setActiveTab('activity')}\n          >\n            Activity ({activities.filter(a => !a.read).length})\n          </button>\n          <button\n            className={`pb-3 px-4 font-medium text-sm ${activeTab === 'shared' ? 'text-orange-600 border-b-2 border-orange-600' : 'text-gray-500'}`}\n            onClick={() => setActiveTab('shared')}\n          >\n            Shared\n          </button>\n          <button\n            className={`pb-3 px-4 font-medium text-sm ${activeTab === 'pending' ? 'text-orange-600 border-b-2 border-orange-600' : 'text-gray-500'}`}\n            onClick={() => setActiveTab('pending')}\n          >\n            Pending ({pendingContributions.length})\n          </button>\n        </div>\n        \n        {/* Family View */}\n        {activeTab === 'family' && (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-xl font-bold text-gray-800\">Connected Family</h2>\n              <button \n                className=\"flex items-center gap-1 py-2 px-3 bg-gradient-to-r from-orange-500 to-rose-500 text-white font-bold rounded-xl text-sm\"\n                onClick={handleInvite}\n              >\n                <UserPlus className=\"w-4 h-4\" />\n                <span>Invite</span>\n              </button>\n            </div>\n            \n            <div className=\"grid grid-cols-1 gap-4\">\n              {familyMembers.map((member) => (\n                <div key={member.id} className=\"flex items-center gap-4 p-4 bg-orange-50/50 rounded-2xl\">\n                  <div \n                    className=\"w-12 h-12 rounded-full bg-cover bg-center\" \n                    style={{backgroundImage: `url(\"${member.avatar}\")`}}\n                  ></div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between\">\n                      <div>\n                        <p className=\"font-bold text-gray-800\">{member.name}</p>\n                        <p className=\"text-sm text-gray-600\">{member.relationship}</p>\n                      </div>\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                        member.status === 'connected' ? 'bg-green-100 text-green-800' :\n                        member.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                        {member.status === 'connected' ? 'Connected' :\n                         member.status === 'pending' ? 'Pending' : 'Invited'}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center mt-2\">\n                      <span className=\"text-xs text-gray-600\">\n                        {member.sharedMemories} shared memories\n                      </span>\n                      <div className=\"flex gap-2\">\n                        <button className=\"text-orange-600 hover:text-orange-700 text-sm font-medium\">\n                          View Shared\n                        </button>\n                        {member.status === 'pending' && (\n                          <button className=\"text-gray-500 hover:text-gray-700 text-sm\">\n                            Resend\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {/* Activity View */}\n        {activeTab === 'activity' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-bold text-gray-800\">Recent Activity</h2>\n            \n            {activities.map((activity) => (\n              <div key={activity.id} className={`flex items-start gap-3 p-3 rounded-2xl ${!activity.read ? 'bg-orange-50/50' : ''}`}>\n                <div \n                  className=\"w-10 h-10 rounded-full bg-cover bg-center\" \n                  style={{backgroundImage: `url(\"${activity.userAvatar}\")`}}\n                ></div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-baseline gap-2\">\n                    <p className=\"font-bold text-gray-800 text-sm\">{activity.userName}</p>\n                    <p className=\"text-gray-500 text-xs\">{activity.timestamp}</p>\n                    {!activity.read && (\n                      <span className=\"w-2 h-2 bg-orange-500 rounded-full\"></span>\n                    )}\n                  </div>\n                  <p className=\"text-gray-700 text-sm\">\n                    {activity.action === 'added_memory' && `added a ${activity.content} to \"${activity.target}\"`}\n                    {activity.action === 'commented' && `commented on \"${activity.target}\": \"${activity.content}\"`}\n                    {activity.action === 'shared' && `shared \"${activity.target}\" with family`}\n                    {activity.action === 'approved' && `approved a contribution to \"${activity.target}\"`}\n                    {activity.action === 'declined' && `declined a contribution to \"${activity.target}\"`}\n                  </p>\n                  <div className=\"flex gap-3 mt-2\">\n                    <button className=\"text-xs text-orange-600 hover:text-orange-700\">\n                      View\n                    </button>\n                    <button className=\"text-xs text-orange-600 hover:text-orange-700\">\n                      Comment\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n        \n        {/* Shared Memories View */}\n        {activeTab === 'shared' && (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-xl font-bold text-gray-800\">Shared Memories</h2>\n            \n            <div className=\"grid grid-cols-2 gap-3\">\n              {[1, 2, 3, 4, 5, 6].map((item) => (\n                <div key={item} className=\"aspect-square rounded-2xl overflow-hidden bg-orange-100 border border-orange-200\">\n                  <div className=\"w-full h-full bg-cover bg-center\" style={{\n                    backgroundImage: 'url(\"https://lh3.googleusercontent.com/aida-public/AB6AXuA6Xa6PIYrJVFAmDgm1pDK2DeY0iWkW-vIDXGx07EmFACCiAyvQBF-wF0h4AteLCfhdP846C_wC2H78W6pLGXVSHX8aC2daiuU30s4BhS4JXEAknt0P2-rcgio7iOsSPaiZBjou0iqPRN4Qi6-XCjS4xgW55wsTUVSoqH8YMrmL1tYu87DkqyMqcd2Q1AIf7r8wbRZXb2ueiVLsbKLIlICMSk8L6Gl7Ppxc1L_CPbCvnAGWJ5P3TRfESBEIsoC33bjvWXiqQZR_dTg\")'\n                  }}></div>\n                </div>\n              ))}\n            </div>\n            \n            <button className=\"w-full py-3 bg-orange-100 text-orange-700 font-bold rounded-2xl hover:bg-orange-200 transition-colors\">\n              Load More\n            </button>\n          </div>\n        )}\n        \n        {/* Pending Approvals View */}\n        {activeTab === 'pending' && (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-xl font-bold text-gray-800\">Pending Approvals</h2>\n            \n            {pendingContributions.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-4xl mb-4\">✅</div>\n                <p className=\"text-gray-600\">No pending contributions</p>\n              </div>\n            ) : (\n              pendingContributions.map((contribution) => (\n                <div key={contribution.id} className=\"p-4 bg-orange-50/50 rounded-2xl border border-orange-100\">\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    <div \n                      className=\"w-10 h-10 rounded-full bg-cover bg-center\" \n                      style={{backgroundImage: `url(\"${contribution.userAvatar}\")`}}\n                    ></div>\n                    <div>\n                      <p className=\"font-bold text-gray-800 text-sm\">{contribution.userName}</p>\n                      <p className=\"text-xs text-gray-600\">wants to add a {contribution.type} to a memory</p>\n                    </div>\n                  </div>\n                  \n                  {contribution.type === 'photo' && (\n                    <div className=\"mb-3 rounded-xl overflow-hidden\">\n                      <div \n                        className=\"w-full h-32 bg-cover bg-center\" \n                        style={{backgroundImage: `url(\"${contribution.content}\")`}}\n                      ></div>\n                    </div>\n                  )}\n                  \n                  <p className=\"text-gray-700 text-sm mb-2\">{contribution.caption}</p>\n                  \n                  <div className=\"flex flex-wrap gap-2 mb-3\">\n                    <span className=\"px-2 py-1 bg-amber-100 text-amber-800 rounded-full text-xs\">\n                      {contribution.date}\n                    </span>\n                    {contribution.relatedPeople.map((person, index) => (\n                      <span key={index} className=\"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs\">\n                        {person}\n                      </span>\n                    ))}\n                  </div>\n                  \n                  <p className=\"text-xs text-gray-500 mb-3\">Submitted {contribution.timestamp}</p>\n                  \n                  <div className=\"flex gap-2\">\n                    <button \n                      className=\"flex-1 flex items-center justify-center gap-2 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-xl\"\n                      onClick={() => handleApproveContribution(contribution.id)}\n                    >\n                      <Check className=\"w-4 h-4\" />\n                      <span>Approve</span>\n                    </button>\n                    <button \n                      className=\"flex-1 flex items-center justify-center gap-2 py-2 bg-gradient-to-r from-red-500 to-rose-500 text-white font-bold rounded-xl\"\n                      onClick={() => handleDeclineContribution(contribution.id)}\n                    >\n                      <X className=\"w-4 h-4\" />\n                      <span>Decline</span>\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n        \n        {/* Add to Memory Section */}\n        <div className=\"pt-6 border-t border-orange-100 mt-6\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Add to Memory</h2>\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <button \n                className=\"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-700 hover:bg-orange-200 transition-colors\"\n                onClick={() => handleAddToMemory('text')}\n              >\n                <Plus className=\"w-6 h-6\" />\n              </button>\n              <p className=\"text-gray-700 text-sm font-medium\">Text</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <button \n                className=\"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-700 hover:bg-orange-200 transition-colors\"\n                onClick={() => handleAddToMemory('photo')}\n              >\n                <Image className=\"w-6 h-6\" />\n              </button>\n              <p className=\"text-gray-700 text-sm font-medium\">Photo</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <button \n                className=\"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-700 hover:bg-orange-200 transition-colors\"\n                onClick={() => handleAddToMemory('video')}\n              >\n                <Video className=\"w-6 h-6\" />\n              </button>\n              <p className=\"text-gray-700 text-sm font-medium\">Video</p>\n            </div>\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <button \n                className=\"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-700 hover:bg-orange-200 transition-colors\"\n                onClick={() => handleAddToMemory('audio')}\n              >\n                <Mic className=\"w-6 h-6\" />\n              </button>\n              <p className=\"text-gray-700 text-sm font-medium\">Audio</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Invite Form Modal */}\n      {showInviteForm && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-3xl p-6 w-full max-w-md\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-xl font-bold text-gray-800\">Invite Family</h3>\n              <button \n                className=\"text-gray-500 hover:text-gray-700\"\n                onClick={() => setShowInviteForm(false)}\n              >\n                ✕\n              </button>\n            </div>\n            \n            <div className=\"flex gap-2 mb-4\">\n              <button\n                className={`flex-1 py-2 rounded-xl font-medium ${\n                  inviteMethod === 'email' \n                    ? 'bg-orange-500 text-white' \n                    : 'bg-gray-100 text-gray-700'\n                }`}\n                onClick={() => setInviteMethod('email')}\n              >\n                Email\n              </button>\n              <button\n                className={`flex-1 py-2 rounded-xl font-medium ${\n                  inviteMethod === 'link' \n                    ? 'bg-orange-500 text-white' \n                    : 'bg-gray-100 text-gray-700'\n                }`}\n                onClick={() => setInviteMethod('link')}\n              >\n                Share Link\n              </button>\n            </div>\n            \n            {inviteMethod === 'email' ? (\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Email Address\n                </label>\n                <input\n                  type=\"email\"\n                  className=\"w-full px-4 py-2 bg-orange-50 border border-orange-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300\"\n                  placeholder=\"Enter email address\"\n                  value={inviteEmail}\n                  onChange={(e) => setInviteEmail(e.target.value)}\n                />\n              </div>\n            ) : (\n              <div className=\"mb-4 text-center py-4\">\n                <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-full bg-orange-100 mb-3\">\n                  <Link className=\"w-6 h-6 text-orange-600\" />\n                </div>\n                <p className=\"text-gray-700\">\n                  A shareable link will be generated that you can send to your family member.\n                </p>\n              </div>\n            )}\n            \n            <div className=\"flex gap-3\">\n              <button\n                className=\"flex-1 py-3 bg-gray-100 text-gray-700 font-bold rounded-2xl hover:bg-gray-200\"\n                onClick={() => setShowInviteForm(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"flex-1 py-3 bg-gradient-to-r from-orange-500 to-rose-500 text-white font-bold rounded-2xl hover:shadow-xl transition-all\"\n                onClick={sendInvite}\n                disabled={inviteMethod === 'email' && !inviteEmail}\n              >\n                {inviteMethod === 'email' ? 'Send Invite' : 'Generate Link'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      <div className=\"grid grid-cols-2 gap-3 mb-6\">\n        <button \n          className=\"flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-amber-400 to-orange-400 text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all\"\n          onClick={handleInvite}\n        >\n          <UserPlus className=\"w-5 h-5\" />\n          <span>Invite</span>\n        </button>\n        <button \n          className=\"flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-2xl shadow-lg hover:shadow-xl transition-all\"\n          onClick={handleSave}\n        >\n          <Save className=\"w-5 h-5\" />\n          <span>Save</span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CollaborativeMemory;\n"],"names":["PLACEHOLDER_AVATAR","CollaborativeMemory","onBack","user","useAuth","userEmail","activeTab","setActiveTab","useState","newComment","setNewComment","likedMemories","setLikedMemories","likedComments","setLikedComments","inviteMethod","setInviteMethod","inviteEmail","setInviteEmail","showInviteForm","setShowInviteForm","familyMembers","setFamilyMembers","activities","setActivities","pendingContributions","setPendingContributions","comments","setComments","isLoading","setIsLoading","loadError","setLoadError","useEffect","cancelled","collectionsRes","sharedRes","invitesRes","collaborativeMemoryService","mappedMembers","collection","ownerName","_a","permission","_b","_c","_d","mappedActivities","share","mappedComments","activity","index","mappedPending","invite","error","handleInvite","sendInvite","inviteLink","handleSave","handleAddToMemory","type","handleApproveContribution","id","prev","contrib","handleDeclineContribution","jsxs","jsx","ChevronLeft","Clock","Users","m","MessageCircle","a","Heart","sum","comment","UserPlus","member","item","contribution","person","Check","X","Plus","Image","Video","Mic","e","Link","Save"],"mappings":"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"}