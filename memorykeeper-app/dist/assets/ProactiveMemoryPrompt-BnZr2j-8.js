import{r as n,u as y,c as f,j as e,h as b,s as p,a1 as j,a as v,af as w}from"./ai-studio-D1VHpCnl.js";import{a as N,h as S}from"./game-components-DlDolkYV.js";const R=({onBack:u})=>{const[a,o]=n.useState(""),[l,i]=n.useState(""),[P,d]=n.useState(!1),[k,m]=n.useState(!1),{state:g}=y(),{user:c}=N(),{addToast:t}=f(),h=async()=>{d(!0);try{const r=await w(g.memories);if(r.success)o(r.content);else{const s=["What did you have for breakfast this morning?","Describe a cherished childhood memory.","What's something you're grateful for today?","Tell me about a meaningful conversation you had recently."];o(s[Math.floor(Math.random()*s.length)]),t({type:"warning",title:"Using Sample Prompt",message:"AI prompt generation unavailable. Using a curated prompt instead.",duration:4e3})}}catch{const s=["What did you have for breakfast this morning?","Describe a cherished childhood memory.","What's something you're grateful for today?","Tell me about a meaningful conversation you had recently."];o(s[Math.floor(Math.random()*s.length)]),t({type:"error",title:"Generation Failed",message:"Could not generate AI prompt. Using a sample prompt instead.",duration:4e3})}finally{d(!1)}},x=async()=>{if(!a||!l.trim()){t({type:"warning",title:"Incomplete Response",message:"Please provide a response to the memory prompt.",duration:3e3});return}if(!c){t({type:"error",title:"Authentication Required",message:"Please sign in to save your memories.",duration:4e3});return}m(!0);try{const r=await S({prompt:a,response:l.trim(),date:new Date().toISOString().split("T")[0],type:"text",tags:["ai-generated","proactive"]},c.id);if(r.error)throw new Error(r.error.message);t({type:"success",title:"Memory Saved!",message:"Thank you for sharing your memory. It has been saved successfully.",duration:4e3}),o(""),i("")}catch(r){console.error("Error saving memory:",r),t({type:"error",title:"Save Failed",message:"Could not save your memory. Please try again.",duration:5e3})}finally{m(!1)}};return e.jsxs("div",{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:u,className:"w-10 h-10 bg-white/80 backdrop-blur-xl rounded-2xl flex items-center justify-center shadow-lg border border-orange-100",children:e.jsx(b,{className:"w-6 h-6 text-gray-700"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Memory Prompt"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-orange-100 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-2xl flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-800",children:"Daily Memory Prompt"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reflect on your experiences"})]})]}),a?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 p-4 bg-purple-50 rounded-2xl border border-purple-200",children:e.jsx("p",{className:"text-lg font-medium text-gray-800",children:a})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-medium mb-2 text-gray-800",children:"Your Response:"}),e.jsx("textarea",{className:"w-full h-32 bg-orange-50 border border-orange-200 rounded-2xl p-4 text-gray-700 focus:border-orange-400 focus:ring-2 focus:ring-orange-200/50 outline-none resize-none",placeholder:"Write your memory here...",value:l,onChange:r=>i(r.target.value)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-3 px-4 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2",onClick:x,children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:"Save Memory"})]}),e.jsxs("button",{className:"flex-1 bg-orange-100 text-orange-700 font-bold py-3 px-4 rounded-2xl hover:bg-orange-200 transition-all flex items-center justify-center gap-2",onClick:h,children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:"New Prompt"})]})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsxs("button",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold py-3 px-6 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center gap-2 mx-auto",onClick:h,children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{children:"Generate Prompt"})]})})]})]})};export{R as default};
//# sourceMappingURL=ProactiveMemoryPrompt-BnZr2j-8.js.map
